<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bz.apache.org/bugzilla/page.cgi?id=bugzilla.dtd">

<bugzilla version="5.0.3"
          urlbase="https://bz.apache.org/bugzilla/"
          
          maintainer="bugzilla-admin@apache.org"
>

    <bug>
          <bug_id>40408</bug_id>
          
          <creation_ts>2006-09-04 10:53:57 +0000</creation_ts>
          <short_desc>Apache 2.2.3 is not starting</short_desc>
          <delta_ts>2006-09-08 04:00:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.2</version>
          <rep_platform>DEC</rep_platform>
          <op_sys>OSF/1</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P1</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laxmi harikumar">laxmiharikumar</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>1</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>92976</commentid>
    <comment_count>0</comment_count>
    <who name="Laxmi harikumar">laxmiharikumar</who>
    <bug_when>2006-09-04 10:53:57 +0000</bug_when>
    <thetext>We downloaded the source tar (httpd-2.2.3.tar.gz) and ran configure, make and
make install.

While trying to start apache by &quot;apachectl -k start&quot;, Apache 2.2.3 does not give
any error messages while starting but it is not actually starting. We could not
find any clues in error_log as well (It is just 0 bytes).

We tried starting &quot;httpd&quot; with debugger (ladebug). In server/main.c, line 686,
it just comes out after 

if (ap_run_pre_config(pconf, plog, ptemp) != OK) {
    ap_log_error(APLOG_MARK, APLOG_STARTUP |APLOG_ERR,
                  0, NULL, &quot;Pre-configuration failed&quot;);
              destroy_and_exit_process(process, 1);
         }

It doesn&apos;t go inside the if condition (ap_log_error part). By stepping inside
the function ap_run_pre_config, it goes inside
./srclib/apr/threadproc/unix/procsup.c and comes out of the exit 0 line of
  if (daemonize) {
            if ((x = fork()) &gt; 0) {
                exit(0);
        }

Should we try any more options?

Thanks
Laxmi</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>92977</commentid>
    <comment_count>1</comment_count>
    <who name="Joe Orton">jorton</who>
    <bug_when>2006-09-04 11:07:16 +0000</bug_when>
    <thetext>Can you try starting up in single-process mode by passing the -X argument?  If
this fails silently can you run it under some ktrace-like tool to get a system
call trace?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>92979</commentid>
    <comment_count>2</comment_count>
    <who name="Laxmi harikumar">laxmiharikumar</who>
    <bug_when>2006-09-04 11:35:08 +0000</bug_when>
    <thetext>Hi Joe,

I tried starting with &quot;httpd -X -k start&quot;. Apache 2 is configured to run on port
81. This is the error in error_log file now:

(48)Address already in use: make_sock: could not bind to address 0.0.0.0:81
no listening sockets available, shutting down
Unable to open logs

I tried changing the port to 83. Still the same error:
(48)Address already in use: make_sock: could not bind to address 0.0.0.0:83
no listening sockets available, shutting down
Unable to open logs

Thanks,
Laxmi</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>93193</commentid>
    <comment_count>3</comment_count>
    <who name="Laxmi harikumar">laxmiharikumar</who>
    <bug_when>2006-09-08 09:04:57 +0000</bug_when>
    <thetext>This problem is Tru64 specific. Here the make_sock function is being called
twice with IP address 0.0.0.0 and the second bind obviously fails.

In alloc_listener function of listen.c, the comparison:

264 if (port == oldport &amp;&amp;
265 ((!addr &amp;&amp; !sa-&gt;hostname) ||
266                   ((addr &amp;&amp; sa-&gt;hostname) &amp;&amp; !strcmp(sa-&gt;hostname, addr))

is failing (when the function gets called the second time) because of which
found_listener is not set to 1 

This is failing because sa-&gt;hostname is being set to &quot;0.0.0.0&quot; in
apr_sockaddr_info_get (which in turn calls call_resolver() in sockaddr.c. This
function has a #ifdef OSF1 where hostname is being set as 0.0.0.0 or ::
depending on IPv4 or IPv6).

We have tried a fix on the same issue for alloc_listener(). Posting it here.

File listen.c
------------

34,38c34
&lt; #if APR_HAVE_IPV6
&lt; static int default_family = APR_UNSPEC;
&lt; #else
&lt; static int default_family = APR_INET;
&lt; #endif
---
&gt;
248,272d243
&lt; static void find_default_family(apr_pool_t *p)
&lt; {
&lt; #if APR_HAVE_IPV6
&lt;     if (default_family == APR_UNSPEC) {
&lt;         apr_status_t sock_rv;
&lt;         apr_socket_t *tmp_sock;
&lt;         apr_sockaddr_t *sa;
&lt;
&lt;         if ((sock_rv = apr_socket_create(&amp;tmp_sock, APR_INET6, SOCK_STREAM, 0,
 p))
&lt;             == APR_SUCCESS &amp;&amp;
&lt; apr_sockaddr_info_get(&amp;sa, NULL, APR_INET6, 0, 0, p) == APR_SUCCESS
&lt; &amp;&amp;
&lt;             apr_socket_bind(tmp_sock, sa) == APR_SUCCESS) {
&lt;             default_family = APR_INET6;
&lt;         }
&lt;         else {
&lt;             default_family = APR_INET;
&lt;         }
&lt;         if (sock_rv == APR_SUCCESS) {
&lt;             apr_socket_close(tmp_sock);
&lt;         }
&lt;     }
&lt; #endif
&lt; }
&lt;
280,299d250
&lt;
&lt; #ifdef OSF1
&lt;     if (!addr) { /* don&apos;t bind to specific interface */
&lt;         find_default_family(process-&gt;pool);
&lt;         switch(default_family) {
&lt;         case APR_INET:
&lt;             addr = &quot;0.0.0.0&quot;;
&lt;             break;
&lt;
&lt; #if APR_HAVE_IPV6
&lt;         case APR_INET6:
&lt;             addr = &quot;::&quot;;
&lt;             break;
&lt; #endif
&lt;
&lt;         default:
&lt;             ap_assert(1 != 1); /* should not occur */
&lt;         }
&lt;     }
&lt; #endif</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>93195</commentid>
    <comment_count>4</comment_count>
    <who name="Joe Orton">jorton</who>
    <bug_when>2006-09-08 09:20:22 +0000</bug_when>
    <thetext>[Fixing assignment - please don&apos;t change the bug assignment, all bugs need to
remain assigned to the mailing list address.]

</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>93197</commentid>
    <comment_count>5</comment_count>
    <who name="Joe Orton">jorton</who>
    <bug_when>2006-09-08 09:27:46 +0000</bug_when>
    <thetext>The fix for this might be in APR.  Can you revert your changes and try a few
things from the vanilla 2.2.3 code?

1) If you change the configuration to &quot;Listen 0.0.0.0:80&quot; does the server start
up OK?

2) With the default configuration of just &quot;Listen 80&quot;, can you try the patch
I&apos;ll attach against APR?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>93198</commentid>
    <comment_count>6</comment_count>
      <attachid>18841</attachid>
    <who name="Joe Orton">jorton</who>
    <bug_when>2006-09-08 09:28:21 +0000</bug_when>
    <thetext>Created attachment 18841
patch APR resolver bug on Tru64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>93212</commentid>
    <comment_count>7</comment_count>
    <who name="Laxmi harikumar">laxmiharikumar</who>
    <bug_when>2006-09-08 11:00:17 +0000</bug_when>
    <thetext>1. With the configuration changed to &quot;Listen 0.0.0.0:80&quot; the server starts.
2. But with the patch and the default configuration of &quot;Listen 80&quot; it doesnt.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>18841</attachid>
            <date>2006-09-08 09:28:21 +0000</date>
            <delta_ts>2006-09-08 09:28:21 +0000</delta_ts>
            <desc>patch APR resolver bug on Tru64</desc>
            <filename>apr_osf1.diff</filename>
            <type>text/plain</type>
            <size>628</size>
            <attacher name="Joe Orton">jorton</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>38903</bug_id>
          
          <creation_ts>2006-03-09 03:06:05 +0000</creation_ts>
          <short_desc>r-&gt;allowed does not affect Allow response header</short_desc>
          <delta_ts>2007-03-30 08:01:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.0.55</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Anton Lavrentiev">lavr</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>86628</commentid>
    <comment_count>0</comment_count>
    <who name="Anton Lavrentiev">lavr</who>
    <bug_when>2006-03-09 03:06:05 +0000</bug_when>
    <thetext>There is a &quot;request_rec::allowed&quot; member, which is documented like so
(in include/httpd.h, struct request_rec):

    /**
     *  &apos;allowed&apos; is a bitvector of the allowed methods.
     *
     *  A handler must ensure that the request method is one that
     *  it is capable of handling.  Generally modules should DECLINE
     *  any request methods they do not handle.  Prior to aborting the
     *  handler like this the handler should set r-&gt;allowed to the list
     *  of methods that it is willing to handle.  This bitvector is used
     *  to construct the &quot;Allow:&quot; header required for OPTIONS requests,
     *  and HTTP_METHOD_NOT_ALLOWED and HTTP_NOT_IMPLEMENTED status codes.
     *
     *  Since the default_handler deals with OPTIONS, all modules can
     *  usually decline to deal with OPTIONS.  TRACE is always allowed,
     *  modules don&apos;t need to set it explicitly.
     *
     *  Since the default_handler will always handle a GET, a
     *  module which does *not* implement GET should probably return
     *  HTTP_METHOD_NOT_ALLOWED.  Unfortunately this means that a Script GET
     *  handler can&apos;t be installed by mod_actions.
     */
    apr_int64_t allowed; 

But &quot;Allow:&quot; is never actually constructed out of this member (done
in http/http_protocol.c, by make_allow()):

/* Build the Allow field-value from the request handler method mask.
 * Note that we always allow TRACE, since it is handled below.
 */
static char *make_allow(request_rec *r) 

Naturally, this member is never referenced in this function,
nor in any other one across the entire package, except that it is
only _set_ by various modules as to how it is documented --  see above,
like for example in mod_status.c.

Thus, setting of r-&gt;allowed does not work, and only &quot;Allow: TRACE&quot; gets
returned in the response headers regardless of the value of r-&gt;allowed
when HTTP_METHOD_NOT_ALLOWED results from a handler.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>101226</commentid>
    <comment_count>1</comment_count>
    <who name="A. Shaw">osxauth</who>
    <bug_when>2007-03-30 08:01:13 +0000</bug_when>
    <thetext>This is a real problem.

ap_send_http_options() looks at r-&gt;allowed_methods-&gt;method_mask, not r-&gt;allowed.

You can do something like this as a workaround:
... r-&gt;allowed_methods-&gt;method_mask = r-&gt;allowed;
... ap_send_http_options(r);
</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>39517</bug_id>
          
          <creation_ts>2006-05-08 18:46:45 +0000</creation_ts>
          <short_desc>Corrupt chunked transfer-encoding with Content Negotiation and SSI.</short_desc>
          <delta_ts>2006-05-08 11:46:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.0.54</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jens Weibler">apache-bugzilla</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>88926</commentid>
    <comment_count>0</comment_count>
    <who name="Jens Weibler">apache-bugzilla</who>
    <bug_when>2006-05-08 18:46:45 +0000</bug_when>
    <thetext>Create three files: index.html.de index.html.en and include.inc
Edit index.html.* and enter: &lt;!–#include file=”include.inc” –&gt;
chmod a+x index.html*

Edit .htaccess:
XBitHack on
AddLanguage en .en
AddLanguage de .de
LanguagePriority de en
ForceLanguagePriority Prefer Fallback

try accessing the site with an unqualified URL like
http://www.domain.tld/
Notice that your browser takes a while to complete loading the site. But the
site is displayed.

Now try http://www.domain.tld/index.html - the site is loaded immidiatly and the
browser isn&apos;t loading for a few seconds..

W3-Validator says: &quot;500 EOF when chunk header expected&quot; on the unqualified URL..


Workaround (mod_rewrite in .htaccess):
DirectoryIndex invalid
RewriteEngine on
RewriteRule ^$ /index.html [R]</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>40514</bug_id>
          
          <creation_ts>2006-09-14 20:48:29 +0000</creation_ts>
          <short_desc>would like GracefulShutdownTimeout to work for graceful restarts too</short_desc>
          <delta_ts>2006-09-14 13:48:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.2</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeff Long">long</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>93604</commentid>
    <comment_count>0</comment_count>
    <who name="Jeff Long">long</who>
    <bug_when>2006-09-14 20:48:29 +0000</bug_when>
    <thetext>Running 2.2.3 here on RHEL 3.  We use cgiwrap (a suexec clone, see
cgiwrap.sf.net) (due to historical reasons) to run user cgi programs (via
mod_cgi in prefork mode).  Nightly we have a cron job that uses &apos;apachectl
graceful&apos; to restart things so logs can be rotated.  I&apos;ve noticed that if a
user&apos;s script hangs for some reason (i.e. no CPU time is being used) that after
5 minutes or so apache will complain about the CGI request timing out and then
the httpd child that spawned the CGI will enter the C state.  When the
&apos;apachectl graceful&apos; is issued then that httpd child will enter the G state and
stay around in that state perpetually.  What I would like is for something like
GracefulShutdownTimeout to apply to graceful restarts and not just graceful
stops so that after a configured amount of time apache would start forcefully
killing these hung httpd children.

Here&apos;s an example cgi that can be used to see this problem:

#!/usr/local/bin/php

&lt;?php

while (1) {
        $i = 1;
        sleep(500);
}
?&gt;

Just run that, wait until apache reports the CGI timed out and it has entered
the C state.  Then do a graceful restart upon which it will enter the G state
and keep running.  I&apos;ve verified this also happens when running the CGI via suexec.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>41000</bug_id>
          
          <creation_ts>2006-11-19 02:36:35 +0000</creation_ts>
          <short_desc>mod_authn_dbd have an error, in function &apos;authn_dbd_password&apos;</short_desc>
          <delta_ts>2006-11-19 02:36:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.3</version>
          <rep_platform>Other</rep_platform>
          <op_sys>other</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="neeker">neeker</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>95976</commentid>
    <comment_count>0</comment_count>
    <who name="neeker">neeker</who>
    <bug_when>2006-11-19 02:36:35 +0000</bug_when>
    <thetext>file &apos;mod_authn_dbd.c&apos;, 134 line .
return dbd_password point is not availability.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>41130</bug_id>
          
          <creation_ts>2006-12-07 22:34:36 +0000</creation_ts>
          <short_desc>mod_mime and mod_negotiation type-map both clobber each other</short_desc>
          <delta_ts>2013-08-18 03:55:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.3</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Adam M. Costello">bug.apache.amc+0+</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>calestyo</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>96642</commentid>
    <comment_count>0</comment_count>
    <who name="Adam M. Costello">bug.apache.amc+0+</who>
    <bug_when>2006-12-07 22:34:36 +0000</bug_when>
    <thetext>Consider a type-map containing this entry:

URI: hello.ext
Content-Type: application/foo

Suppose some config file or .htaccess file says:

AddType application/bar ext

mod_negotation and mod_mime will fight each other and neither will have a clear
victory.  A request with Accept: application/bar will not get hello.ext, and a
request with Accept: application/foo will get hello.ext in a response that says
Content-Type: application/bar!

I think apache should be self-consistent.  It shouldn&apos;t choose a file because
it&apos;s one type and then return it as another type.  The Content-Type: in the
type-map, because it applies specifically to a single file, should override the
AddType directive that applies generally to files with a certain extension.

I don&apos;t know whether the hook order should be rearranged, or find_ct() should be
altered to avoid clobbering data that mod_negotiation has already filled in.

I don&apos;t know what priority/severity this is, so I left the defaults.  Someone
more experienced may want to adjust them.

This probably affects many or all operating systems, but I observed it only on
Linux.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>169548</commentid>
    <comment_count>1</comment_count>
    <who name="Christoph Anton Mitterer">calestyo</who>
    <bug_when>2013-08-18 03:55:03 +0000</bug_when>
    <thetext>I&apos;m stumbling accross the same... it should be clearly documented which setting wins (and the whole isn&apos;t just a problem for the type, but also for encoding, language, etc.).


Behaviour seems to be even more weird, AFAICS,...
Namely Apache uses the values from the type-map, to match the Accept* headers.... but it serves the file based on what mod_mime says.


I think it should only fall back to mod_mime, when there is no Content-Type given for a variance in the type-map... which makes sense IMHO, if one just wants to override e.g. the language.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>41262</bug_id>
          
          <creation_ts>2006-12-29 12:35:02 +0000</creation_ts>
          <short_desc>Embedded pcre causes runtime segfault</short_desc>
          <delta_ts>2016-07-27 16:59:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.3</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Mac OS X 10.4</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Roberto C. Sanchez">roberto</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>97454</commentid>
    <comment_count>0</comment_count>
    <who name="Roberto C. Sanchez">roberto</who>
    <bug_when>2006-12-29 12:35:02 +0000</bug_when>
    <thetext>When building the latest stable httpd on Mac OS X, the server segfaults if the
usertrack module is enabled.  This can be corrected by upgrading the embedded
pcre or using an external pcre.  I first tried to update the embedded pcre in
srclib to a newer version (7.0), but it caused the build to fail because of
unexpanded macros in the Makefile.  However, by compiling it seperately and
installing it in /usr/local/pcre, I was able to recompile httpd and have it work
with all the modules loaded.  I am using the Apple Developer tools and
configured with this command: &apos;./configure --enable-modules=all
--enable-mods-shared=all --with-included-apr --with-mpm=prefork --enable-ldap
--enable-authnz-ldap --enable-ssl --with-ldap --with-pcre=/usr/local/pcre&apos; (To
reproduce the segfault, don&apos;t use --with-pcre).  I did not modify any of the
configuration files after running &apos;make install&apos; and before running
&apos;/usr/local/apache2/bin/apachectl start&apos;.  I recommend updating the embedded
pcre in srclib.

Here is the gdb output of the segfaulted server:

$ gdb /usr/local/apache2/bin/httpd
GNU gdb 6.1-20040303 (Apple version gdb-437) (Fri Jan 13 18:45:48 GMT 2006)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type &quot;show copying&quot; to see the conditions.
There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for details.
This GDB was configured as &quot;i386-apple-darwin&quot;...Reading symbols for shared
libraries ........ done

(gdb) run -k start
Starting program: /usr/local/apache2/bin/httpd -k start
Reading symbols for shared libraries ......+++ done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries .. done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
 
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x7fffd69b
0x0002da60 in compile_regex (options=0, oldims=0, brackets=0xbfffefe4,
codeptr=0xbfffeb10, ptrptr=0xbfffeb0c, errorptr=0xbffff03c, lookbehind=0,
skipbytes=0, firstbyteptr=0xbfffeb04, reqbyteptr=0xbfffeafc, bcptr=0xbfffeaf4,
cd=0xbfffef98) at pcre.c:2463
2463                for (c = 0; c &lt; 32; c++) classbits[c] |= ~cbits[c+cbit_digit];

(gdb) bt
#0  0x0002da60 in compile_regex (options=0, oldims=0, brackets=0xbfffefe4,
codeptr=0xbfffeb10, ptrptr=0xbfffeb0c, errorptr=0xbffff03c, lookbehind=0,
skipbytes=0, firstbyteptr=0xbfffeb04, reqbyteptr=0xbfffeafc, bcptr=0xbfffeaf4,
cd=0xbfffef98) at pcre.c:2463
#1  0x0002d6c7 in compile_regex (options=0, oldims=0, brackets=0xbfffefe4,
codeptr=0xbfffefe0, ptrptr=0xbfffefdc, errorptr=0xbffff03c, lookbehind=0,
skipbytes=0, firstbyteptr=0xbfffefec, reqbyteptr=0xbfffefe8, bcptr=0x0,
cd=0xbfffef98) at pcre.c:3666
#2  0x00030114 in pcre_compile (pattern=0x1849380 &quot;^Apache=([^;,]+)|[;,][
\t]*Apache=([^;,]+)&quot;, options=0, errorptr=0xbffff03c, erroroffset=0xbffff038,
tables=0x3f2a0 &quot;&quot;) at pcre.c:5509
#3  0x00008470 in ap_regcomp (preg=0x18493b0, pattern=0x1849380
&quot;^Apache=([^;,]+)|[;,][ \t]*Apache=([^;,]+)&quot;, cflags=0) at util_pcre.c:135
#4  0x000053a7 in ap_pregcomp (p=0x1806418, pattern=0x1849380
&quot;^Apache=([^;,]+)|[;,][ \t]*Apache=([^;,]+)&quot;, cflags=0) at util.c:268
#5  0x005a6b18 in set_and_comp_regexp (dcfg=0x1849368, p=0x1806418,
cookie_name=0x5a6ff4 &quot;Apache&quot;) at mod_usertrack.c:203
#6  0x005a6c38 in make_cookie_dir (p=0x1806418, d=0x0) at mod_usertrack.c:268
#7  0x0001a3dc in ap_single_module_configure (p=0x1806418, s=0x180bda0,
m=0x5a7020) at config.c:2031
#8  0x00028eac in load_module (cmd=0xbffff668, dummy=0xbffff4b4,
modname=0x18491b0 &quot;usertrack_module&quot;, filename=0x18491c8
&quot;modules/mod_usertrack.so&quot;) at mod_so.c:294
#9  0x00017a36 in invoke_cmd (cmd=0x40060, parms=0xbffff668, mconfig=0xbffff4b4,
args=0x183d44c &quot;&quot;) at config.c:768
#10 0x0001853a in ap_build_config_sub (p=0x180b878, temp_pool=0x184938d,
l=0xbfffe918 &quot;híÿ¿&quot;, parms=0xbffff668, current=0xbffff51c,
curr_parent=0xbffff518, conftree=0x3f0a8) at config.c:1419
#11 0x00018b05 in ap_build_config (parms=0xbffff668, p=0x1806418,
temp_pool=0x1836418, conftree=0x3f0a8) at config.c:1202
#12 0x000192d0 in process_resource_config_nofnmatch (s=0x180bda0,
fname=0x1838ef0 &quot;/usr/local/apache2/conf/httpd.conf&quot;, conftree=0x3f0a8,
p=0x1806418, ptemp=0x1836418, depth=0) at config.c:1612
#13 0x000195d8 in ap_process_resource_config (s=0x180bda0, fname=0x1838ef0
&quot;/usr/local/apache2/conf/httpd.conf&quot;, conftree=0x3f0a8, p=0x1806418,
ptemp=0x1836418) at config.c:1644
#14 0x0001a1eb in ap_read_config (process=0x18044a0, ptemp=0x1836418,
filename=0x3567c &quot;conf/httpd.conf&quot;, conftree=0x3f0a8) at config.c:2004
#15 0x00003272 in main (argc=3, argv=0xbffff98c) at main.c:610
(gdb)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>97461</commentid>
    <comment_count>1</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2006-12-29 15:41:39 +0000</bug_when>
    <thetext>Please execute the following additional gdb commands in the case of a crash:

bt full
info frame
info registers
p *cd

This will help us to find out which of the variables points to the offending
address (0x7fffd69b in the case below).
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>97463</commentid>
    <comment_count>2</comment_count>
    <who name="Roberto C. Sanchez">roberto</who>
    <bug_when>2006-12-29 16:37:09 +0000</bug_when>
    <thetext>$ gdb /usr/local/apache2-crash/bin/httpd GNU gdb 6.1-20040303 (Apple version
gdb-437) (Fri Jan 13 18:45:48 GMT 2006)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type &quot;show copying&quot; to see the conditions.
There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for details.
This GDB was configured as &quot;i386-apple-darwin&quot;...Reading symbols for shared
libraries ........ done

(gdb) run -k start
Starting program: /usr/local/apache2-crash/bin/httpd -k start
Reading symbols for shared libraries ......+++ done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries .. done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x7fffd5fb
0x0002da58 in compile_regex (options=0, oldims=0, brackets=0xbfffef94,
codeptr=0xbfffeac0, ptrptr=0xbfffeabc, errorptr=0xbfffefec, lookbehind=0,
skipbytes=0, firstbyteptr=0xbfffeab4, reqbyteptr=0xbfffeaac, bcptr=0xbfffeaa4,
cd=0xbfffef48) at pcre.c:2463
2463                for (c = 0; c &lt; 32; c++) classbits[c] |= ~cbits[c+cbit_digit];
(gdb) bt full
#0  0x0002da58 in compile_regex (options=0, oldims=0, brackets=0xbfffef94,
codeptr=0xbfffeac0, ptrptr=0xbfffeabc, errorptr=0xbfffefec, lookbehind=0,
skipbytes=0, firstbyteptr=0xbfffeab4, reqbyteptr=0xbfffeaac, bcptr=0xbfffeaa4,
cd=0xbfffef48) at pcre.c:2463
        cbits = (const uschar *) 0xbfffe8c8 &quot;\030íÿ¿&quot;
        possessive_quantifier = 0
        is_quantifier = 0
        subreqbyte = -1866673032
        subfirstbyte = -1073746528
        class_lastchar = 25465965
        skipbytes = 16
        repeat_max = 0
        bravalue = 0
        condcount = -1073747768
        groupsetfirstbyte = 0
        repeat_type = 0
        req_caseopt = 0
        tempcode = (uschar *) 0x8fe53840
&quot;øPà\217¦&amp;à\2178Qà\217¦6à\217\2046à\217ä\027à\217h7à\217\214Qà\2176&apos;à\217&quot;
        inescq = 0
        ptr = (const uschar *) 0x184946d &quot;]+)|[;,][ \t]*Apache=([^;,]+)&quot;
        tempptr = (const uschar *) 0x9114b3dc &quot;/usr/lib/libSystem.B.dylib&quot;
        classbits = &quot;\000\000\000\000\000\020\000\b&quot;, &apos;\0&apos; &lt;repeats 23 times&gt;
        repeat_min = 0
        after_manual_callout = 0
        c = 16
        op_type = -1073747768
        reqvary = 0
        tempreqvary = 0
        ptr = (const uschar *) 0x184946d &quot;]+)|[;,][ \t]*Apache=([^;,]+)&quot;
        code = (uschar *) 0x5d &lt;Address 0x5d out of bounds&gt;
        last_branch = (uschar *) 0x400a1a &quot;Q&quot;
        reverse_count = (uschar *) 0x0
        firstbyte = -2
        reqbyte = -2
        branchfirstbyte = -2
        branchreqbyte = -2
        bc = {
  outer = 0xbfffeaa4,
  current = 0x400a1a &quot;Q&quot;
}
        bcptr = (branch_chain *) 0x5d
#1  0x0002d6bf in compile_regex (options=0, oldims=0, brackets=0xbfffef94,
codeptr=0xbfffef90, ptrptr=0xbfffef8c, errorptr=0xbfffefec, lookbehind=0,
skipbytes=0, firstbyteptr=0xbfffef9c, reqbyteptr=0xbfffef98, bcptr=0x0,
cd=0xbfffef48) at pcre.c:3666
        possessive_quantifier = -1880803264
        is_quantifier = 0
        subreqbyte = -1881125354
        subfirstbyte = 0
        class_lastchar = 25465965
        skipbytes = 0
        repeat_max = 0
        bravalue = 81
        condcount = -1073747768
        groupsetfirstbyte = 0
        repeat_type = 0
        req_caseopt = 0
        tempcode = (uschar *) 0x400a1a &quot;Q&quot;
        inescq = 0
        ptr = (const uschar *) 0x1849469 &quot;[^;,]+)|[;,][ \t]*Apache=([^;,]+)&quot;
        tempptr = (const uschar *) 0x0
        classbits =
&quot;\000\000\000\000\000\000\000\000H$\000\220â\000\000\000\003\000\000\000èêÿ¿\217&amp;\000\220\000\000\200\001&quot;
        repeat_min = 0
        after_manual_callout = 0
        c = 0
        op_type = -1073747768
        reqvary = 0
        tempreqvary = 0
        ptr = (const uschar *) 0x184946d &quot;]+)|[;,][ \t]*Apache=([^;,]+)&quot;
        code = (uschar *) 0x5d &lt;Address 0x5d out of bounds&gt;
        last_branch = (uschar *) 0x400a08 &quot;P&quot;
        reverse_count = (uschar *) 0x0
        firstbyte = -2
        reqbyte = -2
        branchfirstbyte = 65
        branchreqbyte = 101
        bc = {
  outer = 0x0,
  current = 0x400a08 &quot;P&quot;
}
        bcptr = (branch_chain *) 0x5d
#2  0x0003010c in pcre_compile (pattern=0x1849460 &quot;^Apache=([^;,]+)|[;,][
\t]*Apache=([^;,]+)&quot;, options=0, errorptr=0xbfffefec, erroroffset=0xbfffefe8,
tables=0x3f2a0 &quot;&quot;) at pcre.c:5509
        re = (real_pcre *) 0x4009e0
        length = 182
        c = 44
        firstbyte = 46
        reqbyte = 2118144
        bracount = 1
        branch_extra = 0
        branch_newextra = 93
        item_count = 26
        name_count = 0
        max_name_size = 93
        lastitemlength = 1
        inescq = 0
        brastackptr = 0
        size = 0
        code = (uschar *) 0x400a08 &quot;P&quot;
        codestart = (const uschar *) 0x400a08 &quot;P&quot;
        ptr = (const uschar *) 0x1849460 &quot;^Apache=([^;,]+)|[;,][
\t]*Apache=([^;,]+)&quot;
        compile_block = {
  lcc = 0x3f2a0 &quot;&quot;,
  fcc = 0x3f3a0 &quot;&quot;,
  cbits = 0x3f4a0 &quot;&quot;,
  ctypes = 0x3f5e0 &quot;\200&quot;,
  start_code = 0x400a08 &quot;P&quot;,
  start_pattern = 0x1849460 &quot;^Apache=([^;,]+)|[;,][ \t]*Apache=([^;,]+)&quot;,
  name_table = 0x400a08 &quot;P&quot;,
  names_found = 0,
  name_entry_size = 3,
  top_backref = 0,
  backref_map = 0,
  req_varyopt = 0,
  nopartial = 0
}
        brastack = {142, 25465536, -1073747000, -1881125354, 0 &lt;repeats 12
times&gt;, -1073745932, -1073745872, 25465536, 0, 0, 0, 0, -1881125179, 0,
25465536, -1073745896, -1881125075, 0, 0, 0, -1881125628, -1073745680, 0,
-1073746904, 19822, 0, 0, 0, 0, 0, 0, 0, 2103264, 2103264, 0, 1, -1880969622,
2103264, 0, -1073746840, -1880928605, 8388608, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0,
302448, 2103264, 0, -1073746808, -1881105009, 8388608, 0, 0, 2113664, 2113664,
2103296, 0, 3154053, 2103296, 2103584, 0, 2, -1073745488, 654696, 11,
-1880947369, 3835618, 3466792, 172, -1881077209, 5942910, 3492403, 48,
-1881089198, -1879046316, -1073746720, 13, -1880969622, 1835166060, 5, 24,
-1880928605, 1831747, 46, 672912, -1881098623, 23, 48, 672912, 655464, 1,
3470204, 3272944, 3481620, 173, 171, 0, -1880947369, 1, 2, 0, -1880928605,
2118512, 48, -1073746296, -1879016158, 4196784, 48, 48, -1881131634, 2099984, 2,
0, 131072, -1073746260, 653400, 23, -1881076672, 5942857, 675941, -1073746504,
2118544, 2118544, 48, 0, -1880947369, 1, 651528, 11, -1881076672, 5942826,
707312, 0, 5251095, 16772780, 211008, 672912, 653124, 47, 3470204, 3272944,
3481620, 278, 278, 203, -1881077209, 5942928, 3481856, 672912, 651396, 23, 0,
1270440, -1881131938, 2097248, 0, -1073746312, -1881131634, 2097248, 653400, 0,
0, -1073746084, 98427, 672912, 655464, -1880982564, -1512901655, -1881085377,
-1881084870, -2035352088, 834625679, -1512901655, 834625791, 5931118, 1,
-1073746264, -1881084176, -1880803264, 5942857, -1073746280, -1881131329}
        bralenstack = &quot;\000ïÿ¿\006\000\000\000èîÿ¿\2165à\217\020\v
\000ÀÛ4\000øîÿ¿[ðà\217ó\000
\000Xø\t\000\\ïÿ¿¿6à\217Ò{â\217é¢\210Ö?êà\217:ìà\217¥W¯\206\217èR¯é¢\210ÖÿèR¯ÿ\200Z\000\bñ\t\000\214ïÿ¿Xø\t\000@8å\217\220®Z\000\bïÿ¿0õà\217I®Z\000 RZ\000xïÿ¿iöà\217àQ
\000n\200Z\000 RZ\000I®Z\000fS\000\000`\000
\000@8å\2170õà\217\210®Z\000 RZ\000¨ïÿ¿n\000\000\000ÖQ
\000\017\200Z\000 RZ\000*®Z\000\a\000\000\000\020­Z&quot;
#3  0x00008468 in ap_regcomp (preg=0x1849490, pattern=0x1849460
&quot;^Apache=([^;,]+)|[;,][ \t]*Apache=([^;,]+)&quot;, cflags=0) at util_pcre.c:135
        errorptr = 0x0
        erroffset = 0
        preg = (ap_regex_t *) 0x1849490
        pattern = 0x5d &lt;Address 0x5d out of bounds&gt;
        cflags = 93
#4  0x0000539f in ap_pregcomp (p=0x1806418, pattern=0x1849460
&quot;^Apache=([^;,]+)|[;,][ \t]*Apache=([^;,]+)&quot;, cflags=0) at util.c:268
        preg = (ap_regex_t *) 0x1849490
        p = (struct apr_pool_t *) 0x1806418
        pattern = 0x5d &lt;Address 0x5d out of bounds&gt;
        cflags = 93
#5  0x005a6b18 in set_and_comp_regexp (dcfg=0x1849448, p=0x1806418,
cookie_name=0x5a6ff4 &quot;Apache&quot;) at mod_usertrack.c:203
        danger_chars = 0
        sp = 0x0
#6  0x005a6c38 in make_cookie_dir (p=0x1806418, d=0x0) at mod_usertrack.c:268
        p = (struct apr_pool_t *) 0x1806418
#7  0x0001a3d4 in ap_single_module_configure (p=0x1806418, s=0x180bda0,
m=0x5a7020) at config.c:2031
        m = (module *) 0x5a7020
#8  0x00028ea4 in load_module (cmd=0xbffff618, dummy=0xbffff464,
modname=0x1849288 &quot;usertrack_module&quot;, filename=0x18492a0
&quot;modules/mod_usertrack.so&quot;) at mod_so.c:294
        modhandle = (struct apr_dso_handle_t *) 0x18492f8
        modsym = 0x5a7020
        modp = (module *) 0x5a7020
        szModuleFile = 0x18492c0 &quot;/usr/local/apache2-crash/modules/mod_usertrack.so&quot;
        modi = (ap_module_symbol_t *) 0x1838508
        modie = (ap_module_symbol_t *) 0x5d
        i = 5926944
        error = 0x0
        dummy = (void *) 0x5d
        filename = 0x0
#9  0x00017a2e in invoke_cmd (cmd=0x40060, parms=0xbffff618, mconfig=0xbffff464,
args=0x183d44c &quot;&quot;) at config.c:768
        w = 0x40060 &quot;(Å\003&quot;
        w2 = 0x5d &lt;Address 0x5d out of bounds&gt;
        w3 = 0x184946d &quot;]+)|[;,][ \t]*Apache=([^;,]+)&quot;
        errmsg = 0x0
#10 0x00018532 in ap_build_config_sub (p=0x180b878, temp_pool=0x184946d,
l=0xbfffe8c8 &quot;\030íÿ¿&quot;, parms=0xbffff618, current=0xbffff4cc,
curr_parent=0xbffff4c8, conftree=0x3f0a8) at config.c:1419
        ml = (ap_mod_list *) 0x180b878
        dir = 0x180b878 &quot;&quot;
        args = 0x183d423 &quot;usertrack_module modules/mod_usertrack.so&quot;
        sub_tree = (ap_directive_t *) 0x0
        retval = 0x184946d &quot;]+)|[;,][ \t]*Apache=([^;,]+)&quot;
        args = 0x183d423 &quot;usertrack_module modules/mod_usertrack.so&quot;
        cmd_name = 0x1849218 &quot;LoadModule&quot;
        mod = (module *) 0x3f1e0
        cmd = (const command_rec *) 0x5d
#11 0x00018afd in ap_build_config (parms=0xbffff618, p=0x1806418,
temp_pool=0x1836418, conftree=0x3f0a8) at config.c:1202
        current = (ap_directive_t *) 0x183a0a0
        curr_parent = (ap_directive_t *) 0x0
        l = 0x183d418 &quot;LoadModule usertrack_module modules/mod_usertrack.so&quot;
        errmsg = 0x184946d &quot;]+)|[;,][ \t]*Apache=([^;,]+)&quot;
        conftree = (ap_directive_t **) 0x3f0a8
#12 0x000192c8 in process_resource_config_nofnmatch (s=0x180bda0,
fname=0x1838ef0 &quot;/usr/local/apache2-crash/conf/httpd.conf&quot;, conftree=0x3f0a8,
p=0x1806418, ptemp=0x1836418, depth=0) at config.c:1612
        parms = {
  info = 0x0,
  override = 150,
  limited = -1,
  limited_xmethods = 0x0,
  xlimited = 0x0,
  config_file = 0x1839fb0,
  directive = 0x0,
  pool = 0x1806418,
  temp_pool = 0x1836418,
  server = 0x180bda0,
  path = 0x0,
  cmd = 0x40060,
  context = 0x0,
  err_directive = 0x1849228,
  override_opts = 239
}
        cfp = (ap_configfile_t *) 0x1839fb0
        error = 0x5d &lt;Address 0x5d out of bounds&gt;
        rv = 25465965
#13 0x000195d0 in ap_process_resource_config (s=0x180bda0, fname=0x1838ef0
&quot;/usr/local/apache2-crash/conf/httpd.conf&quot;, conftree=0x3f0a8, p=0x1806418,
ptemp=0x1836418) at config.c:1644
        fname = 0x1838ef0 &quot;/usr/local/apache2-crash/conf/httpd.conf&quot;
        dirp = (struct apr_dir_t *) 0x0
        dirent = {
  pool = 0x18,
  valid = 25,
  protection = 40,
  filetype = 4294967295,
  user = 4294967295,
  group = 4294967295,
  inode = 4294967295,
  device = 232508,
  nlink = 263868,
  size = 436166814044096,
  csize = 25398056,
  atime = 436384783398840,
  mtime = 939553087027116,
  ctime = 137439172227,
  fname = 0x1806418 &quot;\030D\200\001\030d\204\001&quot;,
  name = 0xef &lt;Address 0xef out of bounds&gt;,
  filehand = 0x1808450
}
        current = 25399024
        candidates = (apr_array_header_t *) 0x5
        rv = 25465965
        path = 0x200080 &quot;0\002 &quot;
        finfo = {
  pool = 0x18,
  valid = 25,
  protection = 40,
  filetype = 4294967295,
  user = 4294967295,
  group = 4294967295,
  inode = 4294967295,
  device = 232508,
  nlink = 263868,
  size = 436166814044096,
  csize = 25398056,
  atime = 436384783398840,
  mtime = 939553087027116,
  ctime = 137439172227,
  fname = 0x1806418 &quot;\030D\200\001\030d\204\001&quot;,
  name = 0xef &lt;Address 0xef out of bounds&gt;,
  filehand = 0x1808450
}
        dirp = (struct apr_dir_t *) 0x0
        dirent = {
  pool = 0x18,
  valid = 25,
  protection = 40,
  filetype = 4294967295,
  user = 4294967295,
  group = 4294967295,
  inode = 4294967295,
  device = 232508,
  nlink = 263868,
  size = 436166814044096,
  csize = 25398056,
  atime = 436384783398840,
  mtime = 939553087027116,
  ctime = 137439172227,
  fname = 0x1806418 &quot;\030D\200\001\030d\204\001&quot;,
  name = 0xef &lt;Address 0xef out of bounds&gt;,
  filehand = 0x1808450
}
        candidates = (apr_array_header_t *) 0x5
        path = 0x200080 &quot;0\002 &quot;
        dirp = (struct apr_dir_t *) 0x0
        dirent = {
  pool = 0x18,
  valid = 25,
  protection = 40,
  filetype = 4294967295,
  user = 4294967295,
  group = 4294967295,
  inode = 4294967295,
  device = 232508,
  nlink = 263868,
  size = 436166814044096,
  csize = 25398056,
  atime = 436384783398840,
  mtime = 939553087027116,
  ctime = 137439172227,
  fname = 0x1806418 &quot;\030D\200\001\030d\204\001&quot;,
  name = 0xef &lt;Address 0xef out of bounds&gt;,
  filehand = 0x1808450
}
        candidates = (apr_array_header_t *) 0x5
        path = 0x200080 &quot;0\002 &quot;
        dirp = (struct apr_dir_t *) 0x0
        dirent = {
  pool = 0x18,
  valid = 25,
  protection = 40,
  filetype = 4294967295,
  user = 4294967295,
  group = 4294967295,
  inode = 4294967295,
  device = 232508,
  nlink = 263868,
  size = 436166814044096,
  csize = 25398056,
  atime = 436384783398840,
  mtime = 939553087027116,
  ctime = 137439172227,
  fname = 0x1806418 &quot;\030D\200\001\030d\204\001&quot;,
  name = 0xef &lt;Address 0xef out of bounds&gt;,
  filehand = 0x1808450
}
        candidates = (apr_array_header_t *) 0x5
        path = 0x200080 &quot;0\002 &quot;
#14 0x0001a1e3 in ap_read_config (process=0x18044a0, ptemp=0x1836418,
filename=0x35674 &quot;conf/httpd.conf&quot;, conftree=0x3f0a8) at config.c:2004
        confname = 0x5d &lt;Address 0x5d out of bounds&gt;
        error = 0x5d &lt;Address 0x5d out of bounds&gt;
        p = (struct apr_pool_t *) 0x1806418
        s = (server_rec *) 0x180bda0
        process = (process_rec *) 0x1838b28
#15 0x0000326a in main (argc=3, argv=0xbffff940) at main.c:610
        c = 0 &apos;\0&apos;
        configtestonly = 0
        confname = 0x35674 &quot;conf/httpd.conf&quot;
        def_server_root = 0x35684 &quot;/usr/local/apache2-crash&quot;
        temp_error_log = 0x0
        error = 0x5d &lt;Address 0x5d out of bounds&gt;
        process = (process_rec *) 0x18044a0
        server_conf = (server_rec *) 0x18044a0
        pglobal = (struct apr_pool_t *) 0x1804418
        pconf = (struct apr_pool_t *) 0x1806418
        plog = (struct apr_pool_t *) 0x1834418
        ptemp = (struct apr_pool_t *) 0x1836418
        pcommands = (struct apr_pool_t *) 0x1808418
        opt = (apr_getopt_t *) 0x18084b0
        rv = 258216
        optarg = 0x79645f5f &lt;Address 0x79645f5f out of bounds&gt;
(gdb) info frame
Stack level 0, frame at 0xbfffe950:
 eip = 0x2da58 in compile_regex (pcre.c:2463); saved eip 0x2d6bf
 called by frame at 0xbfffeaf0
 source language c.
 Arglist at 0xbfffe948, args: options=0, oldims=0, brackets=0xbfffef94,
codeptr=0xbfffeac0, ptrptr=0xbfffeabc, errorptr=0xbfffefec, lookbehind=0,
skipbytes=0, firstbyteptr=0xbfffeab4, reqbyteptr=0xbfffeaac, bcptr=0xbfffeaa4,
cd=0xbfffef48
 Locals at 0xbfffe948, Previous frame&apos;s sp is 0xbfffe950
 Saved registers:
  ebx at 0xbfffe93c, ebp at 0xbfffe948, esi at 0xbfffe940, edi at 0xbfffe944,
eip at 0xbfffe94c
(gdb) info registers
eax            0x5d     93
ecx            0xbfffe8c8       -1073747768
edx            0x184946d        25465965
ebx            0x2d0e7  184551
esp            0xbfffe7b0       0xbfffe7b0
ebp            0xbfffe948       0xbfffe948
esi            0xbfffecf4       -1073746700
edi            0x10     16
eip            0x2da58  0x2da58
eflags         0x10246  66118
cs             0x17     23
ss             0x1f     31
ds             0x1f     31
es             0x1f     31
fs             0x0      0
gs             0x37     55
(gdb) p *cd
$1 = {
  lcc = 0x3f2a0 &quot;&quot;,
  fcc = 0x3f3a0 &quot;&quot;,
  cbits = 0x3f4a0 &quot;&quot;,
  ctypes = 0x3f5e0 &quot;\200&quot;,
  start_code = 0x400a08 &quot;P&quot;,
  start_pattern = 0x1849460 &quot;^Apache=([^;,]+)|[;,][ \t]*Apache=([^;,]+)&quot;,
  name_table = 0x400a08 &quot;P&quot;,
  names_found = 0,
  name_entry_size = 3,
  top_backref = 0,
  backref_map = 0,
  req_varyopt = 0,
  nopartial = 0
}

Hope this helps.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>97474</commentid>
    <comment_count>3</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2006-12-30 01:27:57 +0000</bug_when>
    <thetext>Thanks for the quick update, but to be honest at the moment I have no idea why
this happens.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>97485</commentid>
    <comment_count>4</comment_count>
    <who name="Roberto C. Sanchez">roberto</who>
    <bug_when>2006-12-30 07:11:08 +0000</bug_when>
    <thetext>No problem.  I don&apos;t understand either.  However, it appears that the embedded
version of pcre in the httpd source is version 5.0, which is now over two years
old.  I have apache successfully working with the latest upstream, version 7.0.
 Of course, this would need to be tested thouroughly to ensure that it does not
introduce any regressions.  I&apos;d recommend updating the pcre included with httpd.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>97492</commentid>
    <comment_count>5</comment_count>
    <who name="Nick Kew">nick</who>
    <bug_when>2006-12-30 18:58:40 +0000</bug_when>
    <thetext>This is an instance of a frequently-recurring problem that comes with bundling
*any* PCRE version.  The solution is to unbundle it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>103068</commentid>
    <comment_count>6</comment_count>
    <who name="Ian Holsman">ianh</who>
    <bug_when>2007-05-10 22:25:54 +0000</bug_when>
    <thetext>is the &apos;solution&apos; here to check at compile time on OS/X and refuse to build
unless the person has specified a external pcre?

The bug is marked as needsinfo. what other information is required?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>41485</bug_id>
          
          <creation_ts>2007-01-28 12:53:18 +0000</creation_ts>
          <short_desc>LDAP client certificates not usable in 2.2.x/trunk</short_desc>
          <delta_ts>2007-01-28 12:53:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>other</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Eric Covener">covener</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>98656</commentid>
    <comment_count>0</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2007-01-28 12:53:18 +0000</bug_when>
    <thetext>The Client cert selection for LDAP connections has some serious issues:

1) LDAPTrustedClient cert is defined as RSRC_CONF instead of per-directory as
it&apos;s intended
2) The client_certs are lost along the way (stored away in an unreferenced copy
of the global_certs var)
3) Possible segfaults when comparing client certs (when passwords not specified
for private keys)
4) Unclear level of support for per-directory client certs in various LDAP SDKs,
e.g. no support for this in current openldap releases.

See http://www.mail-archive.com/dev@httpd.apache.org/msg34194.html (patches
available, usefullness unclear because of SDK support)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>41529</bug_id>
          
          <creation_ts>2007-02-02 10:19:31 +0000</creation_ts>
          <short_desc>Accept BOM in .htaccess</short_desc>
          <delta_ts>2007-09-27 00:09:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Charles A. Landemaine">landemaine</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>98910</commentid>
    <comment_count>0</comment_count>
    <who name="Charles A. Landemaine">landemaine</who>
    <bug_when>2007-02-02 10:19:31 +0000</bug_when>
    <thetext>If you save the .htaccess file using ISO-8859-1 or Windows 1252 encodings, it 
works fine. But if you use utf-8 recommended and universal encoding, Apache 
triggers an &quot;Internal Server Error&quot;. I have tried several hours creating some 
rules, and when I found out nothing worked, all of the sudden I saw Apache did 
not accept utf-8. Most operating systems and applications are migrating to utf-
8 to support international languages, so it would be a good thing to work 
properly with utf-8.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>98917</commentid>
    <comment_count>1</comment_count>
    <who name="Nick Kew">nick</who>
    <bug_when>2007-02-02 13:55:11 +0000</bug_when>
    <thetext>That&apos;ll be a BOM, inserted by your editor.  I&apos;m not convinced we gain anything
by accepting a BOM in .htaccess files, but I&apos;ll leave it open as an enhancement
request.

You might want to submit a bug report to the developers of your editor, if it
inserts binary stuff in a text file without telling you.

</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>99775</commentid>
    <comment_count>2</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2007-02-26 00:45:12 +0000</bug_when>
    <thetext>I thought I had hacked ap_popen/read eons ago to address this, wonder
if it fell off the map, or I&apos;m misremembering.  I&apos;ll take a peek.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>99777</commentid>
    <comment_count>3</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2007-02-26 01:03:52 +0000</bug_when>
    <thetext>http://mail-archives.apache.org/mod_mbox/httpd-dev/200303.mbox/%3cn2m-g.ncsueipv7xln$ndparker@news.perlig.de%3e

This was done for Win32 script shebang parsing, since httpd has a rule to ignore
leading whitespace, I don&apos;t see why avoiding these first three bytes would be
a bad thing for conf file parsing (minimal overhead).

That PR was 16687, see

http://svn.apache.org/viewvc?view=rev&amp;revision=98775</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>108700</commentid>
    <comment_count>4</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2007-09-27 00:09:02 +0000</bug_when>
    <thetext>Whoops, wrong patch, the patch in the above comment relates to CGI (and could be
applied to perl python and possibly other environments when on unix.)

The patch you wanted was;

http://svn.apache.org/viewvc?view=rev&amp;revision=94446

and is wrapped in an #ifdef WIN32 that is easily stripped off to apply to any
platform at all.

By rights this is a dup of 10125, but you are asking across platforms.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>42082</bug_id>
          
          <creation_ts>2007-04-10 12:01:49 +0000</creation_ts>
          <short_desc>filter_init is called multiple times after an INCLUDES filter</short_desc>
          <delta_ts>2007-04-10 12:01:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.2</version>
          <rep_platform>All</rep_platform>
          <op_sys>other</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Joachim Zobel">jz-2007</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>101562</commentid>
    <comment_count>0</comment_count>
    <who name="Joachim Zobel">jz-2007</who>
    <bug_when>2007-04-10 12:01:49 +0000</bug_when>
    <thetext>Hi.

After an INCLUDES filter a subsequent filters filter_init function is called
once for the main document and once for each included document. It should be
called only once.

To check this a filter is used that counts the calls to filter_init (see below).

The output in the error log is:

[Tue Apr 10 07:43:45 2007] [debug] mod_count_init.c(24): [client 192.168.201.87]
ci_filter_init counted 1.
[Tue Apr 10 07:43:45 2007] [debug] mod_count_init.c(24): [client 192.168.201.87]
ci_filter_init counted 2.
[Tue Apr 10 07:43:45 2007] [debug] mod_count_init.c(24): [client 192.168.201.87]
ci_filter_init counted 3.
[Tue Apr 10 07:43:45 2007] [debug] mod_count_init.c(24): [client 192.168.201.87]
ci_filter_init counted 4.
[Tue Apr 10 07:43:45 2007] [debug] mod_count_init.c(24): [client 192.168.201.87]
ci_filter_init counted 5.
[Tue Apr 10 07:43:45 2007] [debug] mod_count_init.c(24): [client 192.168.201.87]
ci_filter_init counted 6.

-------------------------------------------------------------------------------
LoadModule ci_module modules/mod_count_init.so

AddOutputFilter  INCLUDES;count-init .html

bug.html----------------------------------------------------------------------
&lt;html&gt;
&lt;!--#include virtual=&quot;test.txt&quot; --&gt;
&lt;!--#include virtual=&quot;test.txt&quot; --&gt;
&lt;!--#include virtual=&quot;test.txt&quot; --&gt;
&lt;!--#include virtual=&quot;test.txt&quot; --&gt;
&lt;!--#include virtual=&quot;test.txt&quot; --&gt;
&lt;/html&gt;
test.txt----------------------------------------------------------------------
Test
mod_count_init.c--------------------------------------------------------------
/* 
 * Test for an apache 2.2 bug
 */

#include &lt;apr.h&gt;
#include &lt;apr_general.h&gt;
#include &lt;apr_buckets.h&gt;
#include &lt;http_protocol.h&gt;
#include &lt;http_log.h&gt;
#include &lt;mpm.h&gt;

module AP_MODULE_DECLARE_DATA ci_module;

/*****************************************************************************
 * The main filter
 *****************************************************************************/

/*
 * ci_filter_init
 */
static int ci_filter_init(ap_filter_t * f)
{
    int *cnt = (int *)(&amp;f-&gt;ctx);
    ap_log_rerror(APLOG_MARK, APLOG_DEBUG, 0, f-&gt;r,
                  &quot;ci_filter_init counted %d.&quot;, ++(*cnt));

    return OK;
}

/**
 * Does nothing
 */
static int ci_filter(ap_filter_t * f, apr_bucket_brigade * bb)
{
    return ap_pass_brigade(f-&gt;next, bb);
}

/*****************************************************************************
 * The usual module stuff
 *****************************************************************************/

static void ci_hooks(apr_pool_t * p)
{
    ap_register_output_filter(&quot;count-init&quot;, ci_filter,
                              ci_filter_init, AP_FTYPE_RESOURCE);
}

module AP_MODULE_DECLARE_DATA ci_module = {
    STANDARD20_MODULE_STUFF, NULL, NULL, NULL, NULL,
    NULL, ci_hooks
};</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>43177</bug_id>
          
          <creation_ts>2007-08-21 07:45:32 +0000</creation_ts>
          <short_desc>child pid xxxxx exit signal Segmentation fault</short_desc>
          <delta_ts>2007-08-21 07:45:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.0-HEAD</version>
          <rep_platform>HP</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Krishna Rawat">Krishna.Rawat</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>106964</commentid>
    <comment_count>0</comment_count>
    <who name="Krishna Rawat">Krishna.Rawat</who>
    <bug_when>2007-08-21 07:45:32 +0000</bug_when>
    <thetext>First of all thanks for the Great work.

We run more than 100 apache servers on one Linux server/machine. Each apache
instance has 50 child processes. And mainly we run SSL in most of these cases. I
think configuration like this might be the cause of the problem i am
experiencing.  And i don&apos;t think it has to do anything to do with OS or apache
version i use.  When i had around 60 Apache servers running it was all fine.
When i started adding more instances i started getting following error message
in the error log.

[Sat Aug 18 11:27:27 2007] [notice] Apache/2.0.49 (Unix) mod_ssl/2.0.49
OpenSSL/0.9.7d mod_jk2/2.0.5-dev configured -- resuming normal operations
[Sat Aug 18 11:28:29 2007] [error] shm.createSlot() create 0 returned NULL
[Sat Aug 18 11:28:29 2007] [error] workerEnv.init() create slot epStat.14236 failed
[Sat Aug 18 11:29:28 2007] [error] shm.createSlot() create 0 returned NULL
[Sat Aug 18 11:29:28 2007] [error] workerEnv.init() create slot epStat.1 failed
[Sat Aug 18 11:31:29 2007] [error] shm.createSlot() create 0 returned NULL
[Sat Aug 18 11:31:29 2007] [error] workerEnv.init() create slot epStat.14334 failed
[Sat Aug 18 11:33:28 2007] [error] shm.createSlot() create 0 returned NULL
[Sat Aug 18 11:33:28 2007] [error] workerEnv.init() create slot epStat.13934 failed
[Sat Aug 18 11:44:31 2007] [error] shm.createSlot() create 0 returned NULL
[Sat Aug 18 11:44:31 2007] [error] workerEnv.init() create slot epStat.16304 failed
[Sat Aug 18 11:49:31 2007] [error] shm.createSlot() create 0 returned NULL
[Sat Aug 18 11:49:31 2007] [error] workerEnv.init() create slot epStat.16558 failed
[Sat Aug 18 11:51:32 2007] [error] shm.createSlot() create 0 returned NULL
[Sat Aug 18 11:51:32 2007] [error] workerEnv.init() create slot epStat.16560 failed
[Sat Aug 18 11:52:32 2007] [error] shm.createSlot() create 0 returned NULL
[Sat Aug 18 11:52:32 2007] [error] workerEnv.init() create slot epStat.16565 failed
[Sat Aug 18 12:11:36 2007] [error] shm.createSlot() create 0 returned NULL


In spite of the above error messages Apache runs fine for few hours and then it
gives following messages in the error.log

[Sun Aug 19 23:56:30 2007] [notice] child pid 16491 exit signal Segmentation
fault (11)
[Sun Aug 19 23:56:59 2007] [notice] child pid 16879 exit signal Segmentation
fault (11)
[Sun Aug 19 23:57:29 2007] [notice] child pid 16770 exit signal Segmentation
fault (11)
[Sun Aug 19 23:58:00 2007] [notice] child pid 16910 exit signal Segmentation
fault (11)
[Sun Aug 19 23:58:30 2007] [notice] child pid 16942 exit signal Segmentation
fault (11)
[Sun Aug 19 23:59:31 2007] [notice] child pid 16993 exit signal Segmentation
fault (11)

Apache server process still runs but now it refuses to serve any page it just
displays blank page. Starting apache fixes this problem for another few hours. 

We found the workaround of this problem.
 
1) By moving logs directory to logs.old and creating the logs directory. Usually
this fixes the problem. 

Think same Shared memory Key is assigned to more than one apache instance
running on the server.  Believe ftok is used to generate Shared memory Key and
its having collision as i have lots of apaches running on one machine. To prove
this theory further we  hacked ftok function to return a key from a file.


 Desc:    This is an LD_PRELOAD hack that overrides the ftok()
 *          library function. This ftok reads an ftokdb file
 *          (defined here or by the FTOKDB environment variable)
 *          to determine which shm key to return rather than
 *          using the file&apos;s inode information.

This hack seems to work fine so far. Ideally i want Apache to use more
randomness than ftok provides so one can run more apache instances on one machine.

Hope this makes sense. Let me know if you need any further information.

thanks in advance
Krishna</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>46071</bug_id>
          
          <creation_ts>2008-10-22 23:01:36 +0000</creation_ts>
          <short_desc>Allowing space in between comma and last option in the Order directive</short_desc>
          <delta_ts>2008-10-22 23:17:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gia Kien Tran">6174604</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>121803</commentid>
    <comment_count>0</comment_count>
      <attachid>22768</attachid>
    <who name="Gia Kien Tran">6174604</who>
    <bug_when>2008-10-22 23:01:36 +0000</bug_when>
    <thetext>Created attachment 22768
the Order directive inside httpd.conf file

The directive Order deny, allow with a space in between comma and allow will cause a syntax error to occur when attempting to start the httpd service. Normally people will type a space right after a comma so in this situation, IMO it will happens a lot of time when people forgot to eliminate that comma.

It would be good if using a space within the argument doesn’t cause any syntax error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>121805</commentid>
    <comment_count>1</comment_count>
      <attachid>22769</attachid>
    <who name="Gia Kien Tran">6174604</who>
    <bug_when>2008-10-22 23:17:30 +0000</bug_when>
    <thetext>Created attachment 22769
Syntax error when trying to start the httpd service</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>22768</attachid>
            <date>2008-10-22 23:01:36 +0000</date>
            <delta_ts>2008-10-22 23:01:36 +0000</delta_ts>
            <desc>the Order directive inside httpd.conf file</desc>
            <filename>enh1.jpg</filename>
            <type>image/jpeg</type>
            <size>20921</size>
            <attacher name="Gia Kien Tran">6174604</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>22769</attachid>
            <date>2008-10-22 23:17:30 +0000</date>
            <delta_ts>2008-10-22 23:17:30 +0000</delta_ts>
            <desc>Syntax error when trying to start the httpd service</desc>
            <filename>enh2.jpg</filename>
            <type>image/jpeg</type>
            <size>46830</size>
            <attacher name="Gia Kien Tran">6174604</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>46139</bug_id>
          
          <creation_ts>2008-11-02 22:33:34 +0000</creation_ts>
          <short_desc>Apache Restart option is not working</short_desc>
          <delta_ts>2009-08-06 20:00:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.10</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Paul Iu">pauliu</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>122126</commentid>
    <comment_count>0</comment_count>
    <who name="Paul Iu">pauliu</who>
    <bug_when>2008-11-02 22:33:34 +0000</bug_when>
    <thetext>Fresh Apache 2.2.10 installed on Windows XP machine with default config files, httpd.exe service can be started and working without problem, default page &quot;It works!&quot; can display. However, restarted Apache by selecting &quot;Restart&quot; from Windows Start Menu (-k restart) or click Restart in Apache Service Monitor, Apache Server no longer replying request to the client bowser. To make the Apache work again, &quot;Stop&quot; &amp; &quot;Start&quot; procedures is needed.

I tried on a Windows 2003 Server with Dual Xeon CPU also has same problem.

This error log is right after click Restart, seems ok but client bowser receive no respond from Apache and waiting forever.....

[Mon Nov 03 14:26:39 2008] [notice] Apache/2.2.10 (Win32) configured -- resuming normal operations
[Mon Nov 03 14:26:39 2008] [notice] Server built: Oct 10 2008 12:39:04
[Mon Nov 03 14:26:39 2008] [notice] Parent: Created child process 7108
httpd.exe: Could not reliably determine the server&apos;s fully qualified domain name, using 192.168.1.102 for ServerName
httpd.exe: Could not reliably determine the server&apos;s fully qualified domain name, using 192.168.1.102 for ServerName
[Mon Nov 03 14:26:39 2008] [notice] Child 7108: Child process is running
[Mon Nov 03 14:26:40 2008] [notice] Child 7108: Acquired the start mutex.
[Mon Nov 03 14:26:40 2008] [notice] Child 7108: Starting 64 worker threads.
[Mon Nov 03 14:26:40 2008] [notice] Child 7108: Starting thread to listen on port 80.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>126364</commentid>
    <comment_count>1</comment_count>
    <who name="Rainer Jung">rainer.jung</who>
    <bug_when>2009-04-19 11:35:37 +0000</bug_when>
    <thetext>I can reproduce the problem.

I tried with 2.2.8 and 2.2.11 (ASF build) and also with my own 2.2.11 build. ProcessExplorer shows, that directly after the start, the parent owns the listen, but the child owns the TCP connection for any new request. After restart, the parent owns request connections. The requests are not answered.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>126365</commentid>
    <comment_count>2</comment_count>
    <who name="Rainer Jung">rainer.jung</who>
    <bug_when>2009-04-19 12:00:06 +0000</bug_when>
    <thetext>I tried additionally with

- 2.2.3 nod SSL ASF build
- 2.0.63 SSL ASF build
- 2.0.53 no SSL ASF build

All of them show the above described problem.

Version 1.3.41 does restart correctly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>126368</commentid>
    <comment_count>3</comment_count>
    <who name="Rainer Jung">rainer.jung</who>
    <bug_when>2009-04-19 13:31:55 +0000</bug_when>
    <thetext>Things get more confusing now:

I have two systems running Windows XP Professional Version 2002 SP 3. The problem does occur on one of them, but not on the other one.

The systems are not identical, like one is German (the broken one), and one English. The broken one most likely has more up-to-date MS patches and uses DHCP, the working one is more static and runs as a VMware guest.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>126371</commentid>
    <comment_count>4</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2009-04-19 16:18:40 +0000</bug_when>
    <thetext>The information we need to reproduce this is the network stack of the problem
systems.  E.g. settings, Network Connections, particular connection -&gt; Properties

We are looking for any &apos;suspect&apos; components, particularly non-MS elements.

We are also looking for the use of EnableSendfile and DisableWin32AcceptEx.

Finally, it will be very interesting to look at the WinNT MPM in 2.3 trunk.
I&apos;ll likely post a backport of this for the 2.2.11 release to compare notes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>126533</commentid>
    <comment_count>5</comment_count>
    <who name="Rainer Jung">rainer.jung</who>
    <bug_when>2009-04-27 01:39:40 +0000</bug_when>
    <thetext>Win32DisableAcceptEx fixes the problem on my test system. Disabling Sendfile and MMap don&apos;t fix it.

I also played a bit with various interfaces and disabling drivers. I used a normal LAN interface and disabled all drivers except for TCP/IP and also disabled the Windows firewall. Even when configuring httpd Listen fixed on the system address, the problem was reproducible. Then I disabled all interfaces and used Listen to listen on localhost only. Still I got the problem. Disabling AcceptEx fixed it in all those cases.

When disabling all interfaces and using localhost, the windows routing table says they are usoing the &quot;MS TCP loopback interface&quot;. I didn&apos;t find a good way to retrieve configuration or network stack details for this interface.

There is a lot of additional network related software installed on the system like VPN software, a VMware player, wireshark etc. So it could well be, that parts of that influences the accept behaviour, even when I try to disable as much of it as I&apos;m able to.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>126537</commentid>
    <comment_count>6</comment_count>
    <who name="Rainer Jung">rainer.jung</who>
    <bug_when>2009-04-27 04:12:41 +0000</bug_when>
    <thetext>Actually AcceptEx() returns with 997 (IO_PENDING) after the initial start as well as after restart. Then the WaitForSingleObject() loop after AcceptEx() loops with the 1 second timeout until the new connection is accepted and then passed along to the thread doing the get_connection after start. After restart the WaitForSingleObject() loop does only return with the timeout all the time although from the point of view of the client and also of netstat, the connection is accepted.

As noted before, netstat and ProcessExplorer indicate, that the accepted connection is related to the parent process, not to the child.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>129553</commentid>
    <comment_count>7</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2009-08-06 20:00:37 +0000</bug_when>
    <thetext>It would be good to compare this broken tcp/ip stack with the behavior of httpd
trunk, which is significantly refactored already.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>46499</bug_id>
          
          <creation_ts>2009-01-09 00:29:05 +0000</creation_ts>
          <short_desc>httpd accept() return EAGAIN error</short_desc>
          <delta_ts>2009-01-09 00:29:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.0.52</version>
          <rep_platform>HP</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="mhasegaw">masaya.hasegawa</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>123890</commentid>
    <comment_count>0</comment_count>
      <attachid>23097</attachid>
    <who name="mhasegaw">masaya.hasegawa</who>
    <bug_when>2009-01-09 00:29:05 +0000</bug_when>
    <thetext>Created attachment 23097
strace result,error_log,httpd.conf

RHEL 4.4 (kernel 2.6.9-42.ELsmp) 
httpd-2.0.52-38
weblogic plugin (mod_wl_20.so)

Symptom:
Suddenly httpd which load weblogic plugin(mod_wl_20.so) accept() return
with EAGAIN error. After retry 4000 times, httpd exit().

// strace of httpd
20978 15:39:30.589794 accept(3,  &lt;unfinished ...&gt;
20980 15:39:30.589833 &lt;... geteuid32 resumed&gt; ) = 0
20982 15:39:30.589869 close(8 &lt;unfinished ...&gt;
20981 15:39:30.589904 munmap(0xb7fb0000, 4096 &lt;unfinished ...&gt;
20977 15:39:30.589953 write(6, &quot;[Fri Nov 28 15:39:30 2008] [info&quot;..., 84 &lt;unfinished ...&gt;
20979 15:39:30.590017 &lt;... write resumed&gt; ) = 104
20983 15:39:30.590052 &lt;... read resumed&gt; &quot;root:x:0:root\nbin:x:1:root,bin,d&quot;..., 4096) = 681
20976 15:39:30.590110 write(6, &quot;[Fri Nov 28 15:39:30 2008] [info&quot;..., 84 &lt;unfinished ...&gt;
20978 15:39:30.590166 &lt;... accept resumed&gt; 0x87cb26c, [28]) = -1 EAGAIN (Resource temporarily unavailable)
          ...
20978 15:39:33.385567 exit_group(0)     = ?
3454  15:39:33.603534 waitpid(-1, [{WIFEXITED(s) &amp;&amp; WEXITSTATUS(s) == 0}], WNOHANG|WSTOPPE
D) = 20978 &lt;---


// error_log 
[Fri Nov 28 15:39:30 2008] [debug] util_ldap.c(1441): INIT global mutex /tmp/fileKYBJuX in child 20978　&lt;---
[Fri Nov 28 15:39:30 2008] [debug] util_ldap.c(1441): INIT global mutex /tmp/fileKYBJuX in child 20977
[Fri Nov 28 15:39:30 2008] [debug] util_ldap.c(1441): INIT global mutex /tmp/fileKYBJuX in child 20976
[Fri Nov 28 15:39:30 2008] [info] mod_weblogic: init_child: isThreaded = -1  &lt;---
[Fri Nov 28 15:39:30 2008] [info] mod_weblogic: init_child: isThreaded = -1
[Fri Nov 28 15:39:30 2008] [info] mod_weblogic: init_child: isThreaded = -1
[Fri Nov 28 15:39:30 2008] [info] mod_weblogic: Testing Debug=(null) LogFile=(null) TempDir=(null) &lt;---
[Fri Nov 28 15:39:30 2008] [info] mod_weblogic: Testing Debug=(null) LogFile=(null) TempDir=(null)
[Fri Nov 28 15:39:30 2008] [info] mod_weblogic: Testing Debug=(null) LogFile=(null) TempDir=(null)

We asked weblogic support person about this issue. However he said that
weblogic plugin does not call accept, so this is an apache problem.

I have some questions about this issue.

Q1:  Is this issue a known problem ?
    (Though I searched this on bugzilla, I could not find)

Q2: What does we need to do in order to investigate root casue ( apache
    or weblogic plugin ) ?

Thanks in advance,

Masaya</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>23097</attachid>
            <date>2009-01-09 00:29:05 +0000</date>
            <delta_ts>2009-01-09 00:29:05 +0000</delta_ts>
            <desc>strace result,error_log,httpd.conf</desc>
            <filename>data.tar.bz2</filename>
            <type>application/octet-stream</type>
            <size>435975</size>
            <attacher name="mhasegaw">masaya.hasegawa</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>47152</bug_id>
          
          <creation_ts>2009-05-04 20:23:46 +0000</creation_ts>
          <short_desc>Apache is only serving the first character in the requested file.</short_desc>
          <delta_ts>2013-05-21 19:55:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.11</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Devin Samarin">eboyjr14</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>eboyjr14</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>126770</commentid>
    <comment_count>0</comment_count>
    <who name="Devin Samarin">eboyjr14</who>
    <bug_when>2009-05-04 20:23:46 +0000</bug_when>
    <thetext>In short: Apache is only serving the first character in the requested file (that is not a PHP file)

This has got to be one of the strangest bugs I&apos;ve ever seen.

Here is an example of the problem.
DirectoryIndex index.txt index.html

---

root[ /sources/httpd-2.2.11 ] # telnet localhost 8080
Trying 127.0.0.1...
Connected to localhost.
Escape character is &apos;^]&apos;.
GET / HTTP/1.1
Host: eboyjr.ath.cx:8080

HTTP/1.1 200 OK
Date: Sun, 03 May 2009 20:07:19 GMT
Server: Apache/2.2.11 (Unix) DAV/2
Last-Modified: Sun, 03 May 2009 19:57:27 GMT
ETag: &quot;9db14-1-46907747ed7c0&quot;
Content-Length: 1
Content-Type: text/plain

HConnection closed by foreign host.
root[ /sources/httpd-2.2.11 ] # cat /srv/www/htdocs/index.txt
Hello world.

---

Instead of displaying &apos;Hello world.&apos; it says &apos;H&apos;
For HTML docs it usually says &apos;&lt;&apos; because of the DOCTYPE

---

Apache was compiled from scratch using the exact same procedure as stated in the BLFS (Beyond Linux From Scratch) developmental version (6.4). However, it seems that it is only affecting my own computer.

Here are the steps:

1) Download: http://archive.apache.org/dist/httpd/httpd-2.2.11.tar.bz2
3) Patch (just for the layout):  http://www.linuxfromscratch.org/patches/blfs/svn/httpd-2.2.11-config-1.patch

Submitted By:            BLFS Book &lt;blfs-book@linuxfromscratch.org&gt;
Date:                    2005-12-14
Initial Package Version: 2.2.0 (patch rediffed from a 2.0.54 version)
Upstream Status:         Not submitted (LFS specific)
Origin:                  BLFS Book
Description:             Modify the FHS layout for installing Apache


diff -Naur httpd-2.2.0-orig/config.layout httpd-2.2.0/config.layout
--- httpd-2.2.0-orig/config.layout	2004-11-21 18:50:36.000000000 +0000
+++ httpd-2.2.0/config.layout	2005-12-14 21:07:24.000000000 +0000
@@ -322,3 +322,28 @@
     installbuilddir: ${prefix}/etc/apache2/build
     errordir:      ${datadir}/error
 &lt;/Layout&gt;
+
+# BLFS FHS layout
+&lt;Layout FHS&gt;
+    prefix:             /usr
+    exec_prefix:        ${prefix}
+    bindir:             ${exec_prefix}/bin
+    sbindir:            ${exec_prefix}/sbin
+    libdir:             ${exec_prefix}/lib
+    libexecdir:         ${exec_prefix}/lib/apache
+    mandir:             ${prefix}/share/man
+    sysconfdir:         /etc/apache
+    datadir:            /srv/www
+    installbuilddir:    ${libexecdir}/build
+    errordir:           ${datadir}/error
+    iconsdir:           ${datadir}/icons
+    htdocsdir:          ${datadir}/htdocs
+    manualdir:          ${datadir}/manual
+    cgidir:             ${datadir}/cgi-bin
+    includedir:         ${prefix}/include/apache
+    localstatedir:      ${datadir}
+    runtimedir:         /var/run
+    logfiledir:         /var/log/apache
+    proxycachedir:      /var/cache/apache/proxy
+&lt;/Layout&gt;
+

diff -Naur httpd-2.2.0-orig/srclib/apr/config.layout httpd-2.2.0/srclib/apr/config.layout
--- httpd-2.2.0-orig/srclib/apr/config.layout	2004-11-24 22:51:51.000000000 +0000
+++ httpd-2.2.0/srclib/apr/config.layout	2005-12-14 21:06:37.000000000 +0000
@@ -11,18 +11,18 @@
 
 #   Classical APR path layout designed for parallel installs.
 &lt;Layout apr&gt;
-    prefix:        /usr/local/apr
+    prefix:        /usr
     exec_prefix:   ${prefix}
     bindir:        ${exec_prefix}/bin
-    sbindir:       ${exec_prefix}/bin
+    sbindir:       ${exec_prefix}/sbin
     libdir:        ${exec_prefix}/lib
-    libexecdir:    ${exec_prefix}/modules
-    mandir:        ${prefix}/man
-    sysconfdir:    ${prefix}/conf
-    datadir:       ${prefix}
-    installbuilddir: ${datadir}/build-${APR_MAJOR_VERSION}
-    includedir:    ${prefix}/include/apr-${APR_MAJOR_VERSION}
-    localstatedir: ${prefix}
+    libexecdir:    ${exec_prefix}/lib/apache
+    mandir:        ${prefix}/share/man
+    sysconfdir:    /etc/apache
+    datadir:       /srv/www
+    installbuilddir: ${libexecdir}/build
+    includedir:    ${prefix}/include/apache
+    localstatedir: ${datadir}
     libsuffix:     -${APR_MAJOR_VERSION}
 &lt;/Layout&gt;
 

diff -Naur httpd-2.2.0-orig/srclib/apr-util/config.layout httpd-2.2.0/srclib/apr-util/config.layout
--- httpd-2.2.0-orig/srclib/apr-util/config.layout	2005-02-09 12:18:43.000000000 +0000
+++ httpd-2.2.0/srclib/apr-util/config.layout	2005-12-14 21:06:37.000000000 +0000
@@ -11,18 +11,18 @@
 
 #   Classical APR-util path layout designed for parallel installs.
 &lt;Layout apr-util&gt;
-    prefix:        /usr/local/apr
+    prefix:        /usr
     exec_prefix:   ${prefix}
     bindir:        ${exec_prefix}/bin
-    sbindir:       ${exec_prefix}/bin
+    sbindir:       ${exec_prefix}/sbin
     libdir:        ${exec_prefix}/lib
-    libexecdir:    ${exec_prefix}/modules
-    mandir:        ${prefix}/man
-    sysconfdir:    ${prefix}/conf
-    datadir:       ${prefix}
-    installbuilddir: ${datadir}/build
-    includedir:    ${prefix}/include/apr-${APRUTIL_MAJOR_VERSION}
-    localstatedir: ${prefix}
+    libexecdir:    ${exec_prefix}/lib/apache
+    mandir:        ${prefix}/share/man
+    sysconfdir:    /etc/apache
+    datadir:       /srv/www
+    installbuilddir: ${libexecdir}/build
+    includedir:    ${prefix}/include/apache
+    localstatedir: ${datadir}
     libsuffix:     -${APRUTIL_MAJOR_VERSION}
 &lt;/Layout&gt;
 
4) Commands
groupadd -g 25 apache &amp;&amp;
useradd -c &quot;Apache Server&quot; -d /dev/null -g apache \
        -s /bin/false -u 25 apache

patch -Np1 -i ../httpd-2.2.11-config-1.patch

./configure --enable-layout=FHS --enable-mods-shared=all &amp;&amp;
make

make install &amp;&amp;
chown -v root:root /usr/lib/apache/httpd.exp \
    /usr/sbin/{apxs,apachectl,dbmmanage,envvars{,-std}} \
    /usr/share/man/man1/{dbmmanage,ht{dbm,digest,passwd}}.1 \
    /usr/share/man/man8/{ab,apachectl,apxs,htcacheclean,httpd}.8 \
    /usr/share/man/man8/{logresolve,rotatelogs,suexec}.8 &amp;&amp;
chown -v -R apache:apache /srv/www

sed -i -e &quot;s/User daemon/User apache/&quot; \
       -e &quot;s/Group daemon/Group apache/&quot; \
    /etc/apache/httpd.conf


-----

Okay configuration... (the problem still exists with the default)

Compiler: GCC-4.3.2
http://www.linuxfromscratch.org/lfs/view/6.4/chapter06/gcc.html

There were no CFLAGS or anything... :P


---

When the requested page is parsed by PHP, it works fine. e.g. phpinfo() or anything else



---
I&apos;ve included anything I could think of that distinguishes it from anything else, but I know it&apos;s probably not helpful enough.

I can give you any more details if you ask...
Please help.. I&apos;ve been at this for a week!

I have also compiled with 2.2.8 from BLFS 6.3
If I am making a complete fool of myself please tell me :), but this bug is very very very very unusual!

http://www.linuxfromscratch.org/blfs/view/6.3/server/apache.html


I even tried commenting out some the modules, but with no success</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>126779</commentid>
    <comment_count>1</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2009-05-05 05:50:05 +0000</bug_when>
    <thetext>Any difference after disabling sendfile and MMAP?

http://httpd.apache.org/docs/2.2/mod/core.html#enablemmap
http://httpd.apache.org/docs/2.2/mod/core.html#enablesendfile</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>126787</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2009-05-05 07:27:13 +0000</bug_when>
    <thetext>Eric, the &quot;Content-Length: 1&quot; is from stat() unless there&apos;s a very odd filter enabled, right?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>126804</commentid>
    <comment_count>3</comment_count>
    <who name="Devin Samarin">eboyjr14</who>
    <bug_when>2009-05-05 16:05:09 +0000</bug_when>
    <thetext>Whoops... in the response header in the example..

I left out &apos;Accept-Ranges: bytes&apos;. Maybe it is a problem with the range requests?

I added 

EnableMMAP Off
EnableSendfile Off

and no success
I commented out each one separately and also no success</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>127807</commentid>
    <comment_count>4</comment_count>
    <who name="Dan Poirier">poirier</who>
    <bug_when>2009-06-10 11:17:09 +0000</bug_when>
    <thetext>Agreed that this is weird.  On the off chance that it&apos;s a compiler or runtime library bug, you might try with the latest gcc or glibc.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128534</commentid>
    <comment_count>5</comment_count>
    <who name="Devin Samarin">eboyjr14</who>
    <bug_when>2009-07-05 18:25:35 +0000</bug_when>
    <thetext>Wow ugh this sucks :P
I installed the latest GCC (4.4.0) and Glibc (2.10.1) and still the same problem...
I wonder what I could mention to make it easier to find the problem...
******************
root[ /srv/www/htdocs ] # gcc -v
Using built-in specs.
Target: i686-pc-linux-gnu
Configured with: ../gcc-4.4.0/configure --prefix=/usr --libexecdir=/usr/lib --enable-shared --enable-threads=posix --enable-__cxa_atexit --enable-clocale=gnu --enable-languages=c,c++ --disable-multilib --disable-bootstrap
Thread model: posix
gcc version 4.4.0 (GCC)
root[ /srv/www/htdocs ] # locale -V
locale (GNU libc) 2.10.1
Copyright (C) 2009 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
Written by Ulrich Drepper.
root[ /srv/www/htdocs ] #
******************
I compiled as root.
I&apos;ll post the output of &apos;env&apos; (which is when I compiled glibc and apache)
******************
  GNU nano 2.0.7              File: /root/ugh
HZ=100
SHELL=/bin/bash
TERM=linux
HUSHLOGIN=TRUE
USER=root
LS_COLORS=rs=0:di=01;34:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;3$MAIL=/var/mail/root
PATH=/sbin:/bin:/usr/sbin:/usr/bin
PWD=/srv/www/htdocs
PS1=$(if [ $? == 0 ]; then echo -e &quot;\[\e[1;36m\]&quot;; elif [ $? == 1 ]; then echo $SHLVL=1
HOME=/root
LOGNAME=root
_=/usr/bin/env
OLDPWD=/srv/www






              [ line 1/16 (6%), col 1/7 (14%), char 0/1469 (0%) ]
^G Get Help  ^O WriteOut  ^R Read File ^Y Prev Page ^K Cut Text  ^C Cur Pos
^X Exit      ^J Justify   ^W Where Is  ^V Next Page ^U UnCut Text^T To Spell
********************
Oh duh, I could post the output of the compilation :)
********************
# ./configure --enable-layout=FHS --enable-mods-shared-all
checking for chosen layout... FHS
checking for working mkdir -p... yes
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking target system type... i686-pc-linux-gnu

Configuring Apache Portable Runtime library ...

checking for APR... yes
  setting CC to &quot;gcc&quot;
  setting CPP to &quot;gcc -E&quot;
  setting CFLAGS to &quot;  -pthread&quot;
  setting CPPFLAGS to &quot; -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE&quot;
  setting LDFLAGS to &quot; &quot;

Configuring Apache Portable Runtime Utility library...

checking for APR-util... yes
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
configure: Configuring PCRE regular expression library
configuring package in srclib/pcre now
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking for an ANSI C-conforming const... yes
checking for size_t... yes
checking for bcopy... yes
checking for memmove... yes
checking for strerror... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating pcre.h
config.status: creating pcre-config
config.status: creating config.h
config.status: executing default commands
srclib/pcre configured properly
  setting AP_LIBS to &quot;/sources/httpd-2.2.11/srclib/pcre/libpcre.la&quot;
  setting INCLUDES to &quot;-I$(top_builddir)/srclib/pcre&quot;

Configuring Apache httpd ...

  adding &quot;-I.&quot; to INCLUDES
  adding &quot;-I$(top_srcdir)/os/$(OS_DIR)&quot; to INCLUDES
  adding &quot;-I$(top_srcdir)/server/mpm/$(MPM_SUBDIR_NAME)&quot; to INCLUDES
  adding &quot;-I$(top_srcdir)/modules/http&quot; to INCLUDES
  adding &quot;-I$(top_srcdir)/modules/filters&quot; to INCLUDES
  adding &quot;-I$(top_srcdir)/modules/proxy&quot; to INCLUDES
  adding &quot;-I$(top_srcdir)/include&quot; to INCLUDES
  adding &quot;-I$(top_srcdir)/modules/generators&quot; to INCLUDES
  adding &quot;-I$(top_srcdir)/modules/mappers&quot; to INCLUDES
  adding &quot;-I$(top_srcdir)/modules/database&quot; to INCLUDES
  adding &quot;-I/usr/include/apache&quot; to INCLUDES

Applying OS-specific hints for httpd ...

  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to &quot;1&quot;
  forcing AP_NONBLOCK_WHEN_MULTI_LISTEN to &quot;1&quot;
checking for rm... /bin/rm
checking for pkg-config... /usr/bin/pkg-config
checking for rsync... no
checking for gawk... gawk
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for lynx... no
checking for links... links
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking for library containing strerror... none required
checking for APR version 1.2.0 or later... yes
checking for APR-util version 1.2.0 or later... yes
checking for ANSI C header files... (cached) yes
checking for string.h... (cached) yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking for unistd.h... (cached) yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking pwd.h usability... yes
checking pwd.h presence... yes
checking for pwd.h... yes
checking grp.h usability... yes
checking grp.h presence... yes
checking for grp.h... yes
checking for strings.h... (cached) yes
checking sys/prctl.h usability... yes
checking sys/prctl.h presence... yes
checking for sys/prctl.h... yes
checking sys/processor.h usability... no
checking sys/processor.h presence... no
checking for sys/processor.h... no
checking sys/sem.h usability... yes
checking sys/sem.h presence... yes
checking for sys/sem.h... yes
checking for sys/wait.h that is POSIX.1 compatible... yes
checking for an ANSI C-conforming const... yes
checking for library containing sqrt... -lm
checking for getpwnam... yes
checking for getgrnam... yes
checking for initgroups... yes
checking for bindprocessor... no
checking for prctl... yes
checking for timegm... yes
checking for getpgid... yes
checking for void pointer length... no
checking for tm_gmtoff in struct tm... yes
checking whether to enable mod_authn_file... shared (all)
checking whether to enable mod_authn_dbm... shared (all)
checking whether to enable mod_authn_anon... shared (all)
checking whether to enable mod_authn_dbd... shared (all)
checking whether to enable mod_authn_default... shared (all)
checking whether to enable mod_authn_alias... no
checking whether to enable mod_authz_host... shared (all)
checking whether to enable mod_authz_groupfile... shared (all)
checking whether to enable mod_authz_user... shared (all)
checking whether to enable mod_authz_dbm... shared (all)
checking whether to enable mod_authz_owner... shared (all)
checking whether to enable mod_authnz_ldap... no
checking whether to enable mod_authz_default... shared (all)
checking whether to enable mod_auth_basic... shared (all)
checking whether to enable mod_auth_digest... checking dependencies
checking whether to enable mod_auth_digest... shared (all)
checking whether to enable mod_isapi... no
checking whether to enable mod_file_cache... no
checking whether to enable mod_cache... no
checking whether to enable mod_disk_cache... no
checking whether to enable mod_mem_cache... no
checking whether to enable mod_dbd... shared (all)
checking whether to enable mod_bucketeer... no
checking whether to enable mod_dumpio... shared (all)
checking whether to enable mod_echo... no
checking whether to enable mod_example... no
checking whether to enable mod_case_filter... no
checking whether to enable mod_case_filter_in... no
checking whether to enable mod_ext_filter... shared (all)
checking whether to enable mod_include... shared (all)
checking whether to enable mod_filter... shared (all)
checking whether to enable mod_substitute... shared (all)
checking whether to enable mod_charset_lite... no
checking whether to enable mod_deflate... checking dependencies
checking for zlib location... /usr
  adding &quot;-lz&quot; to LIBS
checking for zlib library... found
  forcing MOD_DEFLATE_LDADD to &quot;-lz&quot;
  removed &quot;-lz&quot; from LIBS
checking whether to enable mod_deflate... shared (all)
checking whether to enable mod_ldap... no
checking whether to enable mod_log_config... shared (all)
checking whether to enable mod_log_forensic... shared (all)
  adding &quot;-I$(top_builddir)/server&quot; to INCLUDES
checking whether to enable mod_logio... shared (all)
checking whether to enable mod_env... shared (all)
checking whether to enable mod_mime_magic... shared (all)
checking whether to enable mod_cern_meta... shared (all)
checking whether to enable mod_expires... shared (all)
checking whether to enable mod_headers... shared (all)
checking whether to enable mod_ident... shared (all)
checking whether to enable mod_usertrack... checking dependencies
checking sys/times.h usability... yes
checking sys/times.h presence... yes
checking for sys/times.h... yes
checking for times... yes
checking whether to enable mod_usertrack... shared (all)
checking whether to enable mod_unique_id... shared (all)
checking whether to enable mod_setenvif... shared (all)
checking whether to enable mod_version... shared (all)
checking whether to enable mod_proxy... no
checking whether to enable mod_proxy_connect... no
checking whether to enable mod_proxy_ftp... no
checking whether to enable mod_proxy_http... no
checking whether to enable mod_proxy_ajp... no
checking whether to enable mod_proxy_balancer... no
  adding &quot;-I$(top_srcdir)/modules/proxy/../generators&quot; to INCLUDES
checking whether to enable mod_ssl... no
  adding &quot;-I$(top_srcdir)/modules/ssl&quot; to INCLUDES
checking whether to enable mod_optional_hook_export... no
checking whether to enable mod_optional_hook_import... no
checking whether to enable mod_optional_fn_import... no
checking whether to enable mod_optional_fn_export... no
checking for target platform... unix
checking for rlim_t... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking sys/resource.h usability... yes
checking sys/resource.h presence... yes
checking for sys/resource.h... yes
checking for sys/sem.h... (cached) yes
checking sys/ipc.h usability... yes
checking sys/ipc.h presence... yes
checking for sys/ipc.h... yes
checking for setsid... yes
checking for killpg... yes
checking bstring.h usability... no
checking bstring.h presence... no
checking for bstring.h... no
checking for unistd.h... (cached) yes
checking for syslog... yes
checking for sys/times.h... (cached) yes
checking for times... (cached) yes
checking which MPM to use... prefork
checking whether to enable mod_http... yes
checking whether to enable mod_mime... shared (all)
checking for extra modules... none
checking whether to enable mod_dav... shared (all)
  adding &quot;-I$(top_srcdir)/modules/dav/main&quot; to INCLUDES
checking whether to enable mod_status... shared (all)
checking whether to enable mod_autoindex... shared (all)
checking whether to enable mod_asis... shared (all)
checking whether to enable mod_info... shared (all)
checking whether to enable mod_suexec... no
checking whether to enable mod_cgi... shared (all)
checking whether to enable mod_cgid... no
checking whether to enable mod_dav_fs... shared (all)
checking whether to enable mod_dav_lock... no
checking whether to enable mod_vhost_alias... shared (all)
checking whether to enable mod_negotiation... shared (all)
checking whether to enable mod_dir... shared (all)
checking whether to enable mod_imagemap... shared (all)
checking whether to enable mod_actions... shared (all)
checking whether to enable mod_speling... shared (all)
checking whether to enable mod_userdir... shared (all)
checking whether to enable mod_alias... shared (all)
checking whether to enable mod_rewrite... shared (all)
  setting HTTPD_LDFLAGS to &quot;-export-dynamic&quot;
checking whether to enable mod_so... yes

Restore user-defined environment settings...

  restoring CPPFLAGS to &quot;&quot;
  setting EXTRA_CPPFLAGS to &quot; -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE&quot;
  restoring CFLAGS to &quot;&quot;
  setting EXTRA_CFLAGS to &quot;  -pthread&quot;
  restoring CXXFLAGS to &quot;&quot;
  setting EXTRA_CXXFLAGS to &quot;&quot;
  restoring LDFLAGS to &quot;&quot;
  setting EXTRA_LDFLAGS to &quot; &quot;
  restoring LIBS to &quot;&quot;
  setting EXTRA_LIBS to &quot; -lm&quot;
  restoring INCLUDES to &quot;&quot;
  setting EXTRA_INCLUDES to &quot;-I$(top_builddir)/srclib/pcre -I. -I$(top_srcdir)/os/$(OS_DIR) -I$(top_srcdir)/server/mpm/$(MPM_SUBDIR_NAME) -I$(top_srcdir)/modules/http -I$(top_srcdir)/modules/filters -I$(top_srcdir)/modules/proxy -I$(top_srcdir)/include -I$(top_srcdir)/modules/generators -I$(top_srcdir)/modules/mappers -I$(top_srcdir)/modules/database -I/usr/include/apache -I$(top_builddir)/server -I$(top_srcdir)/modules/proxy/../generators -I$(top_srcdir)/modules/ssl -I$(top_srcdir)/modules/dav/main&quot;

Construct makefiles and header files...

creating config_vars.mk
configure: creating ./config.status
creating modules/aaa/Makefile
creating modules/arch/win32/Makefile
creating modules/cache/Makefile
creating modules/database/Makefile
creating modules/debug/Makefile
creating modules/echo/Makefile
creating modules/experimental/Makefile
creating modules/filters/Makefile
creating modules/ldap/Makefile
creating modules/loggers/Makefile
creating modules/metadata/Makefile
creating modules/proxy/Makefile
creating modules/ssl/Makefile
creating modules/test/Makefile
creating os/unix/Makefile
creating server/mpm/Makefile
creating server/mpm/prefork/Makefile
creating modules/http/Makefile
creating modules/dav/main/Makefile
creating modules/generators/Makefile
creating modules/dav/fs/Makefile
creating modules/dav/lock/Makefile
creating modules/mappers/Makefile
creating Makefile
creating modules/Makefile
creating srclib/Makefile
creating os/Makefile
creating server/Makefile
creating support/Makefile
creating srclib/pcre/Makefile
creating test/Makefile
config.status: creating docs/conf/httpd.conf
config.status: creating docs/conf/extra/httpd-autoindex.conf
config.status: creating docs/conf/extra/httpd-dav.conf
config.status: creating docs/conf/extra/httpd-default.conf
config.status: creating docs/conf/extra/httpd-info.conf
config.status: creating docs/conf/extra/httpd-languages.conf
config.status: creating docs/conf/extra/httpd-manual.conf
config.status: creating docs/conf/extra/httpd-mpm.conf
config.status: creating docs/conf/extra/httpd-multilang-errordoc.conf
config.status: creating docs/conf/extra/httpd-ssl.conf
config.status: creating docs/conf/extra/httpd-userdir.conf
config.status: creating docs/conf/extra/httpd-vhosts.conf
config.status: creating include/ap_config_layout.h
config.status: creating support/apxs
config.status: creating support/apachectl
config.status: creating support/dbmmanage
config.status: creating support/envvars-std
config.status: creating support/log_server_status
config.status: creating support/logresolve.pl
config.status: creating support/phf_abuse_log.cgi
config.status: creating support/split-logfile
config.status: creating build/rules.mk
config.status: creating build/pkg/pkginfo
config.status: creating build/config_vars.sh
config.status: creating include/ap_config_auto.h
config.status: executing default commands
*********************
# make
Here are some pastebins because I can&apos;t post large comments
http://pastebin.ca/1485188
http://pastebin.com/f5b405643
************************
Yeah that is a lot
But this is very frustrating for me
:/

Thank you so much for all your help so far! :D</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128543</commentid>
    <comment_count>6</comment_count>
    <who name="Nick Kew">nick</who>
    <bug_when>2009-07-06 01:31:45 +0000</bug_when>
    <thetext>Smells of a filesystem bug.  What does stat tell you about your index.txt?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128570</commentid>
    <comment_count>7</comment_count>
    <who name="Devin Samarin">eboyjr14</who>
    <bug_when>2009-07-06 17:23:22 +0000</bug_when>
    <thetext>I&apos;ve never used stat before but I wonder if this is what you need?

root[ ~ ] # stat /srv/www/htdocs/index.txt
  File: `/srv/www/htdocs/index.txt&apos;
  Size: 13              Blocks: 8          IO Block: 4096   regular file
Device: 803h/2051d      Inode: 645908      Links: 1
Access: (0644/-rw-r--r--)  Uid: (   25/  apache)   Gid: (   25/  apache)
Access: 2009-07-05 17:06:23.000000000 -0700
Modify: 2009-05-03 11:51:12.000000000 -0700
Change: 2009-07-05 16:36:51.000000000 -0700

root[ ~ ] # stat /srv/www/htdocs/index.txt -f
  File: &quot;/srv/www/htdocs/index.txt&quot;
    ID: ddcd1326d5af12b6 Namelen: 255     Type: ext2/ext3
Block size: 4096       Fundamental block size: 4096
Blocks: Total: 4128763    Free: 2320113    Available: 2152315
Inodes: Total: 1054704    Free: 684458</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>157067</commentid>
    <comment_count>8</comment_count>
      <attachid>28530</attachid>
    <who name="Troy Stanger">stanger</who>
    <bug_when>2012-04-02 17:41:34 +0000</bug_when>
    <thetext>Created attachment 28530
Patch to fix segfaults and incorrect realm values in mod_auth_digest</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>157068</commentid>
    <comment_count>9</comment_count>
    <who name="Troy Stanger">stanger</who>
    <bug_when>2012-04-02 17:43:32 +0000</bug_when>
    <thetext>(In reply to comment #8)
&gt; Created attachment 28530 [details]
&gt; Patch to fix segfaults and incorrect realm values in mod_auth_digest

Please disregard this, the patch got associated with the wrong bug.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>28530</attachid>
            <date>2012-04-02 17:41:34 +0000</date>
            <delta_ts>2013-05-21 19:55:30 +0000</delta_ts>
            <desc>Patch to fix segfaults and incorrect realm values in mod_auth_digest</desc>
            <filename>mod_auth_digest.patch</filename>
            <type>text/plain</type>
            <size>2413</size>
            <attacher name="Troy Stanger">stanger</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>47340</bug_id>
          
          <creation_ts>2009-06-09 15:16:52 +0000</creation_ts>
          <short_desc>uldap_cache_comparedn() called without a lock</short_desc>
          <delta_ts>2009-06-10 06:01:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.11</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tammy">tammy000</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>tammy000</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>127773</commentid>
    <comment_count>0</comment_count>
    <who name="Tammy">tammy000</who>
    <bug_when>2009-06-09 15:16:52 +0000</bug_when>
    <thetext>Per the block comment before the body of function uldap_cache_comparedn(), a lock must be held already:

/* ...
   The lock for the ldap cache should already be acquired */
static int uldap_cache_comparedn() ...)

But when it is called from authz_ldap_check_user_access(), no lock is held before calling uldap_cache_comparedn(). It is a bug, or the comment is outdated?


Detected by an automatic tool iComment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>127789</commentid>
    <comment_count>1</comment_count>
    <who name="Dan Poirier">poirier</who>
    <bug_when>2009-06-10 06:01:48 +0000</bug_when>
    <thetext>There only seems to be one cache lock, and this function acquires and releases it internally several times, so it certainly seems unnecessary for the lock to already be held before calling it.

I was hoping to find a revision in which this internal locking was added without removing that comment, but it appears to have been this way since before the file was added to subversion (http://svn.apache.org/viewvc?view=rev&amp;revision=91504).

Still, I think the comment is wrong.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>47753</bug_id>
          
          <creation_ts>2009-08-27 12:32:14 +0000</creation_ts>
          <short_desc>output and error channels not explicitly passed for ap_os_create_privileged_process()</short_desc>
          <delta_ts>2009-08-27 12:32:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows Server 2003</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Boya Sun">boya.sun</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>130008</commentid>
    <comment_count>0</comment_count>
    <who name="Boya Sun">boya.sun</who>
    <bug_when>2009-08-27 12:32:14 +0000</bug_when>
    <thetext>It seems that in modules\generators\mod_cgi.c, function run_cgi_child(), &quot;apr_procattr_child_err_set()&quot; and &quot;apr_procattr_child_out_set()&quot; are missing to explicitly pass output and error channels before &quot;ap_os_create_privileged_process()&quot;.

This potential bug is similar to revision 602467. The log of this revision is as follows:

&quot; * core log.c: Work around possible solutions rejected by apr for the old implementation of apr_proc_create(), and explicitly pass the output and error channels to all log processes created. This goes all the way back to piped logs failing to run on win32. Not in or needed at trunk/, as apr 1.3.0 has the proper fix.&quot;

It seems that the above log also holds for &quot;ap_os_create_privileged_process()&quot;. An evidence is the following code in revision 806782 of branch 2.2.x where the two apr_procattr_child_*_set functions *ARE* called before the function:

*************************************************************
File: modules\generators\mod_cgid.c
Function: cgid_server

758              ((rc = apr_procattr_child_err_set(procattr, r-&gt;server-&gt;error_log, NULL)) != APR_SUCCESS) ||
...
760            ((rc = apr_procattr_child_out_set(procattr, inout, NULL)) != APR_SUCCESS) ||
...
790                rc = ap_os_create_privileged_process(r, procnew, argv0, argv,

*************************************************************

The patch I attached is not a bug-fix, but some comments indicating where the two missing functions should be added to better illustrate my point.

Any comment is greatly appreciated.

Boya</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>47908</bug_id>
          
          <creation_ts>2009-09-27 10:50:02 +0000</creation_ts>
          <short_desc>&apos;invalid result code&apos; in error_log</short_desc>
          <delta_ts>2009-09-27 10:50:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.13</version>
          <rep_platform>Other</rep_platform>
          <op_sys>FreeBSD</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>craig</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>130713</commentid>
    <comment_count>0</comment_count>
      <attachid>24319</attachid>
    <who name="">craig</who>
    <bug_when>2009-09-27 10:50:02 +0000</bug_when>
    <thetext>Created attachment 24319
collection of errors of this type

Upgraded from 2.2.11 to .13 recently.  A new class of error message began to
appear in the error_log, once every day or two:
Handler for type-map returned invalid result code 53
The associated entry in access_log was:
 &quot;GET /1n/warthog.jpg HTTP/1.1&quot; 500 - 

I posted this to the apache user mailing list, but there was no reply. 
Meanwhile I augmented the error message routine in the Apache source and
rebuilt.  Since then there was one such new error message:

Handler for type-map (file
/usr/local/apache2/error/HTTP_INTERNAL_SERVER_ERROR.html.var, type text/html;
charset=iso-8859-1) returned invalid result code 53

Once again the access_log entry was for one of the thumbnails that accompanies
our front page:
GET /1n/serval.jpg HTTP/1.1&quot; 500 - 

This looks like chickens and eggs.  Something in apache decided to post a 500,
and then there was a problem with serving the multilingual 500 page.

Looks like the type in the error message isn&apos;t of much use.  Should I change
the error message to display the handler and file from the &apos;prev&apos; request
record (if any)?  Any other suggestions for looking at this problem would be
appreciated.

The jpg&apos;s in the two examples are cached by:
CacheFile /usr/local/apache2/htdocs/1n/aardvark.jpg

One fixup handler of mine is active for such jpg&apos;s, but it for sure only
returns OK :-)    

There was also one message that was different:
Handler for modperl returned invalid result code 53
unable to include &quot;/navbar2?cont=32&quot; in parsed file
/usr/local/apache2/htdocs/springbuck.html
access_log:
&quot;GET /springbuck.html HTTP/1.1&quot; 200 11360

There were no such error messages on substantially the same site for many
months under 2.2.11.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>24319</attachid>
            <date>2009-09-27 10:50:02 +0000</date>
            <delta_ts>2009-09-27 10:50:02 +0000</delta_ts>
            <desc>collection of errors of this type</desc>
            <filename>errs53.log</filename>
            <type>application/octet-stream</type>
            <size>8348</size>
            <attacher>craig</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>47981</bug_id>
          
          <creation_ts>2009-10-12 04:36:34 +0000</creation_ts>
          <short_desc>allow language specific html-versions (index.html.en) to take precedence over general index.htmlallow</short_desc>
          <delta_ts>2016-07-28 09:34:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.13</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Elmar Stellnberger">estellnb</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>131080</commentid>
    <comment_count>0</comment_count>
    <who name="Elmar Stellnberger">estellnb</who>
    <bug_when>2009-10-12 04:36:34 +0000</bug_when>
    <thetext>Sometimes server side language detection fails which makes an index.html  necessaray that selects the language based on javascript. However this method is sub-optimal as it can take some time and will make the browser display flash up the selection page instead of directly displaying the target page.
  My request would be to let the AddLanguage-tags in .htaccess by default take precedence or if that should not be desired due to any kind of reason addding a command that gives the AddLanguage-tags precendence (f.i.: Options AddLanguage).
  i.e. as soon as an AddLanguage-tag shows up in .htaccess
AddLanguage en .en
AddLanguage de .de
  index.html.en &amp; index.html.de should be preferred over index.html.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>131081</commentid>
    <comment_count>1</comment_count>
    <who name="Elmar Stellnberger">estellnb</who>
    <bug_when>2009-10-12 04:45:39 +0000</bug_when>
    <thetext>example page: http://www.elstel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>192685</commentid>
    <comment_count>2</comment_count>
    <who name="André Malo">nd</who>
    <bug_when>2016-07-28 09:34:06 +0000</bug_when>
    <thetext>Hmm. It sounds like you&apos;re looking for http://httpd.apache.org/docs/2.4/mod/mod_negotiation.html#languagepriority and http://httpd.apache.org/docs/2.4/mod/mod_negotiation.html#forcelanguagepriority
?

You also might want to look at how the httpd manual itself works. The config is part of the distribution (in conf/extra).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>47982</bug_id>
          
          <creation_ts>2009-10-12 04:55:06 +0000</creation_ts>
          <short_desc>correctly interprete non-standard HTTP_ACCEPT_LANGUAGE</short_desc>
          <delta_ts>2009-10-12 04:55:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.13</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Elmar Stellnberger">estellnb</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>131082</commentid>
    <comment_count>0</comment_count>
    <who name="Elmar Stellnberger">estellnb</who>
    <bug_when>2009-10-12 04:55:06 +0000</bug_when>
    <thetext>KDE3-konqueror and KDE4-konqueror are widely used internet browsers. However their HTTP_ACCEPT_LANGUAGE tags do not conform to the standard:

KDE3: HTTP_ACCEPT_LANGUAGE=de, en
KDE4: HTTP_ACCEPT_LANGUAGE=de, en-US, en

 As the creator of an own web-page posting an error for konqueror will not have the desired effect (in a fact this error has been known for long, but the developers of konqueror did not change anything about it, though.) as I do also want users with elder browser versions to be able to view my site correctly.
 Would it be possible to make apache2 parse the HTTP_ACCEPT_LANGUAGE tags from above correctly (I think the tags are straight forward this way; only the standard is a bitly odd here.)?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>47988</bug_id>
          
          <creation_ts>2009-10-12 19:40:41 +0000</creation_ts>
          <short_desc>Segmentation fault</short_desc>
          <delta_ts>2009-10-15 22:21:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.14</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jie Gao">J.Gao</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>131092</commentid>
    <comment_count>0</comment_count>
    <who name="Jie Gao">J.Gao</who>
    <bug_when>2009-10-12 19:40:41 +0000</bug_when>
    <thetext>&gt; gcc -v
Using built-in specs.
Target: i386-redhat-linux
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-libgcj-multifile --enable-languages=c,c++,objc,obj-c++,java,fortran,ada --enable-java-awt=gtk --disable-dssi --enable-plugin --with-java-home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre --with-cpu=generic --host=i386-redhat-linux
Thread model: posix
gcc version 4.1.2 20080704 (Red Hat 4.1.2-44)

Configure:

CC=gcc CFLAGS=&quot;-Wall -g&quot; \
./configure --prefix=/usr/local/httpd-2.2.14                               \
            --with-mpm=worker                                              \
            --enable-auth-digest                                           \
            --enable-dav                                                   \
            --enable-expires                                               \
            --enable-headers                                               \
            --enable-info                                                  \
            --enable-maintainer-mode                                       \
            --enable-mime-magic                                            \
            --enable-nonportable-atomics                                   \
            --enable-proxy                                                 \
            --enable-proxy-http                                            \
            --enable-rewrite                                               \
            --enable-so                                                    \
            --enable-ssl                                                   \
            --enable-unique-id                                             \
            --enable-vhost-alias                                           \
            --enable-modules=most                                          \
            --enable-mods-shared=most

With: proxy_html/3.1.1:

/usr/local/apache/bin/apxs -c -i -I/usr/include/libxml2 mod_xml2enc.c
/usr/local/apache/bin/apxs -c -i -I/usr/include/libxml2 mod_proxy_html.c

In error_log:

[Tue Oct 13 13:24:42 2009] [notice] child pid 17266 exit signal Segmentation fault (11), possible coredump in /tmp

&gt; ls -al /tmp
total 19052
drwxrwxrwt  5 root   root        4096 Oct 13 13:24 .
drwxr-xr-x 25 root   root        4096 Jul 21 20:26 ..
-rw-r--r--  1 root   root         970 Oct 13 09:27 1
-rw-------  1 daemon daemon 286806016 Oct 13 13:24 core.17210
-rw-------  1 daemon daemon 286806016 Oct 13 13:24 core.17211
-rw-------  1 daemon daemon 286949376 Oct 13 13:24 core.17266

Coredump back trace:

&gt; gdb /usr/local/apache/bin/httpd /tmp/core.17266
GNU gdb Fedora (6.8-27.el5)
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;i386-redhat-linux-gnu&quot;...

warning: Can&apos;t read pathname for load map: Input/output error.
Reading symbols from /lib/libm.so.6...done.
Loaded symbols for /lib/libm.so.6
Reading symbols from /usr/lib/libaprutil-1.so.0...done.
Loaded symbols for /usr/lib/libaprutil-1.so.0
Reading symbols from /lib/libcrypt.so.1...done.
Loaded symbols for /lib/libcrypt.so.1
Reading symbols from /usr/lib/libldap-2.3.so.0...done.
Loaded symbols for /usr/lib/libldap-2.3.so.0
Reading symbols from /usr/lib/liblber-2.3.so.0...done.
Loaded symbols for /usr/lib/liblber-2.3.so.0
Reading symbols from /lib/libdb-4.3.so...done.
Loaded symbols for /lib/libdb-4.3.so
Reading symbols from /lib/libexpat.so.0...done.
Loaded symbols for /lib/libexpat.so.0
Reading symbols from /usr/lib/libapr-1.so.0...done.
Loaded symbols for /usr/lib/libapr-1.so.0
Reading symbols from /lib/libpthread.so.0...done.
Loaded symbols for /lib/libpthread.so.0
Reading symbols from /lib/libdl.so.2...done.
Loaded symbols for /lib/libdl.so.2
Reading symbols from /lib/libc.so.6...done.
Loaded symbols for /lib/libc.so.6
Reading symbols from /lib/ld-linux.so.2...done.
Loaded symbols for /lib/ld-linux.so.2
Reading symbols from /lib/libuuid.so.1...done.
Loaded symbols for /lib/libuuid.so.1
Reading symbols from /usr/lib/libpq.so.4...done.
Loaded symbols for /usr/lib/libpq.so.4
Reading symbols from /usr/lib/libsqlite3.so.0...done.
Loaded symbols for /usr/lib/libsqlite3.so.0
Reading symbols from /lib/libresolv.so.2...done.
Loaded symbols for /lib/libresolv.so.2
Reading symbols from /usr/lib/libsasl2.so.2...done.
Loaded symbols for /usr/lib/libsasl2.so.2
Reading symbols from /lib/libssl.so.6...done.
Loaded symbols for /lib/libssl.so.6
Reading symbols from /lib/libcrypto.so.6...done.
Loaded symbols for /lib/libcrypto.so.6
Reading symbols from /usr/lib/libkrb5.so.3...done.
Loaded symbols for /usr/lib/libkrb5.so.3
Reading symbols from /lib/libnsl.so.1...done.
Loaded symbols for /lib/libnsl.so.1
Reading symbols from /usr/lib/libgssapi_krb5.so.2...done.
Loaded symbols for /usr/lib/libgssapi_krb5.so.2
Reading symbols from /lib/libcom_err.so.2...done.
Loaded symbols for /lib/libcom_err.so.2
Reading symbols from /usr/lib/libk5crypto.so.3...done.
Loaded symbols for /usr/lib/libk5crypto.so.3
Reading symbols from /usr/lib/libz.so.1...done.
Loaded symbols for /usr/lib/libz.so.1
Reading symbols from /usr/lib/libkrb5support.so.0...done.
Loaded symbols for /usr/lib/libkrb5support.so.0
Reading symbols from /lib/libkeyutils.so.1...done.
Loaded symbols for /lib/libkeyutils.so.1
Reading symbols from /lib/libselinux.so.1...done.
Loaded symbols for /lib/libselinux.so.1
Reading symbols from /lib/libsepol.so.1...done.
Loaded symbols for /lib/libsepol.so.1
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_file.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_file.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_dbm.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_dbm.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_anon.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_anon.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_dbd.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_dbd.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_default.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_default.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_host.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_host.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_groupfile.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_groupfile.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_user.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_user.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_dbm.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_dbm.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_owner.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_owner.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_default.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_default.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_auth_basic.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_auth_basic.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_auth_digest.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_auth_digest.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dbd.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dbd.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dumpio.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dumpio.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_ext_filter.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_ext_filter.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_include.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_include.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_filter.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_filter.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_substitute.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_substitute.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_deflate.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_deflate.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_log_config.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_log_config.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_logio.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_logio.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_env.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_env.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_mime_magic.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_mime_magic.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_expires.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_expires.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_headers.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_headers.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_ident.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_ident.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_unique_id.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_unique_id.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_setenvif.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_setenvif.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_version.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_version.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_connect.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_connect.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_ftp.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_ftp.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_http.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_http.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_scgi.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_scgi.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_ajp.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_ajp.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_balancer.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_balancer.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_ssl.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_ssl.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_mime.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_mime.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dav.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dav.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_status.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_status.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_autoindex.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_autoindex.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_asis.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_asis.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_info.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_info.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_cgid.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_cgid.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dav_fs.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dav_fs.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_vhost_alias.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_vhost_alias.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_negotiation.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_negotiation.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dir.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dir.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_imagemap.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_imagemap.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_actions.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_actions.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_speling.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_speling.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_userdir.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_userdir.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_alias.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_alias.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_rewrite.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_rewrite.so
Reading symbols from /usr/lib/libxml2.so...done.
Loaded symbols for /usr/lib/libxml2.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_xml2enc.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_xml2enc.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_html.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_html.so
Reading symbols from /lib/libgcc_s.so.1...done.
Loaded symbols for /lib/libgcc_s.so.1
Core was generated by `/usr/local/httpd-2.2.14/bin/httpd -k start&apos;.
Program terminated with signal 11, Segmentation fault.
[New process 17266]
#0  0x00dc4402 in __kernel_vsyscall ()
(gdb) thread apply all bt full

Thread 1 (process 17266):
#0  0x00dc4402 in __kernel_vsyscall ()
No symbol table info available.
#1  0x004e24cb in read () from /lib/libpthread.so.0
No symbol table info available.
#2  0x08094545 in ap_mpm_pod_check (pod=0x843e840) at pod.c:54
        c = 0 &apos;\0&apos;
        fd = 4
        rc = 3529888
#3  0x08091f50 in child_main (child_num_arg=0) at worker.c:1258
        threads = (apr_thread_t **) 0x8309a68
        rv = 0
        ts = (thread_starter *) 0x84ccf38
        thread_attr = (apr_threadattr_t *) 0x84ccf48
        start_thread_id = (apr_thread_t *) 0x84ccf80
#4  0x080920fc in make_child (s=0x82ce440, slot=0) at worker.c:1341
        pid = 0
#5  0x08092610 in perform_idle_server_maintenance () at worker.c:1543
        i = 0
        j = 25
        idle_thread_count = 0
        ws = (worker_score *) 0xb7ee8624
        ps = (process_score *) 0xb7ee0044
        free_length = 1
        totally_free_length = 1
        free_slots = {0, 0, 114, 0, 137143680, 0, 1, 0, 1000000, 0, 1000000, 0, -1, 0, 1000000, 4370909, 
  2564584, 1000000, 0, 2533273, 0, 0, 0, 0, -1078526780, 0, -1078526760, 2527544, -1078526652, 0, 0, 2538114}
        last_non_dead = 2
        total_non_dead = 3
        active_thread_count = 0
        reported = 0
#6  0x08092840 in server_main_loop (remaining_children_to_start=0) at worker.c:1646
        child_slot = 1
        exitwhy = 6
        status = 11
        processed_status = 0
        pid = {pid = -1, in = 0x0, out = 0x0, err = 0x80a8d89}
        i = 25
#7  0x08092ba6 in ap_mpm_run (_pconf=0x82cc550, plog=0x82fa608, s=0x82ce440) at worker.c:1748
        remaining_children_to_start = 0
        rv = 0
#8  0x08063518 in main (argc=903651328, argv=0xb6fbb800) at main.c:740
        c = 0 &apos;\0&apos;
        configtestonly = 0
        confname = 0x80a00f5 &quot;conf/httpd.conf&quot;
        def_server_root = 0x80a0105 &quot;/usr/local/httpd-2.2.14&quot;
        temp_error_log = 0x0
        error = 0x0
        process = (process_rec *) 0x82ca5c8
        server_conf = (server_rec *) 0x82ce440
        pglobal = (apr_pool_t *) 0x82ca548
        pconf = (apr_pool_t *) 0x82cc550
        plog = (apr_pool_t *) 0x82fa608
        ptemp = (apr_pool_t *) 0x82d0560
        pcommands = (apr_pool_t *) 0x82ce558
        opt = (apr_getopt_t *) 0x82ce5f0
        rv = 0
        mod = (module **) 0x80ad110
        optarg = 0xf63d4e2e &lt;Address 0xf63d4e2e out of bounds&gt;
        signal_server = (apr_OFN_ap_signal_server_t *) 0x80851f4 &lt;ap_signal_server&gt;
(gdb)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>131098</commentid>
    <comment_count>1</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2009-10-13 00:33:18 +0000</bug_when>
    <thetext>Where are the stacktraces from the other threads?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>131115</commentid>
    <comment_count>2</comment_count>
    <who name="Jie Gao">J.Gao</who>
    <bug_when>2009-10-13 14:10:27 +0000</bug_when>
    <thetext>backtrace for the rest of threads:

&gt; gdb /usr/local/apache/bin/httpd /tmp/core.17211
GNU gdb Fedora (6.8-27.el5)
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;i386-redhat-linux-gnu&quot;...

warning: Can&apos;t read pathname for load map: Input/output error.
Reading symbols from /lib/libm.so.6...done.
Loaded symbols for /lib/libm.so.6
Reading symbols from /usr/lib/libaprutil-1.so.0...done.
Loaded symbols for /usr/lib/libaprutil-1.so.0
Reading symbols from /lib/libcrypt.so.1...done.
Loaded symbols for /lib/libcrypt.so.1
Reading symbols from /usr/lib/libldap-2.3.so.0...done.
Loaded symbols for /usr/lib/libldap-2.3.so.0
Reading symbols from /usr/lib/liblber-2.3.so.0...done.
Loaded symbols for /usr/lib/liblber-2.3.so.0
Reading symbols from /lib/libdb-4.3.so...done.
Loaded symbols for /lib/libdb-4.3.so
Reading symbols from /lib/libexpat.so.0...done.
Loaded symbols for /lib/libexpat.so.0
Reading symbols from /usr/lib/libapr-1.so.0...done.
Loaded symbols for /usr/lib/libapr-1.so.0
Reading symbols from /lib/libpthread.so.0...done.
Loaded symbols for /lib/libpthread.so.0
Reading symbols from /lib/libdl.so.2...done.
Loaded symbols for /lib/libdl.so.2
Reading symbols from /lib/libc.so.6...done.
Loaded symbols for /lib/libc.so.6
Reading symbols from /lib/ld-linux.so.2...done.
Loaded symbols for /lib/ld-linux.so.2
Reading symbols from /lib/libuuid.so.1...done.
Loaded symbols for /lib/libuuid.so.1
Reading symbols from /usr/lib/libpq.so.4...done.
Loaded symbols for /usr/lib/libpq.so.4
Reading symbols from /usr/lib/libsqlite3.so.0...done.
Loaded symbols for /usr/lib/libsqlite3.so.0
Reading symbols from /lib/libresolv.so.2...done.
Loaded symbols for /lib/libresolv.so.2
Reading symbols from /usr/lib/libsasl2.so.2...done.
Loaded symbols for /usr/lib/libsasl2.so.2
Reading symbols from /lib/libssl.so.6...done.
Loaded symbols for /lib/libssl.so.6
Reading symbols from /lib/libcrypto.so.6...done.
Loaded symbols for /lib/libcrypto.so.6
Reading symbols from /usr/lib/libkrb5.so.3...done.
Loaded symbols for /usr/lib/libkrb5.so.3
Reading symbols from /lib/libnsl.so.1...done.
Loaded symbols for /lib/libnsl.so.1
Reading symbols from /usr/lib/libgssapi_krb5.so.2...done.
Loaded symbols for /usr/lib/libgssapi_krb5.so.2
Reading symbols from /lib/libcom_err.so.2...done.
Loaded symbols for /lib/libcom_err.so.2
Reading symbols from /usr/lib/libk5crypto.so.3...done.
Loaded symbols for /usr/lib/libk5crypto.so.3
Reading symbols from /usr/lib/libz.so.1...done.
Loaded symbols for /usr/lib/libz.so.1
Reading symbols from /usr/lib/libkrb5support.so.0...done.
Loaded symbols for /usr/lib/libkrb5support.so.0
Reading symbols from /lib/libkeyutils.so.1...done.
Loaded symbols for /lib/libkeyutils.so.1
Reading symbols from /lib/libselinux.so.1...done.
Loaded symbols for /lib/libselinux.so.1
Reading symbols from /lib/libsepol.so.1...done.
Loaded symbols for /lib/libsepol.so.1
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_file.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_file.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_dbm.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_dbm.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_anon.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_anon.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_dbd.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_dbd.so
Reading symbols from
/usr/local/httpd-2.2.14/modules/mod_authn_default.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_default.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_host.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_host.so
Reading symbols from
/usr/local/httpd-2.2.14/modules/mod_authz_groupfile.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_groupfile.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_user.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_user.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_dbm.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_dbm.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_owner.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_owner.so
Reading symbols from
/usr/local/httpd-2.2.14/modules/mod_authz_default.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_default.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_auth_basic.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_auth_basic.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_auth_digest.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_auth_digest.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dbd.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dbd.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dumpio.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dumpio.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_ext_filter.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_ext_filter.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_include.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_include.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_filter.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_filter.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_substitute.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_substitute.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_deflate.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_deflate.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_log_config.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_log_config.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_logio.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_logio.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_env.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_env.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_mime_magic.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_mime_magic.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_expires.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_expires.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_headers.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_headers.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_ident.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_ident.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_unique_id.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_unique_id.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_setenvif.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_setenvif.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_version.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_version.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy.so
Reading symbols from
/usr/local/httpd-2.2.14/modules/mod_proxy_connect.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_connect.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_ftp.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_ftp.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_http.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_http.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_scgi.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_scgi.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_ajp.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_ajp.so
Reading symbols from
/usr/local/httpd-2.2.14/modules/mod_proxy_balancer.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_balancer.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_ssl.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_ssl.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_mime.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_mime.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dav.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dav.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_status.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_status.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_autoindex.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_autoindex.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_asis.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_asis.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_info.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_info.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_cgid.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_cgid.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dav_fs.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dav_fs.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_vhost_alias.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_vhost_alias.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_negotiation.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_negotiation.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dir.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dir.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_imagemap.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_imagemap.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_actions.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_actions.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_speling.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_speling.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_userdir.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_userdir.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_alias.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_alias.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_rewrite.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_rewrite.so
Reading symbols from /usr/lib/libxml2.so...done.
Loaded symbols for /usr/lib/libxml2.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_xml2enc.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_xml2enc.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_html.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_html.so
Reading symbols from /lib/libgcc_s.so.1...done.
Loaded symbols for /lib/libgcc_s.so.1
Core was generated by `/usr/local/httpd-2.2.14/bin/httpd -k start&apos;.
Program terminated with signal 11, Segmentation fault.
[New process 17211]
#0  0x00dc4402 in __kernel_vsyscall ()
(gdb) thread apply all bt full

Thread 1 (process 17211):
#0  0x00dc4402 in __kernel_vsyscall ()
No symbol table info available.
#1  0x004e24cb in read () from /lib/libpthread.so.0
No symbol table info available.
#2  0x08094545 in ap_mpm_pod_check (pod=0x843e840) at pod.c:54
        c = 0 &apos;\0&apos;
        fd = 4
        rc = 3529888
#3  0x08091f50 in child_main (child_num_arg=1) at worker.c:1258
        threads = (apr_thread_t **) 0x8309a68
        rv = 0
        ts = (thread_starter *) 0x84ccf38
        thread_attr = (apr_threadattr_t *) 0x84ccf48
        start_thread_id = (apr_thread_t *) 0x84ccf80
#4  0x080920fc in make_child (s=0x82ce440, slot=1) at worker.c:1341
        pid = 0
#5  0x08092231 in startup_children (number_to_start=1) at worker.c:1375
        i = 1
#6  0x08092a9a in ap_mpm_run (_pconf=0x82cc550, plog=0x82fa608, s=0x82ce440) at
worker.c:1725
        remaining_children_to_start = 2
        rv = 0
#7  0x08063518 in main (argc=903651328, argv=0xb6fcf800) at main.c:740
        c = 0 &apos;\0&apos;
        configtestonly = 0
        confname = 0x80a00f5 &quot;conf/httpd.conf&quot;
        def_server_root = 0x80a0105 &quot;/usr/local/httpd-2.2.14&quot;
        temp_error_log = 0x0
        error = 0x0
        process = (process_rec *) 0x82ca5c8
        server_conf = (server_rec *) 0x82ce440
        pglobal = (apr_pool_t *) 0x82ca548
        pconf = (apr_pool_t *) 0x82cc550
        plog = (apr_pool_t *) 0x82fa608
        ptemp = (apr_pool_t *) 0x82d0560
        pcommands = (apr_pool_t *) 0x82ce558
        opt = (apr_getopt_t *) 0x82ce5f0
        rv = 0
        mod = (module **) 0x80ad110
        optarg = 0xf63d4e2e &lt;Address 0xf63d4e2e out of bounds&gt;
        signal_server = (apr_OFN_ap_signal_server_t *) 0x80851f4
&lt;ap_signal_server&gt;
(gdb) 

---

&gt; gdb /usr/local/apache/bin/httpd /tmp/core.17210
GNU gdb Fedora (6.8-27.el5)
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;i386-redhat-linux-gnu&quot;...

warning: Can&apos;t read pathname for load map: Input/output error.
Reading symbols from /lib/libm.so.6...done.
Loaded symbols for /lib/libm.so.6
Reading symbols from /usr/lib/libaprutil-1.so.0...done.
Loaded symbols for /usr/lib/libaprutil-1.so.0
Reading symbols from /lib/libcrypt.so.1...done.
Loaded symbols for /lib/libcrypt.so.1
Reading symbols from /usr/lib/libldap-2.3.so.0...done.
Loaded symbols for /usr/lib/libldap-2.3.so.0
Reading symbols from /usr/lib/liblber-2.3.so.0...done.
Loaded symbols for /usr/lib/liblber-2.3.so.0
Reading symbols from /lib/libdb-4.3.so...done.
Loaded symbols for /lib/libdb-4.3.so
Reading symbols from /lib/libexpat.so.0...done.
Loaded symbols for /lib/libexpat.so.0
Reading symbols from /usr/lib/libapr-1.so.0...done.
Loaded symbols for /usr/lib/libapr-1.so.0
Reading symbols from /lib/libpthread.so.0...done.
Loaded symbols for /lib/libpthread.so.0
Reading symbols from /lib/libdl.so.2...done.
Loaded symbols for /lib/libdl.so.2
Reading symbols from /lib/libc.so.6...done.
Loaded symbols for /lib/libc.so.6
Reading symbols from /lib/ld-linux.so.2...done.
Loaded symbols for /lib/ld-linux.so.2
Reading symbols from /lib/libuuid.so.1...done.
Loaded symbols for /lib/libuuid.so.1
Reading symbols from /usr/lib/libpq.so.4...done.
Loaded symbols for /usr/lib/libpq.so.4
Reading symbols from /usr/lib/libsqlite3.so.0...done.
Loaded symbols for /usr/lib/libsqlite3.so.0
Reading symbols from /lib/libresolv.so.2...done.
Loaded symbols for /lib/libresolv.so.2
Reading symbols from /usr/lib/libsasl2.so.2...done.
Loaded symbols for /usr/lib/libsasl2.so.2
Reading symbols from /lib/libssl.so.6...done.
Loaded symbols for /lib/libssl.so.6
Reading symbols from /lib/libcrypto.so.6...done.
Loaded symbols for /lib/libcrypto.so.6
Reading symbols from /usr/lib/libkrb5.so.3...done.
Loaded symbols for /usr/lib/libkrb5.so.3
Reading symbols from /lib/libnsl.so.1...done.
Loaded symbols for /lib/libnsl.so.1
Reading symbols from /usr/lib/libgssapi_krb5.so.2...done.
Loaded symbols for /usr/lib/libgssapi_krb5.so.2
Reading symbols from /lib/libcom_err.so.2...done.
Loaded symbols for /lib/libcom_err.so.2
Reading symbols from /usr/lib/libk5crypto.so.3...done.
Loaded symbols for /usr/lib/libk5crypto.so.3
Reading symbols from /usr/lib/libz.so.1...done.
Loaded symbols for /usr/lib/libz.so.1
Reading symbols from /usr/lib/libkrb5support.so.0...done.
Loaded symbols for /usr/lib/libkrb5support.so.0
Reading symbols from /lib/libkeyutils.so.1...done.
Loaded symbols for /lib/libkeyutils.so.1
Reading symbols from /lib/libselinux.so.1...done.
Loaded symbols for /lib/libselinux.so.1
Reading symbols from /lib/libsepol.so.1...done.
Loaded symbols for /lib/libsepol.so.1
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_file.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_file.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_dbm.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_dbm.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_anon.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_anon.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authn_dbd.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_dbd.so
Reading symbols from
/usr/local/httpd-2.2.14/modules/mod_authn_default.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authn_default.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_host.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_host.so
Reading symbols from
/usr/local/httpd-2.2.14/modules/mod_authz_groupfile.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_groupfile.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_user.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_user.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_dbm.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_dbm.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_authz_owner.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_owner.so
Reading symbols from
/usr/local/httpd-2.2.14/modules/mod_authz_default.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_authz_default.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_auth_basic.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_auth_basic.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_auth_digest.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_auth_digest.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dbd.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dbd.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dumpio.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dumpio.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_ext_filter.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_ext_filter.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_include.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_include.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_filter.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_filter.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_substitute.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_substitute.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_deflate.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_deflate.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_log_config.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_log_config.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_logio.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_logio.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_env.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_env.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_mime_magic.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_mime_magic.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_expires.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_expires.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_headers.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_headers.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_ident.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_ident.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_unique_id.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_unique_id.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_setenvif.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_setenvif.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_version.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_version.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy.so
Reading symbols from
/usr/local/httpd-2.2.14/modules/mod_proxy_connect.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_connect.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_ftp.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_ftp.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_http.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_http.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_scgi.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_scgi.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_ajp.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_ajp.so
Reading symbols from
/usr/local/httpd-2.2.14/modules/mod_proxy_balancer.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_balancer.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_ssl.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_ssl.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_mime.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_mime.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dav.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dav.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_status.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_status.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_autoindex.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_autoindex.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_asis.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_asis.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_info.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_info.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_cgid.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_cgid.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dav_fs.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dav_fs.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_vhost_alias.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_vhost_alias.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_negotiation.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_negotiation.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_dir.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_dir.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_imagemap.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_imagemap.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_actions.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_actions.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_speling.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_speling.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_userdir.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_userdir.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_alias.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_alias.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_rewrite.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_rewrite.so
Reading symbols from /usr/lib/libxml2.so...done.
Loaded symbols for /usr/lib/libxml2.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_xml2enc.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_xml2enc.so
Reading symbols from /usr/local/httpd-2.2.14/modules/mod_proxy_html.so...done.
Loaded symbols for /usr/local/httpd-2.2.14/modules/mod_proxy_html.so
Reading symbols from /lib/libgcc_s.so.1...done.
Loaded symbols for /lib/libgcc_s.so.1
Core was generated by `/usr/local/httpd-2.2.14/bin/httpd -k start&apos;.
Program terminated with signal 11, Segmentation fault.
[New process 17210]
#0  0x00dc4402 in __kernel_vsyscall ()
(gdb) 
(gdb)  thread apply all bt full

Thread 1 (process 17210):
#0  0x00dc4402 in __kernel_vsyscall ()
No symbol table info available.
#1  0x004e24cb in read () from /lib/libpthread.so.0
No symbol table info available.
#2  0x08094545 in ap_mpm_pod_check (pod=0x843e840) at pod.c:54
        c = 0 &apos;\0&apos;
        fd = 4
        rc = 3529888
#3  0x08091f50 in child_main (child_num_arg=0) at worker.c:1258
        threads = (apr_thread_t **) 0x8309a68
        rv = 0
        ts = (thread_starter *) 0x84ccf38
        thread_attr = (apr_threadattr_t *) 0x84ccf48
        start_thread_id = (apr_thread_t *) 0x84ccf80
#4  0x080920fc in make_child (s=0x82ce440, slot=0) at worker.c:1341
        pid = 0
#5  0x08092231 in startup_children (number_to_start=2) at worker.c:1375
        i = 0
#6  0x08092a9a in ap_mpm_run (_pconf=0x82cc550, plog=0x82fa608, s=0x82ce440) at
worker.c:1725
        remaining_children_to_start = 2
        rv = 0
#7  0x08063518 in main (argc=903651328, argv=0xb6fcf800) at main.c:740
        c = 0 &apos;\0&apos;
        configtestonly = 0
        confname = 0x80a00f5 &quot;conf/httpd.conf&quot;
        def_server_root = 0x80a0105 &quot;/usr/local/httpd-2.2.14&quot;
        temp_error_log = 0x0
        error = 0x0
        process = (process_rec *) 0x82ca5c8
        server_conf = (server_rec *) 0x82ce440
        pglobal = (apr_pool_t *) 0x82ca548
        pconf = (apr_pool_t *) 0x82cc550
        plog = (apr_pool_t *) 0x82fa608
        ptemp = (apr_pool_t *) 0x82d0560
        pcommands = (apr_pool_t *) 0x82ce558
        opt = (apr_getopt_t *) 0x82ce5f0
        rv = 0
        mod = (module **) 0x80ad110
        optarg = 0xf63d4e2e &lt;Address 0xf63d4e2e out of bounds&gt;
        signal_server = (apr_OFN_ap_signal_server_t *) 0x80851f4
&lt;ap_signal_server&gt;
---</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>131117</commentid>
    <comment_count>3</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2009-10-13 22:54:31 +0000</bug_when>
    <thetext>This is a misunderstanding. I did not mean the other core dumps, but the other threads in the first core dump. The stacktrace from the thread given gives no hint for a possible crash. The crash must have happened in a different thread of the same process and thus same core dump that isn&apos;t documented here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>131131</commentid>
    <comment_count>4</comment_count>
    <who name="Jie Gao">J.Gao</who>
    <bug_when>2009-10-14 20:13:38 +0000</bug_when>
    <thetext>(In reply to comment #3)
&gt; This is a misunderstanding. I did not mean the other core dumps, but the other
&gt; threads in the first core dump. The stacktrace from the thread given gives no
&gt; hint for a possible crash. The crash must have happened in a different thread
&gt; of the same process and thus same core dump that isn&apos;t documented here.

I did run &quot;thread apply all bt full&quot;. If that doesn&apos;t give you all the threads, what does?

Jie</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>131161</commentid>
    <comment_count>5</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2009-10-15 22:04:31 +0000</bug_when>
    <thetext>(In reply to comment #4)
&gt; (In reply to comment #3)
&gt; &gt; This is a misunderstanding. I did not mean the other core dumps, but the other
&gt; &gt; threads in the first core dump. The stacktrace from the thread given gives no
&gt; &gt; hint for a possible crash. The crash must have happened in a different thread
&gt; &gt; of the same process and thus same core dump that isn&apos;t documented here.
&gt; 
&gt; I did run &quot;thread apply all bt full&quot;. If that doesn&apos;t give you all the threads,
&gt; what does?

That is weird. Can you do an

info threads?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>131162</commentid>
    <comment_count>6</comment_count>
    <who name="Jie Gao">J.Gao</who>
    <bug_when>2009-10-15 22:10:06 +0000</bug_when>
    <thetext>(gdb) info threads
* 1 process 17266  0x00dc4402 in __kernel_vsyscall ()
(gdb)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>131163</commentid>
    <comment_count>7</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2009-10-15 22:21:31 +0000</bug_when>
    <thetext>Thanks but the problem is that the crash did not happen here. So with only these stacktraces available we cannot do anything. We need to wait until more meaningful crashes happen.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>48045</bug_id>
          
          <creation_ts>2009-10-23 20:14:27 +0000</creation_ts>
          <short_desc>Apache 2 initgroups alert, Max OS X, abnormal exit in error log</short_desc>
          <delta_ts>2009-10-23 20:14:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.13</version>
          <rep_platform>Macintosh</rep_platform>
          <op_sys>other</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>scott</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>131350</commentid>
    <comment_count>0</comment_count>
    <who name="">scott</who>
    <bug_when>2009-10-23 20:14:27 +0000</bug_when>
    <thetext>I posted this to the Apache Users list, and bumped it with no additional replies.

The main trouble is this results in an exit of Apache, no sites will serve without a restart. This exit appers random, and can not be caused by any actions on my part.

This exit followed me from a base install, through the process of building up Apache to be used in a shared hosting environment.

Asking a few collegues to grep their logs shoes they too experience these issues but were not aware.

It appears this problem can be seen in the 1.x series as well, and also appers in my research, limited to OS X/BSD.

Apache 2 initgroups alert, Max OS X, abnormal exit in error log
$httpd -v
Server version: Apache/2.2.13 (Unix)

$grep &apos;\[alert\]&apos; error_log
[Thu Oct 08 16:23:24 2009] [alert] (22)Invalid argument: initgroups:
unable to set groups for User www and Group 70
[Thu Oct 08 16:23:24 2009] [alert] (22)Invalid argument: initgroups:
unable to set groups for User www and Group 70
[Thu Oct 08 16:23:24 2009] [alert] (22)Invalid argument: initgroups:
unable to set groups for User www and Group 70
[Thu Oct 08 16:23:24 2009] [alert] (22)Invalid argument: initgroups:
unable to set groups for User www and Group 70
[Thu Oct 08 16:23:24 2009] [alert] (22)Invalid argument: initgroups:
unable to set groups for User www and Group 70
[Thu Oct 08 16:23:25 2009] [alert] Child 13545 returned a Fatal
error... Apache is exiting!
[Thu Oct 08 17:29:48 2009] [alert] (36)Operation now in progress:
initgroups: unable to set groups for User www and Group 70
[Thu Oct 08 17:29:49 2009] [alert] Child 13782 returned a Fatal
error... Apache is exiting!

There is a little info on this, one which is in this list, but dates
back a year:
http://mail-archives.apache.org/mod_mbox/httpd-users/200810.mbox/%3C5249c07e0810091021s77d4f603y50c3fbb20cd4c181[at]mail.gmail.com%3E

There was no solution to that thread I could find.

Looking through a few changelogs, I see mention of initgroups, but I
am not versed in this enough to now if this was addressed, attempted
to be addressed, or was assumed to have been solved. I am not using
any LDAP as some googling will point to.

The only correlation I have, is I was playing with rotatelogs for the
first time. I removed the single pipe line for the error log
and issued apachectl graceful. That graceful was issued at Oct 8
16:23, but you can see, I had an exit afterward as well.

The pipe I added was put into a virtual host container, did make a log
after a graceful start, and followed the 300 second rotation schedule
I was testing. User was root and group was www.

My google searches on this seem to be mostly limited to Mac OS X, both
PPC and Intel, info is sparse.

More details below, but the meat of the exit issue is above.

This is a relatively new install, and was just put into production
after stable testing for a few weeks. I have not seen any other
unusual exits, but I am also staying away from rotatelogs for the time
being, though I am pretty sure that my end goals will need use of
rotatelogs.

I believe rotatelogs to be coincidental, as this has now appeared in my logs with no config changes for weeks.

I am running Mac OS X 10.5 on PPC.

Hardware Overview:
Model Name: Power Mac G5
Model Identifier: PowerMac7,2
Processor Name: PowerPC 970 (2.2)
Processor Speed: 2 GHz
Number Of CPUs: 2
L2 Cache (per CPU): 512 KB
Memory: 3.5 GB
Bus Speed: 1 GHz
Boot ROM Version: 5.1.4f0

I used MacPorts to install, which from what I can tell about the port install
description file, these are the configure args I used:

--prefix=/opt/local/apache2
--with-apr=/opt/local/bin/apr-1-config \
--with-apr-util=/opt/local/bin/apu-1-config \
--libdir=/opt/local/lib \
--with-expat=/opt/local \
--with-pcre=/opt/local \
--mandir=/opt/local/share/man \
--enable-mods-shared=all \
--enable-ssl \
--with-ssl=/opt/local \
--enable-cache \
--enable-disk_cache \
--enable-file_cache \
--enable-mem_cache \
--enable-deflate \
--enable-proxy \
--enable-proxy-connect \
--enable-proxy-http \
--enable-proxy-ftp

I&apos;ve found log lines showing this issue from stock Apple builds on OS X Server and Client, as built by Apple.

I can not locate the OP&apos;s email address from the above tgread to follow up with him and see if he has resolution to this.

Deeper research into the code shows the call to initgroups where the exit happens. Comparing for -1, though I seem to recall a thread where this return was tested as -1 or otherwise, and the results were the same.

At this point, my lack of debugging understanding, and inability to be too agressive with a live server, as well as the sporadic and unrepeatable nature of this, lead me to post here.

I would love to work with someone to pin this down. I have plenty of access to test servers, assuming someone can show me how to repeat this exit code issue.

Thanks for a great server.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>48254</bug_id>
          
          <creation_ts>2009-11-20 13:49:55 +0000</creation_ts>
          <short_desc>Bogus &quot;DocumentRoot does not exist&quot; warning when set to a file</short_desc>
          <delta_ts>2013-01-20 20:28:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>PatchAvailable</keywords>
          <priority>P2</priority>
          <bug_severity>trivial</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bill Clark">billclark</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>andersk</cc>
          
          <votes>3</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>132185</commentid>
    <comment_count>0</comment_count>
    <who name="Bill Clark">billclark</who>
    <bug_when>2009-11-20 13:49:55 +0000</bug_when>
    <thetext>I often set the DocumentRoot of a vhost to a file (PHP script) to remap requests for all URIs to a single point of entry.  This works just fine and has never given me a problem, but Apache throws a warning about the DocumentRoot not existing.  The existence check should probably just check for existence, and not that the DocumentRoot is a directory (which is what it is apparently doing now) or at least give a more accurate warning (&quot;DocumentRoot is not a directory&quot;) or something.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>158690</commentid>
    <comment_count>1</comment_count>
      <attachid>28701</attachid>
    <who name="Daniel Gruno">humbedooh</who>
    <bug_when>2012-05-01 05:23:36 +0000</bug_when>
    <thetext>Created attachment 28701
Patch to elaborate on the warning

Here&apos;s a simple patch that would elaborate on the warning, stating instead: Warning: DocumentRoot [%s] does not exist or is not a directory</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>28701</attachid>
            <date>2012-05-01 05:23:36 +0000</date>
            <delta_ts>2012-05-01 05:23:36 +0000</delta_ts>
            <desc>Patch to elaborate on the warning</desc>
            <filename>core.c.patch</filename>
            <type>text/plain</type>
            <size>568</size>
            <attacher name="Daniel Gruno">humbedooh</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>48659</bug_id>
          
          <creation_ts>2010-02-02 11:46:39 +0000</creation_ts>
          <short_desc>Problem with accents in filename and byte serving</short_desc>
          <delta_ts>2010-02-02 11:49:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.14</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>marc-andre.l</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>marc-andre.l</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>134156</commentid>
    <comment_count>0</comment_count>
    <who name="">marc-andre.l</who>
    <bug_when>2010-02-02 11:46:39 +0000</bug_when>
    <thetext>Ok so we recently set up and Apache Server for the sole purpose of downloading large PDF files securely with byte-serving.

Adobe Reader would launch and we can browse a file while it is downloading in the backgound.

So everything was working great except when we tried to download a file with an accent in it ( É ), then the first page of the PDF would load correctly but after that it would hang and Adobe would utlimately show and error 14 (after several minutes).

Upon investigation we found the following in the server access log.

69.70.224.202 - - [02/Feb/2010:14:21:41 -0500] &quot;GET /test%20%C3%89.pdf HTTP/1.0&quot; 200 58246434
69.70.224.202 - - [02/Feb/2010:14:21:41 -0500] &quot;GET /test%20%C3%89.pdf HTTP/1.1&quot; 200 58246434
69.70.224.202 - - [02/Feb/2010:14:21:48 -0500] &quot;GET /test%20\xc9.pdf HTTP/1.1&quot; 403 212
69.70.224.202 - - [02/Feb/2010:14:21:48 -0500] &quot;GET /test%20\xc9.pdf HTTP/1.0&quot; 403 212

The first two lines is the request made by us, we can see that the É character was converted to utf-8 and encoded using % sign (%C3%89).

The next two lines are request from Adobe Reader to obtain byte ranges, and then the server replied with a 403 status code.

You can see that the URL is slightly different (%C3%89 was replaced by \xc9), I don&apos;t know if this is the reason for the 403 status code but I don&apos;t see what else could be.

We also tried the IIS byte serving and it would download the file without an problem (even with an accent in the filename) so it clearly seams to be some problem with the Apache server.

If it is something that we can fix in the configuration please tell us what to do since i could not find an reference of this problem anywhere else.

Thank you.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>48732</bug_id>
          
          <creation_ts>2010-02-12 02:23:15 +0000</creation_ts>
          <short_desc>[BUG] environment variable SCRIPT_NAME output error</short_desc>
          <delta_ts>2010-02-20 04:01:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.0.63</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kevin Q">qu-chunguang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>qu-chunguang</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>134447</commentid>
    <comment_count>0</comment_count>
    <who name="Kevin Q">qu-chunguang</who>
    <bug_when>2010-02-12 02:23:15 +0000</bug_when>
    <thetext>&lt;BUG REPRODUCTION&gt;

1 install
./configure --prefix=/home/qcg/dev/save/apache2063 --enable-cgi --enable-cgid
make &amp;&amp; make install
2 using &apos;cgi-bin/printenv&apos; to print environment variables,
explorer url (with &quot;//&quot; path like under),
http://172.28.14.243:20630/cgi-bin/aa/bb/printenv/aa//bb
and return,
----
... ...
REQUEST_URI=&quot;/cgi-bin/printenv/aa//bb&quot;
SCRIPT_FILENAME=&quot;/home/qcg/dev/save/apache2063/cgi-bin/printenv&quot;
SCRIPT_NAME=&quot;/cgi-bin/printenv/aa&quot;
... ...
----
SCRIPT_NAME should be &quot;/cgi-bin/printenv&quot;
we tested 2.0.59 has the same problem.

BUT 2.2.* seems no this problem.
we tested 2.2.4 in same way:
http://172.28.14.243:10080/cgi-bin/printenv/aa//bb
and return,
----
... ...
REQUEST_URI=&quot;/cgi-bin/printenv/aa//bb&quot;
SCRIPT_FILENAME=&quot;/home/qcg/dev/save/apache2/cgi-bin/printenv&quot;
SCRIPT_NAME=&quot;/cgi-bin/printenv&quot;
... ...
----
SCRIPT_NAME is right.

&lt;ON VERSION&gt;
2.0.x
2.0.59 (has tested)
2.0.63 (has tested, newest 2.0.x)

&lt;NOT ON VERSION&gt;
2.2.*
2.2.4 (has tested)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>134716</commentid>
    <comment_count>1</comment_count>
      <attachid>25027</attachid>
    <who name="Kevin Q">qu-chunguang</who>
    <bug_when>2010-02-20 04:01:07 +0000</bug_when>
    <thetext>Created attachment 25027
[patch] from 2.2.4 to 2.0.59

this patch is copyed from httpd-2.2.4 can be used on httpd-2.0.59.
And all versions of 2.0.x have the same problem.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>25027</attachid>
            <date>2010-02-20 04:01:07 +0000</date>
            <delta_ts>2010-02-20 04:01:07 +0000</delta_ts>
            <desc>[patch] from 2.2.4 to 2.0.59</desc>
            <filename>48732.patch</filename>
            <type>text/plain</type>
            <size>482</size>
            <attacher name="Kevin Q">qu-chunguang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>48792</bug_id>
          
          <creation_ts>2010-02-22 06:47:10 +0000</creation_ts>
          <short_desc>httpd util apachectl returns wrong status information</short_desc>
          <delta_ts>2010-02-22 12:21:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.0.63</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kevin Q">qu-chunguang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>qu-chunguang</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>134763</commentid>
    <comment_count>0</comment_count>
    <who name="Kevin Q">qu-chunguang</who>
    <bug_when>2010-02-22 06:47:10 +0000</bug_when>
    <thetext>We run more than one version of apache httpd on my os.
When calling 
$ ~/apache2063/bin/apachectl status
$ ~/apache2059/bin/apachectl status
under different local installed version(2.0.63/2.0.59),
but returns same information about 2.2.12(which default installed on my system).

We think this is a bug because
$ ~/apache2063/bin/apachectl start/stop/restart
will control only local version of httpd
but 
$ ~/apache2063/bin/apachectl status
returns information of system version of httpd,
isn&apos;t it strange?

We tested 2.2.x have the same problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>134765</commentid>
    <comment_count>1</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2010-02-22 12:21:45 +0000</bug_when>
    <thetext>Changing to enhancement, apachectl doesn&apos;t try too hard to figure out what host/port server-status might be accessable on.  The manual suggests setting the URL to be queried if the default doesn&apos;t work out for you.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>48805</bug_id>
          
          <creation_ts>2010-02-23 22:17:39 +0000</creation_ts>
          <short_desc>Corrupted response for HTTPS + KEEPALIVE=ON</short_desc>
          <delta_ts>2010-03-04 21:55:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>Sun</rep_platform>
          <op_sys>Solaris</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ValdemarPavesi">valdemar.pavesi</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>134839</commentid>
    <comment_count>0</comment_count>
    <who name="ValdemarPavesi">valdemar.pavesi</who>
    <bug_when>2010-02-23 22:17:39 +0000</bug_when>
    <thetext>after sent a REQUEST there is a RESPONSE with a corrupted data on beginning of the message:


&quot;: ‹ HTTP/1.1 200 OK&quot;


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

R000064-2 -0 : usr: |--./tweb/public/req?getStyleSheet=/-&gt;| 09 14:24:25.51
: GET /tweb/public/req?getStyleSheet=/webclient/css/hiqstyle_
: DpyTbl_ipctx.css&amp;pGen=true HTTP/1.1
: Connection: Keep-Alive
: Content-Length: 0
: Accept: */*
: Accept-Encoding: gzip, deflate
: Accept-Language: de
: Host: 10.115.11.227
: Referer: https://10.115.11.227/tweb/portal/req?loadPortalPa
: ge=conmngr&amp;language=en_US
: User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5
: .0; T312461; (R1 1.3); .NET CLR 1.0.3705; .NET CLR 1.1.4322
: ; FDM)
: Cookie: JSESSIONID=45CFF35B9EA8023F48C32BF9D2FB55E6; JSESSI
: ONIDSSO=53882695AF0D8EA7EE8A4A66A5759F56; TCreds=%2BtSPW%3A
: AAJXqlqbhMEtxX753L3S0f25c7ci54aC4rWYSVToWUQEk%2FumAAAAcQACT
: hkAAAADAAAAAQAAAAMAAABBAAAAAAAAAAAAAAEkzYZyEgAAAAFTUFc3VVRS
: K0s2CSsrMSg2NDQpNjIwLTAwMzIJZXh0NjEwMDMyCStJUFNMX0JHMTUJKwk
: rCUNNVXNlcglQcmVzZW5jZVVzZXI3AAAA; bcs_login=1257535390739
:
R000064-2 -0 : HTTP: CL -&gt; CM ...DpyTbl_ipctx.css&amp;pGen=true 09 14:24:25.51
HTTP : NO RESOURCE FOR THIS Request (mt=2) 09 14:24:25.51
HTTP : ON LINK=64 09 14:24:25.51
HTTP : net: |&lt;-.200-------------------------------| 09 14:24:25.51
: ‹ HTTP/1.1 200 OK
: Date: Fri, 06 Nov 2009 19:23:10 GMT
: Server: Apache
: Content-Language: en
: Vary: Accept-Encoding,User-Agent
: Content-Encoding: gzip
: Content-Length: 108
: Keep-Alive: timeout=60, max=92
: Connection: Keep-Alive
: Content-Type: text/plain; charset=utf-8
:
: ‹
: ÉA @0 À{_!N\ì D8x€„{Ón6l²¨v ¿×¹Ž x gÔâŽR•  y · Fˆtõ+é¬N &apos;·
: R yQ˜ L 6¾’~Bv ßâÅr@}›&lt;eÝ &amp;û ¾ Ê ]
HTTP : net: |&lt;-ASN1-------------------------------| 09 14:24:25.51
: A2 81 DF A0 27 80 1C 1F 8B 08 00 00 00 00 00 00 03 03 00 00
: 00 00 00 00 00 00 00 48 54 54 50 2F 31 2E 31 81 03 32 30 30
: 82 02 4F 4B A1 2B 81 0A 4B 65 65 70 2D 41 6C 69 76 65 82 1D
: 46 72 69 2C 20 30 36 20 4E 6F 76 20 32 30 30 39 20 31 39 3A
: 32 33 3A 31 30 20 47 4D 54 A2 00 A3 2A 82 04 67 7A 69 70 83
: 02 65 6E 84 03 31 30 38 88 19 74 65 78 74 2F 70 6C 61 69 6E
: 3B 20 63 68 61 72 73 65 74 3D 75 74 66 2D 38 A4 52 16 0E 53
: 65 72 76 65 72 3A 20 41 70 61 63 68 65 16 20 56 61 72 79 3A
: 20 41 63 63 65 70 74 2D 45 6E 63 6F 64 69 6E 67 2C 55 73 65
: 72 2D 41 67 65 6E 74 16 1E 4B 65 65 70 2D 41 6C 69 76 65 3A
: 20 74 69 6D 65 6F 75 74 3D 36 30 2C 20 6D 61 78 3D 39 32 A5
: 05 80 01 00 A1 00

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


the bug is related with KEEPALIVE + HTTPS


If we disable keep alive then there is no more problem for 200ok.

/etc/apache2/server-tuning.conf


   105  # KeepAlive: Whether or not to allow persistent connections (more than
   106  # one request per connection). Set to &quot;Off&quot; to deactivate.
   107  #
   108  KeepAlive Off


with  &quot;KeepAlive Off&quot; the problem is solved.



+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>49133</bug_id>
          
          <creation_ts>2010-04-16 05:26:06 +0000</creation_ts>
          <short_desc>Windows service recovery options do not work for Apache service</short_desc>
          <delta_ts>2010-04-16 05:26:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.11</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jiri Banszel">jiri.banszel</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>136193</commentid>
    <comment_count>0</comment_count>
    <who name="Jiri Banszel">jiri.banszel</who>
    <bug_when>2010-04-16 05:26:06 +0000</bug_when>
    <thetext>From time to time we experience Apache server crash on Windows, probably due to #46845. 

That&apos;s why we configured Apache service to restart in case of failure (using tab Recovery on the service properties dialog). However this seems not to work for Apache service, Apache is still down after the crash. 

My guess is that Windows thinks that Apache crash is not a failure but shutdown, perhaps httpd returns 0 exit code in this situation?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>49832</bug_id>
          
          <creation_ts>2010-08-26 16:53:54 +0000</creation_ts>
          <short_desc>void ap_custom_response is not supporting the binary data</short_desc>
          <delta_ts>2010-08-27 02:21:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="amit">amitgandotra02</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>139506</commentid>
    <comment_count>0</comment_count>
    <who name="amit">amitgandotra02</who>
    <bug_when>2010-08-26 16:53:54 +0000</bug_when>
    <thetext>void ap_custom_response (request_rec *r, int status, char *string);

If we need to creat a custome respons with some binary data (for example gif
file) then in that case the third arguement should take the binary stream. But
this is not taking the binary data as third arguement and hence end web client
(browser) is not showing the binary data.

Moreover, content type is always Text/html and content length is seeting wiht
incorrect value</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>49997</bug_id>
          
          <creation_ts>2010-09-24 15:59:48 +0000</creation_ts>
          <short_desc>wrowe promised me...</short_desc>
          <delta_ts>2011-05-18 02:53:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>42848</dependson>
    
    <dependson>48361</dependson>
    
    <dependson>49553</dependson>
    
    <dependson>49980</dependson>
    
    <dependson>49981</dependson>
    
    <dependson>49996</dependson>
    
    <dependson>51019</dependson>
    
    <dependson>51215</dependson>
          <blocked>47418</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="William A. Rowe Jr.">wrowe</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>philipp</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>140144</commentid>
    <comment_count>0</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2010-09-24 15:59:48 +0000</bug_when>
    <thetext>This is a tracking bug.  As this is my tracking bug, I will unilaterally remove and add bugs at [my own] will; please, do not replace bugs I have deliberately removed without clearing it with me personally.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>140153</commentid>
    <comment_count>1</comment_count>
    <who name="Philip Prindeville">philipp</who>
    <bug_when>2010-09-24 17:38:42 +0000</bug_when>
    <thetext>Adding:

add IP TOS support to apr_socket_opt_set()
Add global server option for specifying desired DSCP/QoS markings
Set QoS bits via APR2 API instead

It&apos;s a diffserv-a-palooza!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>140229</commentid>
    <comment_count>2</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2010-09-27 12:09:23 +0000</bug_when>
    <thetext>Dropping 49866 - anyone can touch this issue, not specific to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>146222</commentid>
    <comment_count>3</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2011-05-09 16:46:05 +0000</bug_when>
    <thetext>More to review</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>50011</bug_id>
          
          <creation_ts>2010-09-27 10:14:30 +0000</creation_ts>
          <short_desc>error running apache, and installing apache as a service</short_desc>
          <delta_ts>2010-09-27 10:33:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>ErrorMessage</keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jamison">blackdragons13</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>blackdragons13</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>140220</commentid>
    <comment_count>0</comment_count>
    <who name="Jamison">blackdragons13</who>
    <bug_when>2010-09-27 10:14:30 +0000</bug_when>
    <thetext>First trying to install apache 2.2 as a service it comes up with this &quot;the service name is invalid.&quot;
More help is available by typing net helpmsg 2185
if researched the sh** out of that and its like no one else with windows 7 is having this issue 




Second running apache everytime I run it as administrator it comes up with this the system cannot find the path specified and I cannot figure out what im doing wrong with it, but when I dont run it as administrator it comes up with this
&quot;&lt;os 10048&gt; only one usage of each sock address &lt;protocol/network address/port&gt;
is normally permitted. : make_sock: could not bind to address 0.0.0.0:80 no listening sockets available, shutting down
unable to open logs&quot;


please give me any information you guys got about what may be causing this and how I could possibly fix this, it has been so frustrating reading all these posts that I thought were related to the issues and only coming to find out after 30 minutes read that it has nothing to do with apache and some other stupid program that comes up with similar issues.... so please any help would be highly appreciated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>140221</commentid>
    <comment_count>1</comment_count>
      <attachid>26084</attachid>
    <who name="Jamison">blackdragons13</who>
    <bug_when>2010-09-27 10:30:45 +0000</bug_when>
    <thetext>Created attachment 26084
apache error log.

here is the log to what ive been trying to run</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>140222</commentid>
    <comment_count>2</comment_count>
      <attachid>26085</attachid>
    <who name="Jamison">blackdragons13</who>
    <bug_when>2010-09-27 10:31:46 +0000</bug_when>
    <thetext>Created attachment 26085
apache error log.

second apache error log for other one I am trying to get running also.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>26084</attachid>
            <date>2010-09-27 10:30:45 +0000</date>
            <delta_ts>2010-09-27 10:30:45 +0000</delta_ts>
            <desc>apache error log.</desc>
            <filename>error.log</filename>
            <type>application/octet-stream</type>
            <size>545623</size>
            <attacher name="Jamison">blackdragons13</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>26085</attachid>
            <date>2010-09-27 10:31:46 +0000</date>
            <delta_ts>2010-09-27 10:31:46 +0000</delta_ts>
            <desc>apache error log.</desc>
            <filename>error.log</filename>
            <type>application/octet-stream</type>
            <size>2716</size>
            <attacher name="Jamison">blackdragons13</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>50038</bug_id>
          
          <creation_ts>2010-10-01 11:10:30 +0000</creation_ts>
          <short_desc>What Directives apply to a file/directory? Resultant set of directives</short_desc>
          <delta_ts>2010-10-02 13:57:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>esor.ekim</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>140375</commentid>
    <comment_count>0</comment_count>
    <who name="">esor.ekim</who>
    <bug_when>2010-10-01 11:10:30 +0000</bug_when>
    <thetext>Hello,

I&apos;ve worked as a sysadmin with the Apache web-server for a few years.
Often I want to know what set of apache directives are being applied
to a file and/or directory. Sometimes because of error reports and
often because the behaviour is not what I want. With experience I
think I&apos;ve learned better how to configure apache httpd, however I
still run into situations where I really want to know what apache is
doing to server a particular file.

I want to be able to find out what set of directives apache is applying to a piece of content when it is served.

I&apos;ve asked around and searched for something that will do this and not
found anything. Maybe I&apos;m missing something...

If not then this might be a good piece of functionality to add to apache for a future release.

regards,

Mike.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>50041</bug_id>
          
          <creation_ts>2010-10-04 03:28:41 +0000</creation_ts>
          <short_desc>(9)Bad file descriptor: apr_socket_accept: (client socket) on graceful restart</short_desc>
          <delta_ts>2012-02-15 04:10:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.16</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rowan Wookey">admin</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>apache025</cc>
          
          <votes>4</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>140422</commentid>
    <comment_count>0</comment_count>
    <who name="Rowan Wookey">admin</who>
    <bug_when>2010-10-04 03:28:41 +0000</bug_when>
    <thetext>When running apachectl -k restart the following error appears in the error log, no other adverse side effects are noticed. 

httpd is compiled from source.

Loaded Modules:
 core_module (static)
 mpm_prefork_module (static)
 http_module (static)
 so_module (static)
Syntax OK


I&apos;ve tested this on 3 machines one running ubuntu 9.04 one ubuntu 9.10 and one running 10.04.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>151887</commentid>
    <comment_count>1</comment_count>
    <who name="">apache025</who>
    <bug_when>2011-12-01 06:20:17 +0000</bug_when>
    <thetext>I get the same error consistently when doing a graceful restart (which I do in order to update a downloaded CRL file).

I am running Apache 2.2.16 on a Debian squeeze system.

Here is the version string:
Apache/2.2.16 (Debian) PHP/5.3.3-7+squeeze3 with Suhosin-Patch mod_ssl/2.2.16 OpenSSL/0.9.8o WebAuth/3.7.3 configured</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>153793</commentid>
    <comment_count>2</comment_count>
    <who name="Takashi Sato">takashi.asfbugzilla</who>
    <bug_when>2012-02-15 04:10:01 +0000</bug_when>
    <thetext>Is this the same issue as bug #49058 ?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>50530</bug_id>
          
          <creation_ts>2010-12-29 17:28:13 +0000</creation_ts>
          <short_desc>Provide rate limiting for failed authentication attempts</short_desc>
          <delta_ts>2010-12-29 17:28:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stefan Fritsch">sf</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>142990</commentid>
    <comment_count>0</comment_count>
    <who name="Stefan Fritsch">sf</who>
    <bug_when>2010-12-29 17:28:13 +0000</bug_when>
    <thetext>It would be nice if there was a way to limit the rate at which a client may retry authentication if the password was wrong. This would make brute forcing harder.

Maybe such a function could be integrated into mod_authn_socache</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>51542</bug_id>
          
          <creation_ts>2011-07-22 12:21:28 +0000</creation_ts>
          <short_desc>Apache HTTP Server vs PVS-Studio</short_desc>
          <delta_ts>2011-09-19 21:25:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.19</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrey Karpov">karpov</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>148082</commentid>
    <comment_count>0</comment_count>
    <who name="Andrey Karpov">karpov</who>
    <bug_when>2011-07-22 12:21:28 +0000</bug_when>
    <thetext>I&apos;ve tested the our PVS-Studio analyzer with the projects Apache. While analyzing this project I&apos;ve found some mistakes and decided to mention it. Hope it will come in handy.

See also this article: http://www.viva64.com/en/b/0105/

Bugs:

V501 There are identical sub-expressions &apos;state == rsl_encoding&apos; to the left and to the right of the &apos;||&apos; operator. mod_mime_magic mod_mime_magic.c 787

static int magic_rsl_to_request(request_rec *r)
{
  ...
  if (state == rsl_subtype || state == rsl_encoding ||
      state == rsl_encoding) {
  ...
}

Need:
if (state == rsl_subtype || state == rsl_separator ||
    state == rsl_encoding) {

---------------------------------------------------------------
V512 A call of the &apos;memset&apos; function will lead to underflow of the buffer &apos;(context)&apos;. apr sha2.c 560

#define MEMSET_BZERO(p,l)       memset((p), 0, (l))

void apr__SHA256_Final(sha2_byte digest[], SHA256_CTX* context) {
  ...
  MEMSET_BZERO(context, sizeof(context));
  ...
}

And here:
False 1 902 V512 A call of the &apos;memset&apos; function will lead to underflow of the buffer &apos;(context)&apos;. apr sha2.c 581 False
False 1 916 V512 A call of the &apos;memset&apos; function will lead to underflow of the buffer &apos;(context)&apos;. apr sha2.c 892 False
False 1 917 V512 A call of the &apos;memset&apos; function will lead to underflow of the buffer &apos;(context)&apos;. apr sha2.c 912 False
False 1 918 V512 A call of the &apos;memset&apos; function will lead to underflow of the buffer &apos;(context)&apos;. apr sha2.c 967 False
False 1 919 V512 A call of the &apos;memset&apos; function will lead to underflow of the buffer &apos;(context)&apos;. apr sha2.c 987 False
---------------------------------------------------------------
V527 It is odd that the &apos;\0&apos; value is assigned to &apos;char&apos; type pointer. Probably meant: *tag-&gt;arg = &apos;\0&apos;. mod_headers mod_headers.c 330

typedef struct {
    const char* (*func)(request_rec *r,char *arg);
    char *arg;
} format_tag;

static char *parse_format_tag(apr_pool_t *p, format_tag *tag, const char **sa)
{
  ...
  tag-&gt;arg = &apos;\0&apos;;
  ...
}

Need:
tag-&gt;arg = NULL;
Or:
tag-&gt;arg[0] = &apos;\0&apos;;

---------------------------------------------------------------
V532 Consider inspecting the statement of &apos;*pointer++&apos; pattern. Probably meant: &apos;(*pointer)++&apos;. apriconv iconv_uc.c 114

apr_status_t
iconv_uc_conv(..., apr_size_t *res)
{
  ...
  if (size)
    *res ++;
  ...
}

Need: (*res)++;
---------------------------------------------------------------
V547 Expression &apos;len &lt; 0&apos; is always false. Unsigned type value is never &lt; 0. aprutil apr_memcache.c 814

typedef  size_t      apr_size_t;

APU_DECLARE(apr_status_t) apr_memcache_getp(...)
{
  ...
  apr_size_t len = 0;
  ...
  len = atoi(length);
  ...
  if (len &lt; 0) {
    *new_length = 0;
    *baton = NULL;
  }
  else {
    ...  
  }
}
---------------------------------------------------------------
V547 Expression &apos;csd &lt; 0&apos; is always false. Unsigned type value is never &lt; 0. libhttpd child.c 404

typedef UINT_PTR SOCKET;

static unsigned int __stdcall win9x_accept(void * dummy)
{
  SOCKET csd;
  ...
  do {
      clen = sizeof(sa_client);
      csd = accept(nsd, (struct sockaddr *) &amp;sa_client, &amp;clen);
  } while (csd &lt; 0 &amp;&amp; APR_STATUS_IS_EINTR(apr_get_netos_error()));
  ...
}
---------------------------------------------------------------
V560 A part of conditional expression is always true: 0x04. pcre pcre.c 3366

static BOOL
compile_branch(...)
{
  ...
  else if ((digitab[ptr[1]] &amp;&amp; ctype_digit) != 0)
  ...
}

Need:
else if ((digitab[ptr[1]] &amp; ctype_digit) != 0)
---------------------------------------------------------------
V568 It&apos;s odd that the argument of sizeof() operator is the &apos;sizeof (SECURITY_ATTRIBUTES)&apos; expression. libhttpd util_win32.c 115

PSECURITY_ATTRIBUTES GetNullACL(void)
{
  PSECURITY_ATTRIBUTES sa;

  sa  = (PSECURITY_ATTRIBUTES) LocalAlloc(LPTR, sizeof(SECURITY_ATTRIBUTES));
  sa-&gt;nLength = sizeof(sizeof(SECURITY_ATTRIBUTES));
  ...
}

Need: 
sa-&gt;nLength = sizeof(SECURITY_ATTRIBUTES);
---------------------------------------------------------------
V579 The apr_snprintf function receives the pointer and its size as arguments. It is possibly a mistake. Inspect the second argument. libhttpd util_pcre.c 85

AP_DECLARE(apr_size_t) ap_regerror(int errcode, const ap_regex_t *preg,
                                   char *errbuf, apr_size_t errbuf_size)
{
  ...
  apr_snprintf(errbuf, sizeof errbuf,
               &quot;%s%s%-6d&quot;, message, addmessage, (int)preg-&gt;re_erroffset);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>148086</commentid>
    <comment_count>1</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2011-07-22 14:13:23 +0000</bug_when>
    <thetext>Very cool/thanks for the report!
(child.c 404 is already fixed, but the others aren&apos;t familiar)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>149500</commentid>
    <comment_count>2</comment_count>
    <who name="Stefan Fritsch">sf</who>
    <bug_when>2011-09-19 18:05:38 +0000</bug_when>
    <thetext>- util_pcre.c 85 already fixed in r1095448
- other HTTPD issues fixed in trunk in r1172732
- the APR parts still need to be checked</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>149506</commentid>
    <comment_count>3</comment_count>
    <who name="Stefan Fritsch">sf</who>
    <bug_when>2011-09-19 21:25:51 +0000</bug_when>
    <thetext>- fixed apr sha2.c issue in 1172825, r1172828, r1172829
- apr memcache issue already fixed in trunk in r982408, r982409
- Checked that the pcre issue is fixed in 8.12

Can somebody look at iconv_uc.c?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>51679</bug_id>
          
          <creation_ts>2011-08-18 13:29:47 +0000</creation_ts>
          <short_desc>Code signature key expired</short_desc>
          <delta_ts>2011-08-18 13:29:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.19</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brunzema">reinhard.brunzema</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>148685</commentid>
    <comment_count>0</comment_count>
    <who name="Brunzema">reinhard.brunzema</who>
    <bug_when>2011-08-18 13:29:47 +0000</bug_when>
    <thetext>The signing key for httpd-2.2.19.tar.gz.asc seems to have expired:

gpg -v --verify httpd-2.2.19.tar.gz.asc
gpg: armor header: Version: GnuPG v1.4.9 (GNU/Linux)
gpg: assuming signed data in `httpd-2.2.19.tar.gz&apos;
gpg: Signature made Fri 20 May 2011 07:02:24 PM CEST using RSA key ID 7F7214A7
                                                                      ^^^^^^^^
gpg: NOTE: signature key CB9B9EC5 expired Fri 03 Jul 2009 05:21:46 PM CEST
gpg: NOTE: signature key 7F7214A7 expired Sat 09 Jul 2011 02:54:10 AM CEST
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
gpg: using subkey 7F7214A7 instead of primary key B55D9977
gpg: NOTE: signature key 7F7214A7 expired Sat 09 Jul 2011 02:54:10 AM CEST
gpg: NOTE: signature key CB9B9EC5 expired Fri 03 Jul 2009 05:21:46 PM CEST
gpg: NOTE: signature key 7F7214A7 expired Sat 09 Jul 2011 02:54:10 AM CEST
gpg: using PGP trust model
gpg: Good signature from &quot;William A. Rowe, Jr. &lt;wrowe@rowe-clan.net&gt;&quot;
gpg:                 aka &quot;William A. Rowe, Jr. &lt;wrowe@apache.org&gt;&quot;
gpg:                 aka &quot;William A. Rowe, Jr. &lt;wrowe@vmware.com&gt;&quot;
gpg:                 aka &quot;William A. Rowe, Jr. &lt;william.rowe@springsource.com&gt;&quot;
gpg: NOTE: signature key CB9B9EC5 expired Fri 03 Jul 2009 05:21:46 PM CEST
gpg: NOTE: signature key 7F7214A7 expired Sat 09 Jul 2011 02:54:10 AM CEST
gpg: Note: This key has expired!
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Primary key fingerprint: B1B9 6F45 DFBD CCF9 7401  9235 193F 180A B55D 9977
     Subkey fingerprint: 4962 0827 E32B C882 DC6B  EF54 A348 B984 7F72 14A7
gpg: binary signature, digest algorithm SHA1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>51695</bug_id>
          
          <creation_ts>2011-08-20 06:14:17 +0000</creation_ts>
          <short_desc>Code clean up (ap_rputs merge)</short_desc>
          <delta_ts>2013-12-06 20:53:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>PatchAvailable</keywords>
          <priority>P2</priority>
          <bug_severity>trivial</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christophe JAILLET">christophe.jaillet</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>148721</commentid>
    <comment_count>0</comment_count>
      <attachid>27413</attachid>
    <who name="Christophe JAILLET">christophe.jaillet</who>
    <bug_when>2011-08-20 06:14:17 +0000</bug_when>
    <thetext>Created attachment 27413
Proposed patch

Hi,

the proposed patch cleans up a little a few files :

- modules/ldap/util_ldap.c : merge adjacent ap_rputs calls

- modules/ssl/ssl_scache.c : idem
BTW, why does the 4th line of this hunk ends with a \r instead of a \n as the others ?

- modules/proxy/mod_proxy_balancer.c : idem + merge some adjacent ap_rvputs calls

- modules/cache/mod_socache_dbm.c : merge soma adjacent ap_rprintf calls


Best regards,
Christophe JAILLET</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>27413</attachid>
            <date>2011-08-20 06:14:17 +0000</date>
            <delta_ts>2013-12-06 20:53:31 +0000</delta_ts>
            <desc>Proposed patch</desc>
            <filename>cleanup.diff</filename>
            <type>text/plain</type>
            <size>5498</size>
            <attacher name="Christophe JAILLET">christophe.jaillet</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>52248</bug_id>
          
          <creation_ts>2011-11-26 13:07:52 +0000</creation_ts>
          <short_desc>Bugzilla version drop-down list does not offer &quot;unknown&quot;</short_desc>
          <delta_ts>2011-11-26 21:59:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sebb">sebb</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>151801</commentid>
    <comment_count>0</comment_count>
    <who name="Sebb">sebb</who>
    <bug_when>2011-11-26 13:07:52 +0000</bug_when>
    <thetext>The Bugzilla version drop-down box does not offer an &quot;unknown&quot; setting.

This would be useful for some modules, e.g. mod_mbox, which are not part of the httpd distribution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>151805</commentid>
    <comment_count>1</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2011-11-26 21:59:11 +0000</bug_when>
    <thetext>Question; should subprojects really be components?  Or are mod_mbox, mod_fcgid
and mod_ftp actually products?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>52417</bug_id>
          
          <creation_ts>2012-01-03 17:51:49 +0000</creation_ts>
          <short_desc>HEADERS information in the file</short_desc>
          <delta_ts>2012-01-03 17:51:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.15</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Carlos B.">cbustamantem</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>152554</commentid>
    <comment_count>0</comment_count>
      <attachid>28117</attachid>
    <who name="Carlos B.">cbustamantem</who>
    <bug_when>2012-01-03 17:51:49 +0000</bug_when>
    <thetext>Created attachment 28117
Httpd Config File

Greetings.

 I have recently installed the last distribution of Centos 6 by default with apache httpd-2.2.15-15.el6.centos.i686, but when i see the code of a javascript file,the apache output the headers of the file inside the code,

This is what i see when i browse http://localhost/js/jquery-1.4.4.min.js

T§ñ&amp;D‡üî-BE„Ê´@@À¨À¨P¼åŠ¹~ÌNÿ€nƒZ
|sÎ•‡âHTTP/1.1 200 OK
Date: Tue, 03 Jan 2012 17:37:47 GMT
Server: Apache
Last-Modified: Mon, 15 Nov 2010 11:59:26 GMT
ETag: &quot;781118-13309-495162bf2e380&quot;
Accept-Ranges: bytes
Content-Length: 78601
Connection: close
Content-Type: text/javascript

/*!
 * jQuery JavaScript Library v1.4.4
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 11 19:04:53 2010 -0500
 */
(function(E,B){function ka(a,b,d){if(d===B&amp;&amp;a.

Inside the javascript code, the apache print the headers banners of the file, 

this is a bug? or what can i do to remove the headers.

Chears!</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>28117</attachid>
            <date>2012-01-03 17:51:49 +0000</date>
            <delta_ts>2012-01-03 17:51:49 +0000</delta_ts>
            <desc>Httpd Config File</desc>
            <filename>httpd (1).conf</filename>
            <type>application/octet-stream</type>
            <size>35146</size>
            <attacher name="Carlos B.">cbustamantem</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>52481</bug_id>
          
          <creation_ts>2012-01-18 07:48:19 +0000</creation_ts>
          <short_desc>Rotatelog.exe crashes Apache after setting 256MB rotatation limit</short_desc>
          <delta_ts>2012-01-18 23:44:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.21</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Benny">jmbenny</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>152871</commentid>
    <comment_count>0</comment_count>
    <who name="Benny">jmbenny</who>
    <bug_when>2012-01-18 07:48:19 +0000</bug_when>
    <thetext>We found that the rotatelog.exe will crash apache give the following settings under httpd.conf

CustomLog &apos;|&quot; &quot;*Apache-Path/bin/rotatelogs.exe&quot; &quot;*Apache-Path/logs/backup/internet_access_%d-%m-%y.log&quot; 86400 256M&apos; combined


The apache hanged after a 15mins stress test with 50 robots.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>152895</commentid>
    <comment_count>1</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2012-01-18 16:36:19 +0000</bug_when>
    <thetext>&gt; The apache hanged after a 15mins stress test with 50 robots.

A crash is one thing, a hang is quite another.  Did the error log have anything about a child process exiting and being restarted?

Secondly, what files (and sizes) had been created or written to by rotatelogs at the time the hang was detected?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>152897</commentid>
    <comment_count>2</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2012-01-18 16:54:04 +0000</bug_when>
    <thetext>Isn&apos;t the syntax wrong, it has time and size.  So maybe some buffer gets full trying to write to the piped logger that is never able to init enough to read lines.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>152899</commentid>
    <comment_count>3</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2012-01-18 17:29:28 +0000</bug_when>
    <thetext>That&apos;s right about the syntax; &quot;256M&quot; is taken as the UTC offset.

Benny, please fix the syntax (leave only the rotation time OR the rotation size) and see how that works.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>152908</commentid>
    <comment_count>4</comment_count>
    <who name="Rainer Jung">rainer.jung</who>
    <bug_when>2012-01-18 23:44:15 +0000</bug_when>
    <thetext>Just in case there is confusion: Apache 2.2 only allows one of the two rotation rules, either size or time based, as stated by Eric and Jeff.

Apache 2.4 allows to combine both, i.e. what ever happens first will rotate the file. One of the small nice things coming with 2.4. Though this ticket was opened against 2.2, so yes: please fix your config and try again.

If the problem happens again, please see the questions of Jeff in Comment #1.

Rainer</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>52501</bug_id>
          
          <creation_ts>2012-01-23 13:07:11 +0000</creation_ts>
          <short_desc>child pid 10824 exit signal Segmentation fault (11), possible coredump</short_desc>
          <delta_ts>2012-02-08 13:16:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.20</version>
          <rep_platform>Sun</rep_platform>
          <op_sys>Solaris</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="aks">akshay.ballarpure</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>akshay.ballarpure</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>153046</commentid>
    <comment_count>0</comment_count>
    <who name="aks">akshay.ballarpure</who>
    <bug_when>2012-01-23 13:07:11 +0000</bug_when>
    <thetext># /usr/bin/adb core_kddi-fm-1_httpd_0_0_10824_1327197627
core file = core_kddi-fm-1_httpd_0_0_10824_1327197627 -- program ``
/motorola/apps/mofm/fmserver-5.0.1.10.05/apache2_cgems/bin/httpd&apos;&apos; on platform SUNW,Netra-T5440
SIGSEGV: Segmentation Fault

::stack
libc.so.1`fork+0x124(0, 0, 0, 0, fefb5960, fefd2a00)
make_child+0x88(4d800, 4f, 4, 99, 77000, 78400)
ap_mpm_run+0x91c(78400, 78400, 98, 78400, 78800, 78400)
main+0x78c(83430, 76000, 77c00, 77c00, 81428, 0)
_start+0x5c(0, 0, 0, 0, 0, 0)

::regs
%g0 = 0x0000000000000000                 %l0 = 0xfdad0518 
%g1 = 0x0000000000000014                 %l1 = 0x00000000 
%g2 = 0x0000000000000001                 %l2 = 0xfefb5940 libc.so.1`_uberdata+0x40
%g3 = 0x0000000000000e78                 %l3 = 0xfdad67c0 
%g4 = 0x00000000696ca936                 %l4 = 0x00001cf0 
%g5 = 0x00006e656374696f                 %l5 = 0x00001c00 
%g6 = 0x0000000000000000                 %l6 = 0x00000000 
%g7 = 0x00000000fefd2a00                 %l7 = 0x00000000 
%o0 = 0x0000000000002a48                 %i0 = 0x00000000 
%o1 = 0x0000000000000868                 %i1 = 0x00000000 
%o2 = 0x0000000000001ccc                 %i2 = 0x00000000 
%o3 = 0x00000000fefd2a00                 %i3 = 0x00000000 
%o4 = 0x00000000fefb5900 libc.so.1`_uberdata %i4 = 0xfefb5960 libc.so.1`_uberdata+0x60
%o5 = 0x0000000000001c00                 %i5 = 0xfefd2a00 
%o6 = 0x00000000ffbff9d8                 %i6 = 0xffbffa38 
%o7 = 0x00000000fef3b794 libc.so.1`fork+0x120 %i7 = 0x0004e0d8 make_child+0x88

%psr = 0xfe401003 impl=0xf ver=0xe icc=nZvc
                   ec=0 ef=4096 pil=0 s=0 ps=0 et=0 cwp=0x3
   %y = 0x000000c0
  %pc = 0xfef3b798 libc.so.1`fork+0x124
%npc = 0xfef4215c libc.so.1`unregister_locks
  %sp = 0xffbff9d8
  %fp = 0xffbffa38

%wim = 0x00000000



=============================================================================

# ./httpd -v
Server version: Apache/2.2.20 (Unix)
Server built:   Sep 14 2011 15:01:28</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>153589</commentid>
    <comment_count>1</comment_count>
    <who name="karen ezzo">karen.l.ezzo</who>
    <bug_when>2012-02-08 13:15:09 +0000</bug_when>
    <thetext>Also, I noted that the coredumps started happening in midp-November 2011, even though Apache had been running w/no problem since Sept 2011. In mid-November, I had installed AWstats 7.0. I am suspecting that could be related to the issue but have not been able to find any proof and/or solution, if so.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>153590</commentid>
    <comment_count>2</comment_count>
    <who name="karen ezzo">karen.l.ezzo</who>
    <bug_when>2012-02-08 13:16:13 +0000</bug_when>
    <thetext>Please disregard the last note - i attached it to the wrong bug #</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>52510</bug_id>
          
          <creation_ts>2012-01-23 19:58:18 +0000</creation_ts>
          <short_desc>Segmentation Fault 11</short_desc>
          <delta_ts>2012-09-12 13:08:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.22</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="karen ezzo">karen.l.ezzo</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>153076</commentid>
    <comment_count>0</comment_count>
    <who name="karen ezzo">karen.l.ezzo</who>
    <bug_when>2012-01-23 19:58:18 +0000</bug_when>
    <thetext>I am experiencing a very similar problem to bug 48030 but I am on apache 2.2.17. I have been the following messages in the error_log:
[Thu Jan 12 09:23:12 2012] [notice] child pid 16000 exit signal Segmentation
fault (11), possible coredump in /usr/local/apache2/

I am relatively new to troubleshooting apache but did manage to run a coredump
file thru gdb. However, my output is different than previous posts:

gdb /usr/local/apache2/bin/httpd core_UWB00022_httpd_1_12_1326415454_437
GNU gdb 6.8
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;sparc-sun-solaris2.10&quot;...
.
.
Core was generated by `/usr/local/apache2/bin/httpd -k start&apos;.
Program terminated with signal 11, Segmentation fault.
[New process 65973    ]
#0  0xfe1655ec in ?? ()
(gdb) where
#0  0xfe1655ec in ?? ()
#1  0xfed91804 in ?? ()
Backtrace stopped: previous frame identical to this frame (corrupt stack?)
(gdb)
...........
I have upgraded the apr 1.4.5 but am still experiencing the same issue:

viis_ops@UWB00022:/export/home/viis_ops&gt;apr-1-config --version
1.4.5
viis_ops@UWB00022:/export/home/viis_ops&gt;

gdb /usr/local/apache2/bin/httpd core_UWB00022_httpd_1_12_1327342375_21113
GNU gdb 6.8
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;sparc-sun-solaris2.10&quot;...
.
.
.
.
Core was generated by `/usr/local/apache2/bin/httpd -k start&apos;.
Program terminated with signal 11, Segmentation fault.
[New process 86649    ]
#0  0xfe1655ec in ?? ()
(gdb) where
#0  0xfe1655ec in ?? ()
#1  0xfec81804 in ?? ()
Backtrace stopped: previous frame identical to this frame (corrupt stack?)
(gdb)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>153077</commentid>
    <comment_count>1</comment_count>
    <who name="karen ezzo">karen.l.ezzo</who>
    <bug_when>2012-01-23 19:59:28 +0000</bug_when>
    <thetext>Also wanted to sumbit this pstack result from today:

pstack 23794
23794:  /usr/local/apache2/bin/httpd -k start
-----------------  lwp# 1 / thread# 1  --------------------
 feecd284 pollsys  (ffbfef90, 1, ffbfef28, 0)
 fee63adc poll     (ffbfef90, 1, 493e0, 10624c00, 0, 0) + 7c
 ff21fe7c apr_wait_for_io_or_timeout (d, ffbfef90, 1, 0, ffbff350, 208) + 48
 ff218dc4 apr_socket_recv (3af760, 51d698, ffbff0f8, 24d4ac, 370, 24d698) + 28
 ff346c00 socket_bucket_read (3d9d98, ffbff0fc, ffbff0f8, 0, 0, ff346bb8) + 48
 00065ed4 ap_core_input_filter (0, 5087b0, 0, 0, 0, b) + 200
 000717e8 ap_get_brigade (fffffffe, 5087b0, 0, 0, 0, b) + 34
 00099924 bio_filter_in_read (5223c8, 510cc0, b, 20b800, 99684, 25129c) + 2a0
 000e7768 BIO_read (5223c8, 510cc0, b, 20bbd0, 49, d0b60) + a8
 000adee8 ssl23_read_bytes (522248, b, 1, 0, 3afa58, 2210) + 28
 000ac858 ssl23_get_client_hello (522248, 2001, 1, 25, ffbff350, 0) + 3d8
 000ace4c ssl23_accept (522248, 6000, 1, acc40, acc40, 1f18b8) + 20c
 000b6130 SSL_accept (522248, 457f60, 1e, 3aff20, 3af9f8, 58) + 130
 0009a05c ssl_io_filter_connect (0, 3af9f8, 3afea8, 0, 0, 1) + a0
 0009a724 ssl_io_filter_input (508798, 532650, 506768, 0, 0, 0) + 80
 000717e8 ap_get_brigade (fffffffe, 532650, 1, 0, 0, 0) + 34
 0005b154 ap_rgetline_core (531870, 2000, ffbff6c8, 531858, 0, 532650) + 54
 0005bd2c ap_read_request (531858, 0, 3, 0, 25a760, 3) + 194
 001aebd0 ap_process_http_connection (3af9f8, 3af760, 3af760, 9, 25a760, 294bf0) + 98
 0006e2ac ap_run_process_connection (3af9f8, 3af760, 3af760, 9, 3ad860, 3d97d8) + 3c
 001cc8c4 child_main (0, 1, 25f400, 25fc00, 11177, 25f400) + 434
 001ccb28 make_child (1cc000, 9, 1, 9, 259400, 25f400) + ec
 001cd530 ap_mpm_run (25f400, 25a400, 8, 25f400, 25fc00, 25f400) + 91c
 00054cb0 main     (26a610, 24f800, 259c00, 259c00, 268608, 0) + 784
 0005405c _start   (0, 0, 0, 0, 0, 0) + 5c
-----------------  lwp# 2 / thread# 2  --------------------
 feec9a58 lwp_park (0, fe97ba88, 0)
 feec3aa0 cond_wait_queue (3d9748, 3d9758, fe97ba88, 0, fecae130, 0) + 4c
 feec3ee4 cond_wait_common (3d9748, 3d9758, fe97ba88, 0, 0, 0) + 294
 feec4078 _cond_timedwait (3d9748, 3d9758, fe97bbb0, 0, 0, 0) + 34
 feec416c cond_timedwait (3d9748, 3d9758, fe97bbb0, fe97bc53, fe97bc53, 1) + 14
 feec41ac pthread_cond_timedwait (3d9748, 3d9758, fe97bbb0, 17ec0dd0, 3b9aca00, 3b9ac9ff) + c
 feca1d60 _Z13condTimedwaitI13_pthread_cond14_pthread_mutexEiRT_RT0_m (3d9748, 3d9758, 2710, 0, 3d9758, 23) + b4
 feca14b0 _ZN11jsEventImpl4waitEm (3d9740, 2710, fecc0730, 0, 0, 0) + f0
 fec9f9a0 _ZN12jsThreadImpl6_sleepEm (3a8adc, 2710, fecc0730, fe700000, 0, 0) + 14
 fec9ec2c _ZN8jsThread6_sleepEm (3ac6b0, 2710, fecae128, fecae118, fecae130, 16) + 8
 fec835a4 _ZN12timer_thread7_doWorkEv (3ac6b0, fec83494, fecc0800, 0, fede0200, 1) + 110
 fec9f604 _ZN12jsThreadImpl10EntryPointEPv (3a8ad0, fe97c000, 0, 0, fec9f5ec, 1) + 18
 feec99b8 _lwp_start (0, 0, 0, 0, 0, 0)
root@UWB00022:/#</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>153588</commentid>
    <comment_count>2</comment_count>
    <who name="karen ezzo">karen.l.ezzo</who>
    <bug_when>2012-02-08 13:12:40 +0000</bug_when>
    <thetext>I upgraded to Apache httpd 2.2.22 yesterday but am still experiencing the same error in the log file:
[Mon Feb 06 10:28:11 2012] [notice] child pid 8509 exit signal Segmentation fault (11), possible coredump in /usr/local/apache2/
[Mon Feb 06 10:28:53 2012] [notice] child pid 8508 exit signal Segmentation fault (11), possible coredump in /usr/local/apache2/
[Mon Feb 06 10:28:55 2012] [notice] child pid 8569 exit signal Segmentation fault (11), possible coredump in /usr/local/apache2/

Core was generated by `/usr/local/apache2/bin/httpd -k start&apos;.
Program terminated with signal 11, Segmentation fault.
[New process 74105    ]
#0  0xfe1655ec in ?? ()
(gdb)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>153591</commentid>
    <comment_count>3</comment_count>
    <who name="karen ezzo">karen.l.ezzo</who>
    <bug_when>2012-02-08 13:16:27 +0000</bug_when>
    <thetext>Also, I noted that the coredumps started happening in midp-November 2011, even
though Apache had been running w/no problem since Sept 2011. In mid-November, I
had installed AWstats 7.0. I am suspecting that could be related to the issue
but have not been able to find any proof and/or solution, if so.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>52816</bug_id>
          
          <creation_ts>2012-03-03 22:27:34 +0000</creation_ts>
          <short_desc>Potential segfault in socache_shmcb_create</short_desc>
          <delta_ts>2013-02-18 19:07:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.1</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tianyin Xu">tixu</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>tixu</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>154480</commentid>
    <comment_count>0</comment_count>
    <who name="Tianyin Xu">tixu</who>
    <bug_when>2012-03-03 22:27:34 +0000</bug_when>
    <thetext>In Apache-2.4.1, the mod_dav_fs module has potential bug which may lead to segment fault.

The problem is the use of ap_server_root_relative() which may return a NULL pointer. The current version doesn&apos;t check whether the return value is NULL or not, but directly manipulate on it.

As is known, some misconfigurations may cause ap_server_root_relative() to return a NULL pointer such as using a nonexistent drive letter on Windows (see https://issues.apache.org/bugzilla/show_bug.cgi?id=39722). 


maybe the following patch makes sense?

*** mod_socache_shmcb.c 2012-03-03 14:15:48.010321827 -0800
--- test.c      2012-03-03 14:15:26.537838321 -0800
***************
*** 287,292 ****
--- 287,294 ----

      ctx-&gt;data_file = path = ap_server_root_relative(p, arg);

+     if(!path)
+       return &quot;Invalid cache path&quot;;

      cp = strrchr(path, &apos;(&apos;);
      cp2 = path + strlen(path) - 1;


PS: the &quot;arg&quot; is from the configuration parameter, for example, if you use:

SSLSessionCache        &quot;shmcb:g:\somepath&quot;

The arg is g:\somepath</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165307</commentid>
    <comment_count>1</comment_count>
    <who name="Mike Rumph">mike.rumph</who>
    <bug_when>2013-02-18 17:28:05 +0000</bug_when>
    <thetext>Another instance where a NULL return from the function ap_server_root_relative is ignored is seen in Apache httpd bug 54560:

https://issues.apache.org/bugzilla/show_bug.cgi?id=54560</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165311</commentid>
    <comment_count>2</comment_count>
    <who name="Tianyin Xu">tixu</who>
    <bug_when>2013-02-18 18:06:47 +0000</bug_when>
    <thetext>Hi, Mike,

I remember this bug report is from long ago in httpd-2.4.1.
Did you hit this bug in recent release?

Best,
Tianyin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165312</commentid>
    <comment_count>3</comment_count>
    <who name="Mike Rumph">mike.rumph</who>
    <bug_when>2013-02-18 19:00:59 +0000</bug_when>
    <thetext>(In reply to comment #2)
&gt; Hi, Mike,
&gt; 
&gt; I remember this bug report is from long ago in httpd-2.4.1.
&gt; Did you hit this bug in recent release?
&gt; 
&gt; Best,
&gt; Tianyin

Hello Tianyin,

The code in the ap_process_fnmatch_configs function in server/config.c which ignores a NULL result from ap_server_root_relative is still seen in 2.4-HEAD and 2.5-HEAD.

Please see my description in bug 54560.

Thanks,

Mike Rumph</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165313</commentid>
    <comment_count>4</comment_count>
    <who name="Tianyin Xu">tixu</who>
    <bug_when>2013-02-18 19:07:32 +0000</bug_when>
    <thetext>Got it. Thanks, Mike!

--Tianyin</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>52884</bug_id>
          
          <creation_ts>2012-03-12 09:51:21 +0000</creation_ts>
          <short_desc>&quot;localhost&quot; leads to start failure</short_desc>
          <delta_ts>2012-08-17 14:18:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.1</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tianyin Xu">tixu</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>tixu</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>154819</commentid>
    <comment_count>0</comment_count>
    <who name="Tianyin Xu">tixu</who>
    <bug_when>2012-03-12 09:51:21 +0000</bug_when>
    <thetext>On my computer (Ubuntu 10.04), when listening to &quot;localhost:port&quot; like

Listen localhost:80

Apache-httpd will report the following error and fail to start with the following error messages:

(98)Address already in use: AH00072: make_sock: could not bind to address 127.0.0.1:80
no listening sockets available, shutting down
AH00015: Unable to open logs

This error message is very confusing because 127.0.0.1:80 is not being used at all. Interestingly, if you directly change localhost to 127.0.0.1, i.e., 

Listen 127.0.0.1:80

Then, everything is fine.

By tracing the code, I find the root cause is that the bind() operation is done for two times. And, of course, it failed at the 2nd time because the 1st time it had successed.

Further tracing why it bind() two times, I finally find that it&apos;s because of the function call getaddrinfo() in the function: call_resolver() in srclib/apr/network_io/unix/sockaddr.c

When fed with &quot;localhost&quot;, the result set, i.e., ai_list will have two elements. Thus, Apache tries to bind() based on these two elements and leads to the failure. However, it only has one element when fed with &quot;127.0.0.1&quot;. I have to say this is really a strange behavior.

I don&apos;t know whether this problem happens on the other platform. But if it happens, it really confuses users a lot and takes a lot of time and efforts.

One simple solution is to add a patch that transfer &quot;localhost&quot; to &quot;127.0.0.1&quot; directly in ap_set_listener() in server/listen.c

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>154823</commentid>
    <comment_count>1</comment_count>
    <who name="Stefan Fritsch">sf</who>
    <bug_when>2012-03-12 10:03:56 +0000</bug_when>
    <thetext>This may be related to PR 52709 in APR.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>154861</commentid>
    <comment_count>2</comment_count>
    <who name="Tianyin Xu">tixu</who>
    <bug_when>2012-03-13 00:51:19 +0000</bug_when>
    <thetext>(In reply to comment #1)
&gt; This may be related to PR 52709 in APR.

Thanks, Stefan!

But it seems different with my case. Their case is because of &quot;eth0 as only IPv6&quot;. 

I checked my network configuration. I have both IPv4 &amp; IPv6 for my eth0. I suspected this problem is caused by the IPv6 stuff, but I tested on my colleague&apos;s machine which also has IPv4 &amp; IPv6. On his machine, this problem didn&apos;t exist.

Hmmm... it&apos;s really a strange problem...:( Maybe I should go to bugzilla APR?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>161486</commentid>
    <comment_count>3</comment_count>
    <who name="Joe Orton">jorton</who>
    <bug_when>2012-08-17 14:18:40 +0000</bug_when>
    <thetext>I can reproduce this, it is another weird AI_ADDRCONFIG getaddinfo() thing.

Using people.apache.org/~jorton/gai.c

$ ./gai localhost
getaddrinfo(&quot;localhost&quot;, NULL, {.family=AF_UNSPEC, .hints=0}) = 0:
 family=10, proto= 6 inet6: addr=::1, port=0, flowinfo=0
 family= 2, proto= 6 inet4: addr=127.0.0.1, port=0
$ ./gai -a localhost
getaddrinfo(&quot;localhost&quot;, NULL, {.family=AF_UNSPEC, .hints=0|AI_ADDRCONFIG}) = 0:
 family= 2, proto= 6 inet4: addr=127.0.0.1, port=0
 family= 2, proto= 6 inet4: addr=127.0.0.1, port=0

... where /etc/hosts has both &quot;localhost&quot; and &quot;localhost.domain&quot; mapping to 127.0.0.1.

Google says there is some... &quot;disagreement&quot; about whether this is app/libc/distro problem.  Sigh.  I guess we could work around it in APR by ignoring duplicate addresses.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>52933</bug_id>
          
          <creation_ts>2012-03-17 22:11:04 +0000</creation_ts>
          <short_desc>Child survives &apos;-k stop&apos;, consuming lots of CPU</short_desc>
          <delta_ts>2012-03-29 19:09:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.1</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Petter Berntsen">petterb</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>155006</commentid>
    <comment_count>0</comment_count>
    <who name="Petter Berntsen">petterb</who>
    <bug_when>2012-03-17 22:11:04 +0000</bug_when>
    <thetext>MPM: Event
OS: Amazon Linux AMI release 2011.09 (CentOS)
APR: 1.4.6
APR-UTIL: 1.4.1

Our system is 1 sandbox server, 2 test and 3 prod. It has occured once (one test server). 2.4.1 in use less than a week. Servers are clones. (Actually based on the server in mind.)

Child finally killed with -5.

Post compiled and installed mod_geoip2_1.2.7 + 4 of my own modules.

$ sudo strace -ff -F -s200 -o /tmp/strace.out -p 27203
$ sort /tmp/strace.out.272*
epoll_wait(85, {}, 25, 100)             = 0
epoll_wait(85, {}, 25, 100)             = 0
epoll_wait(85, {}, 25, 100)             = 0
...more of same
futex(0x17a65bc, FUTEX_WAIT_PRIVATE, 41, NULL) = -1 EAGAIN (Resource temporarily unavailable)
futex(0x17a65bc, FUTEX_WAIT_PRIVATE, 43, NULL) = -1 EAGAIN (Resource temporarily unavailable)
futex(0x17a65bc, FUTEX_WAIT_PRIVATE, 45, NULL) = -1 EAGAIN (Resource temporarily unavailable)
...more of same
futex(0x17a65bc, FUTEX_WAIT_PRIVATE, 88, NULL
futex(0x17a65bc, FUTEX_WAIT_PRIVATE, 88, NULL
futex(0x17a65bc, FUTEX_WAIT_PRIVATE, 88, NULL
...more of same
futex(0x7fa11bfe79d0, FUTEX_WAIT, 27284, NULL
gettimeofday({1332018558, 639020}, NULL) = 0
gettimeofday({1332018560, 550880}, NULL) = 0
gettimeofday({1332018560, 550985}, NULL) = 0
...more of same


$ /usr/local/apache2/bin/apachectl -V
Server version: Apache/2.4.1 (Unix)
Server built:   Mar  9 2012 18:36:08
Server&apos;s Module Magic Number: 20120211:0
Server loaded:  APR 1.4.6, APR-UTIL 1.4.1
Compiled using: APR 1.4.6, APR-UTIL 1.4.1
Architecture:   64-bit
Server MPM:     event
  threaded:     yes (fixed thread count)
    forked:     yes (variable process count)
Server compiled with....
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=256
 -D HTTPD_ROOT=&quot;/usr/local/apache2&quot;
 -D SUEXEC_BIN=&quot;/usr/local/apache2/bin/suexec&quot;
 -D DEFAULT_PIDLOG=&quot;logs/httpd.pid&quot;
 -D DEFAULT_SCOREBOARD=&quot;logs/apache_runtime_status&quot;
 -D DEFAULT_ERRORLOG=&quot;logs/error_log&quot;
 -D AP_TYPES_CONFIG_FILE=&quot;conf/mime.types&quot;
 -D SERVER_CONFIG_FILE=&quot;conf/httpd.conf&quot;


$ cat config.nice 
#! /bin/sh
#
# Created by configure

&quot;./configure&quot; \
&quot;--enable-sed&quot; \
&quot;--enable-usertrack&quot; \
&quot;--enable-unique-id&quot; \
&quot;--enable-proxy&quot; \
&quot;--enable-unixd&quot; \
&quot;--enable-rewrite&quot; \
&quot;--with-mpm=event&quot; \
&quot;--with-included-apr&quot; \
&quot;--enable-deflate&quot; \
&quot;--enable-ssl&quot; \
&quot;--enable-log-debug&quot; \
&quot;--enable-log-forensic&quot; \
&quot;--enable-logio&quot; \
&quot;$@&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>155066</commentid>
    <comment_count>1</comment_count>
    <who name="Stefan Fritsch">sf</who>
    <bug_when>2012-03-19 20:00:21 +0000</bug_when>
    <thetext>A stack trace would be much more useful than strace output. Use

$ gdb -p &lt;pid of looping process&gt;

(gdb) thread apply all bt full</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>155069</commentid>
    <comment_count>2</comment_count>
    <who name="Petter Berntsen">petterb</who>
    <bug_when>2012-03-19 20:07:40 +0000</bug_when>
    <thetext>I&apos;ll do that if it happens again.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>155071</commentid>
    <comment_count>3</comment_count>
    <who name="Stefan Fritsch">sf</who>
    <bug_when>2012-03-19 20:20:17 +0000</bug_when>
    <thetext>For completeness: If you had mod_dumpio and DumpIOInput enabled at the time of the problem, this is likely a duplicate of PR 52914.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>155072</commentid>
    <comment_count>4</comment_count>
    <who name="Petter Berntsen">petterb</who>
    <bug_when>2012-03-19 20:26:17 +0000</bug_when>
    <thetext>I had not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>155378</commentid>
    <comment_count>5</comment_count>
    <who name="Petter Berntsen">petterb</who>
    <bug_when>2012-03-29 19:09:12 +0000</bug_when>
    <thetext>It happened again, here&apos;s three gdb screens:


No symbol table info available.
#1  0x0000000000466ad5 in ap_queue_pop_something (queue=0x9ae530, sd=0x7f0336ffce78, ecs=0x7f0336ffce70, p=0x7f0336ffce68, te_out=0x7f0336ffce60) at fdqueue.c:438
        elem = &lt;value optimized out&gt;
        rv = &lt;value optimized out&gt;
#2  0x00000000004644ad in worker_thread (thd=0x9af0a8, dummy=&lt;value optimized out&gt;) at event.c:1702
        ti = &lt;value optimized out&gt;
        process_slot = 0
        thread_slot = 5
        csd = 0x7f0338037600
        cs = 0x7f0338037808
        ptrans = 0x7f0338037578
        rv = &lt;value optimized out&gt;
        is_idle = 1
        te = 0x0
#3  0x00007f03451e27f1 in start_thread () from /lib64/libpthread.so.0
No symbol table info available.
#4  0x00007f0344f1f92d in clone () from /lib64/libc.so.6
No symbol table info available.

Thread 21 (Thread 0x7f03367fc700 (LWP 4357)):
#0  0x00007f03451e63dc in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
No symbol table info available.
#1  0x0000000000466ad5 in ap_queue_pop_something (queue=0x9ae530, sd=0x7f03367fbe78, ecs=0x7f03367fbe70, p=0x7f03367fbe68, te_out=0x7f03367fbe60) at fdqueue.c:438
        elem = &lt;value optimized out&gt;
        rv = &lt;value optimized out&gt;
#2  0x00000000004644ad in worker_thread (thd=0x9af0d8, dummy=&lt;value optimized out&gt;) at event.c:1702
        ti = &lt;value optimized out&gt;
        process_slot = 0
        thread_slot = 6
        csd = 0x7f03380396d0
        cs = 0x0
        ptrans = 0x7f0338039658
        rv = &lt;value optimized out&gt;
        is_idle = 1
        te = 0x0
#3  0x00007f03451e27f1 in start_thread () from /lib64/libpthread.so.0
No symbol table info available.
#4  0x00007f0344f1f92d in clone () from /lib64/libc.so.6
No symbol table info available.

Thread 20 (Thread 0x7f0335ffb700 (LWP 4358)):
#0  0x00007f03451e63dc in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
No symbol table info available.
#1  0x0000000000466ad5 in ap_queue_pop_something (queue=0x9ae530, sd=0x7f0335ffae78, ecs=0x7f0335ffae70, p=0x7f0335ffae68, te_out=0x7f0335ffae60) at fdqueue.c:438
        elem = &lt;value optimized out&gt;
        rv = &lt;value optimized out&gt;
#2  0x00000000004644ad in worker_thread (thd=0x9af108, dummy=&lt;value optimized out&gt;) at event.c:1702
        ti = &lt;value optimized out&gt;
        process_slot = 0
        thread_slot = 7
        csd = 0x7f0338037600
        cs = 0x7f0338037808
        ptrans = 0x7f0338037578
        rv = &lt;value optimized out&gt;
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---

        is_idle = 1
        te = 0x0
#3  0x00007f03451e27f1 in start_thread () from /lib64/libpthread.so.0
No symbol table info available.
#4  0x00007f0344f1f92d in clone () from /lib64/libc.so.6
No symbol table info available.

Thread 19 (Thread 0x7f03357fa700 (LWP 4359)):
#0  apr_file_write (thefile=0x7f031001af78, buf=&lt;value optimized out&gt;, nbytes=&lt;value optimized out&gt;) at file_io/unix/readwrite.c:176
        pos = &lt;value optimized out&gt;
        blocksize = 0
        size = 68
        rv = 0
#1  0x00007f0340b37fb4 in savefiltermethod (f=0x7f0310006a58, bb=0x7f0310007eb8) at ufmodules/mod_savecontent.c:128
        ctxt = 0x7f0310007ed8
        bytes = 68
        buff = 0x7f0310019002 &quot;&lt;html xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot; xml:lang=\&quot;no\&quot; lang=\&quot;no\&quot;&gt;\n&lt;head&gt;\n&lt;title&gt;Panelet Plug&lt;/title&gt;\n&lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=UTF-8\&quot; /&gt; \n\n&lt;style type=\&quot;text/css\&quot;&gt;\n &quot;...
        b = 0x7f0310087a18
        rv = &lt;value optimized out&gt;
#2  0x00007f03433a7c8a in filter_harness (f=0x7f0310006a58, bb=0x7f0310007eb8) at mod_filter.c:313
        ret = &lt;value optimized out&gt;
        cachecontrol = &lt;value optimized out&gt;
        str = &lt;value optimized out&gt;
        ctx = 0x7f0310006af0
        filter = &lt;value optimized out&gt;
#3  0x00007f0340d3ad0a in substitute_filter (f=0x7f0310006a30, bb=0x7f0310007e10) at ufmodules/mod_ouf_substitute.c:566
        bytes = 0
        len = &lt;value optimized out&gt;
        fbytes = 139651759166952
        buff = 0x7f0310019046 &quot;&lt;head&gt;\n&lt;title&gt;Panelet Plug&lt;/title&gt;\n&lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=UTF-8\&quot; /&gt; \n\n&lt;style type=\&quot;text/css\&quot;&gt;\n    \n    body {\n        \n        font-family: Arial, Tahoma, Verdana;&quot;...
        nl = &lt;value optimized out&gt;
        bflat = 0x6b &lt;Address 0x6b out of bounds&gt;
        b = &lt;value optimized out&gt;
        tmp_b = &lt;value optimized out&gt;
        tmp_bb = 0x0
        rv = &lt;value optimized out&gt;
        ctx = 0x7f0310007e30
#4  0x00007f03433a7c8a in filter_harness (f=0x7f0310006a30, bb=0x7f0310007e10) at mod_filter.c:313
        ret = &lt;value optimized out&gt;
        cachecontrol = &lt;value optimized out&gt;
        str = &lt;value optimized out&gt;
        ctx = 0x7f0310006ad8
        filter = &lt;value optimized out&gt;
#5  0x00007f03431a4a0c in substitute_filter (f=0x7f0310006a08, bb=0x7f0310007d90) at mod_substitute.c:511
        bytes = 0
        len = &lt;value optimized out&gt;
        fbytes = 139651130075384
        buff = 0x7f03100199a0 &quot;        &lt;div class=\&quot;question\&quot;&gt;&lt;a href=\&quot;http://politisk.tv2.no//spesial/panelet/sporsmaal/h&quot;
        nl = &lt;value optimized out&gt;
        bflat = 0x1fa0 &lt;Address 0x1fa0 out of bounds&gt;
        b = &lt;value optimized out&gt;
        tmp_b = &lt;value optimized out&gt;
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---

        tmp_bb = 0x0
        rv = &lt;value optimized out&gt;
        ctx = 0x7f0310004898
#6  0x00007f03433a7c8a in filter_harness (f=0x7f0310006a08, bb=0x7f0310007d90) at mod_filter.c:313
        ret = &lt;value optimized out&gt;
        cachecontrol = &lt;value optimized out&gt;
        str = &lt;value optimized out&gt;
        ctx = 0x7f0310006ac0
        filter = &lt;value optimized out&gt;
#7  0x00007f0340933115 in inflate_out_filter (f=0x7f03100069e0, bb=0x7f0310007630) at mod_deflate.c:1316
        rv = &lt;value optimized out&gt;
        data = 0x114630b &quot;&quot;
        b = &lt;value optimized out&gt;
        len = 1093
        zlib_method = &lt;value optimized out&gt;
        zlib_flags = &lt;value optimized out&gt;
        e = 0x7f0310087b58
        r = 0x7f031000aa50
        ctx = 0x7f0310007ce0
        zRC = &lt;value optimized out&gt;
        rv = &lt;value optimized out&gt;
        c = 0x98e478
#8  0x00007f03433a7c8a in filter_harness (f=0x7f03100069e0, bb=0x7f0310007630) at mod_filter.c:313
        ret = &lt;value optimized out&gt;
        cachecontrol = &lt;value optimized out&gt;
        str = &lt;value optimized out&gt;
        ctx = 0x7f0310006aa8
        filter = &lt;value optimized out&gt;
#9  0x00007f0341d68599 in ap_proxy_http_process_response (p=0x7f031000a9d8, r=&lt;value optimized out&gt;, backend_ptr=0x7f03357f9b18, worker=0xa6c4f8, conf=0xa6c268, 
    server_portstr=0x7f03357f9af0 &quot;&quot;) at mod_proxy_http.c:1973
        readbytes = 1103
        rv = &lt;value optimized out&gt;
        mode = &lt;value optimized out&gt;
        finish = 0
        rc = &lt;value optimized out&gt;
        c = 0x7f0338039950
        buffer = &quot;\000\nntent-Encoding\000 gzip\000\nser-Agent\000\n\000\n8\000\n\000\000\000\000!\000\000\000\000\000\000\000\001\000\000\000!&quot;, &apos;\000&apos; &lt;repeats 11 times&gt;, &quot;\001\000\000\000,{\177\065\003\177&quot;, &apos;\000&apos; &lt;repeats 14 times&gt;, &quot;\005\000\000\000\350\220\177\065\003\177\000\000\232\020\335\361\001\000\000\000@\204\226;\000\000\000\000\360\220\177\065\003\177\000\000ӈ\177\065\003\177\000\000\350\220\177\065\003\177\000\000\f\221\177\065\003\177\000\000\060{\177\065\003\177\000\000${\177\065\003\177\000\000\b\221\177\065\003\177\000\000\020{\177\065\003\177\000\000\001\000\000\000\000\b\000\000({\177\065\003\177\000\000 L`t&quot;, &apos;\000&apos; &lt;repeats 12 times&gt;&quot;\370, z\177\065\003\177&quot;...
        buf = &lt;value optimized out&gt;
        keepchar = &lt;value optimized out&gt;
        e = &lt;value optimized out&gt;
        bb = 0x7f0310007630
        tmp_bb = 0x7f0310007678
        pass_bb = 0x7f0310007650
        len = 15
        backasswards = &lt;value optimized out&gt;
        interim_response = 0
        pread_len = &lt;value optimized out&gt;
        save_table = &lt;value optimized out&gt;
        backend_broke = 0
        hop_by_hop_hdrs = {0x7f0341d6a716 &quot;Keep-Alive&quot;, 0x7f0341d6a9c7 &quot;Proxy-Authenticate&quot;, 0x7f0341d6a721 &quot;TE&quot;, 0x7f0341d6a724 &quot;Trailer&quot;, 0x7f0341d6a72c &quot;Upgrade&quot;, 0x0}
        i = &lt;value optimized out&gt;
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>53111</bug_id>
          
          <creation_ts>2012-04-20 06:42:17 +0000</creation_ts>
          <short_desc>1% of CMS sites expose database passwords</short_desc>
          <delta_ts>2012-04-20 06:42:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="D">daw-bugzilla</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>daw-bugzilla</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>158213</commentid>
    <comment_count>0</comment_count>
    <who name="D">daw-bugzilla</who>
    <bug_when>2012-04-20 06:42:17 +0000</bug_when>
    <thetext>As the following article explains, &quot;Nearly 1% of websites built with a content management system (like WordPress or Joomla) are unknowingly exposing their database password to anyone who knows where to look.&quot;

https://www.feross.org/cmsploit/

This is due to a complex interaction between Apache, the user&apos;s text editor, and the way those content management systems are configured.  The root problem is that if the user is editing a file like wp-config.php and the user&apos;s connection drops, then a backup file like wp-config.php~ is saved within the web root.  Apache understands that a .php file should be run, not returned in cleartext; but Apache doesn&apos;t know anything about .php~ files.  Consequently, Apache will return the entire contents of the file, in clear text -- exposing any passwords that may be stored in that file.

I think there is an opportunity for Apache&apos;s default install to help protect against this sort of failure.  And, seeing as today it affects 1% of an important class of web sites, I think that would be a valuable improvement to Apache.

One plausible defense: Apache&apos;s default installation could recognize text editor backup files and could (in its default configuration) refuse to serve them.

A simple approximation at this would be to add .php~, .php#, cgi~, .cgi#, .save, .swp, swo to the list of recognized extensions, and refuse to serve files with that extension (in Apache&apos;s default configuration).  Basically, this is building a blacklist of files that Apache is not going to serve (in its default configuration).

As a variant on this idea, the essay above suggests a rule like this:

&lt;Files ~ “(^#.*#|~|\.sw[op])$”&gt;
Order allow,deny
Deny from all
&lt;/Files&gt;

See also:

http://nmap.org/nsedoc/scripts/http-config-backup.html
http://wordpress.org/support/topic/attack-against-wp-configphp-with-a-tilde
http://blog.tigertech.net/posts/wordpress-security-thoughts/</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>53239</bug_id>
          
          <creation_ts>2012-05-16 08:33:09 +0000</creation_ts>
          <short_desc>Httpd has problems delivering data on rate-limited line</short_desc>
          <delta_ts>2012-09-25 10:39:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bjørnar Ness">bjornar.ness</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>bjornar.ness</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>159084</commentid>
    <comment_count>0</comment_count>
    <who name="Bjørnar Ness">bjornar.ness</who>
    <bug_when>2012-05-16 08:33:09 +0000</bug_when>
    <thetext>Running httpd in a vm behind a rate-limited (tc, ingress 500kbps, 50kB burst) line, httpd has problems delivering the data in time. If burst is set to more than the actual data needed, everything is fine, but when burst is 50kB for example, and total data is ~150kB, it transfers the first ~50kB quickly, and then goes in for a huge lag (maby 20 secs) before transferring the rest slowly. No memory or cpu restrictions. scp/ftp/lighttpd/nginx tested on the same vm with the same (and much lower) shaping, and works as expected. Response time of httpd is fine, its the transfer that seems to have a bug in it.

Using event model.


Server version: Apache/2.5.0-dev (Unix)
Server built:   May 16 2012 09:35:37
Server&apos;s Module Magic Number: 20120211:3
Server loaded:  APR 2.0.0-dev
Compiled using: APR 2.0.0-dev
Architecture:   64-bit
Server MPM:     event
  threaded:     yes (fixed thread count)
    forked:     yes (variable process count)
Server compiled with....
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=256
 -D HTTPD_ROOT=&quot;/opt/apache&quot;
 -D SUEXEC_BIN=&quot;/opt/apache/bin/suexec&quot;
 -D DEFAULT_PIDLOG=&quot;logs/httpd.pid&quot;
 -D DEFAULT_SCOREBOARD=&quot;logs/apache_runtime_status&quot;
 -D DEFAULT_ERRORLOG=&quot;logs/error_log&quot;
 -D AP_TYPES_CONFIG_FILE=&quot;conf/mime.types&quot;
 -D SERVER_CONFIG_FILE=&quot;conf/httpd.conf&quot;


Compiled in modules:
  core.c
  mod_authn_file.c
  mod_authn_dbm.c
  mod_authn_anon.c
  mod_authn_dbd.c
  mod_authn_socache.c
  mod_authn_core.c
  mod_authz_host.c
  mod_authz_groupfile.c
  mod_authz_user.c
  mod_authz_dbm.c
  mod_authz_owner.c
  mod_authz_dbd.c
  mod_authz_core.c
  mod_access_compat.c
  mod_auth_basic.c
  mod_auth_form.c
  mod_auth_digest.c
  mod_allowmethods.c
  mod_apreq2.c
  mod_file_cache.c
  mod_cache.c
  mod_cache_disk.c
  mod_socache_shmcb.c
  mod_socache_dbm.c
  mod_socache_memcache.c
  mod_so.c
  mod_watchdog.c
  mod_dbd.c
  mod_dumpio.c
  mod_firehose.c
  mod_echo.c
  mod_buffer.c
  mod_data.c
  mod_ratelimit.c
  mod_reqtimeout.c
  mod_ext_filter.c
  mod_request.c
  mod_include.c
  mod_filter.c
  mod_reflector.c
  mod_substitute.c
  mod_sed.c
  mod_charset_lite.c
  mod_deflate.c
  mod_xml2enc.c
  mod_proxy_html.c
  http_core.c
  mod_mime.c
  mod_log_config.c
  mod_log_debug.c
  mod_log_forensic.c
  mod_logio.c
  mod_env.c
  mod_mime_magic.c
  mod_expires.c
  mod_headers.c
  mod_usertrack.c
  mod_unique_id.c
  mod_setenvif.c
  mod_version.c
  mod_remoteip.c
  mod_proxy.c
  mod_proxy_connect.c
  mod_proxy_ftp.c
  mod_proxy_http.c
  mod_proxy_fcgi.c
  mod_proxy_scgi.c
  mod_proxy_fdpass.c
  mod_proxy_ajp.c
  mod_proxy_balancer.c
  mod_proxy_express.c
  mod_session.c
  mod_session_cookie.c
  mod_session_dbd.c
  mod_slotmem_shm.c
  mod_slotmem_plain.c
  mod_ssl.c
  mod_dialup.c
  mod_lbmethod_byrequests.c
  mod_lbmethod_bytraffic.c
  mod_lbmethod_bybusyness.c
  mod_lbmethod_heartbeat.c
  event.c
  mod_unixd.c
  mod_heartbeat.c
  mod_heartmonitor.c
  mod_dav.c
  mod_status.c
  mod_autoindex.c
  mod_asis.c
  mod_info.c
  mod_cgid.c
  mod_dav_fs.c
  mod_dav_lock.c
  mod_vhost_alias.c
  mod_negotiation.c
  mod_dir.c
  mod_actions.c
  mod_speling.c
  mod_userdir.c
  mod_alias.c
  mod_rewrite.c


Attached strace of downloading a file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159085</commentid>
    <comment_count>1</comment_count>
      <attachid>28785</attachid>
    <who name="Bjørnar Ness">bjornar.ness</who>
    <bug_when>2012-05-16 08:34:32 +0000</bug_when>
    <thetext>Created attachment 28785
strace -tt -d httpd -X</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159086</commentid>
    <comment_count>2</comment_count>
      <attachid>28786</attachid>
    <who name="Bjørnar Ness">bjornar.ness</who>
    <bug_when>2012-05-16 09:23:29 +0000</bug_when>
    <thetext>Created attachment 28786
har-log of site loading in httpd 2.5-trunk

Use:

http://pcapperf.appspot.com/

to view har</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159087</commentid>
    <comment_count>3</comment_count>
      <attachid>28787</attachid>
    <who name="Bjørnar Ness">bjornar.ness</who>
    <bug_when>2012-05-16 09:24:02 +0000</bug_when>
    <thetext>Created attachment 28787
har-log of site loading in lighttpd

Use:

http://pcapperf.appspot.com/

to view har</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159106</commentid>
    <comment_count>4</comment_count>
    <who name="Stefan Fritsch">sf</who>
    <bug_when>2012-05-16 20:19:13 +0000</bug_when>
    <thetext>I don&apos;t think this is httpd&apos;s fault. The strace shows that at 08:14:49.102908, httpd starts to send data. The socket buffer gets full a few times, httpd uses poll() to wait each time and sends more data. This works as expected until 08:14:49.105963 when httpd has sent about 75k of data. There, the socket buffer is full again but the poll() returns only 25 seconds later, at 08:15:15.686502. This means either there was no data going through the network and the buffer was really not writable for these 25 seconds, or there is a kernel bug.

Of course, it is rather strange that Apache httpd triggers this problem but it seems lighttpd doesn&apos;t. Accordingly, I have no idea what we could do to avoid the problem. If the kernel tells us we can&apos;t write to the socket, there is nothing we can do about that.

You could try analyzing the network traffic with wireshark and see if there are lost packets.

NB: There seems to be an unrelated bug somewhere because the mmap() of the read file is done at unaligned offsets, which fails and makes httpd fall back to writev(). I don&apos;t see this here on my system. This could be due to you using apr 2.0 which is unreleased and not stable. I would recommend to use the newest released versions of apr and apr-util instead (1.4.x).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159129</commentid>
    <comment_count>5</comment_count>
      <attachid>28800</attachid>
    <who name="Bjørnar Ness">bjornar.ness</who>
    <bug_when>2012-05-17 17:43:40 +0000</bug_when>
    <thetext>Created attachment 28800
pcap of transfer (not same as above)

Ingress limited to 200kbps with 20Kb burst</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159130</commentid>
    <comment_count>6</comment_count>
    <who name="Bjørnar Ness">bjornar.ness</who>
    <bug_when>2012-05-17 17:45:03 +0000</bug_when>
    <thetext>Tried with sendfile disabled (ref: https://issues.apache.org/bugzilla/show_bug.cgi?id=53253) 

No change. Pcap is apache running as worker with sendfile off</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159163</commentid>
    <comment_count>7</comment_count>
    <who name="Joe Orton">jorton</who>
    <bug_when>2012-05-18 14:14:47 +0000</bug_when>
    <thetext>$ grep &apos;pid   438.*08:14:49&apos; logfile | sed &apos;s/writev(6, .*) = /writev(6, ....) = /&apos;
...
[pid   438] 08:14:49.102908 writev(6, ....) = 14480
[pid   438] 08:14:49.103150 writev(6, ....) = -1 EAGAIN (Resource temporarily unavailable)
[pid   438] 08:14:49.103347 writev(6, ....) = 20272
[pid   438] 08:14:49.103578 writev(6, ....) = -1 EAGAIN (Resource temporarily unavailable)
[pid   438] 08:14:49.103775 poll([{fd=6, events=POLLOUT}], 1, 60000) = 1 ([{fd=6, revents=POLLOUT}])
[pid   438] 08:14:49.103837 writev(6, ....) = 14480

That second writev() call failed with EAGAIN - why did httpd immediately retry it without first doing a poll()?  That looks weird and wrong.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159192</commentid>
    <comment_count>8</comment_count>
    <who name="Joe Orton">jorton</who>
    <bug_when>2012-05-21 07:31:00 +0000</bug_when>
    <thetext>Can you reproduce this if using prefork rather than event?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159193</commentid>
    <comment_count>9</comment_count>
    <who name="Bjørnar Ness">bjornar.ness</who>
    <bug_when>2012-05-21 08:17:42 +0000</bug_when>
    <thetext>I reproduced with worker atleast, should I also try with prefork -X ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159195</commentid>
    <comment_count>10</comment_count>
      <attachid>28808</attachid>
    <who name="Bjørnar Ness">bjornar.ness</who>
    <bug_when>2012-05-21 11:22:05 +0000</bug_when>
    <thetext>Created attachment 28808
strace -tt -d /opt/apache/bin/httpd -X &gt; logfile 2&gt;&amp;1

Server version: Apache/2.5.0-dev (Unix)
Server built:   May 21 2012 12:27:51
Server&apos;s Module Magic Number: 20120211:3
Server loaded:  APR 2.0.0-dev
Compiled using: APR 2.0.0-dev
Architecture:   64-bit
Server MPM:     prefork
  threaded:     no
    forked:     yes (variable process count)

Server compiled with....
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses disabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=256
 -D HTTPD_ROOT=&quot;/opt/apache&quot;
 -D SUEXEC_BIN=&quot;/opt/apache/bin/suexec&quot;
 -D DEFAULT_PIDLOG=&quot;logs/httpd.pid&quot;
 -D DEFAULT_SCOREBOARD=&quot;logs/apache_runtime_status&quot;
 -D DEFAULT_ERRORLOG=&quot;logs/error_log&quot;
 -D AP_TYPES_CONFIG_FILE=&quot;conf/mime.types&quot;
 -D SERVER_CONFIG_FILE=&quot;conf/httpd.conf&quot;

Compiled in modules:
  core.c
  mod_authn_file.c
  mod_authn_dbm.c
  mod_authn_core.c
  mod_authz_host.c
  mod_authz_user.c
  mod_authz_core.c
  mod_access_compat.c
  mod_auth_basic.c
  mod_apreq2.c
  mod_request.c
  http_core.c
  mod_mime.c
  mod_log_config.c
  mod_logio.c
  mod_env.c
  mod_headers.c
  mod_setenvif.c
  mod_proxy.c
  mod_proxy_fcgi.c
  prefork.c
  mod_unixd.c
  mod_vhost_alias.c
  mod_dir.c
  mod_rewrite.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159196</commentid>
    <comment_count>11</comment_count>
    <who name="Bjørnar Ness">bjornar.ness</who>
    <bug_when>2012-05-21 11:24:12 +0000</bug_when>
    <thetext>First download is firefox, second wget</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>159207</commentid>
    <comment_count>12</comment_count>
      <attachid>28812</attachid>
    <who name="Bjørnar Ness">bjornar.ness</who>
    <bug_when>2012-05-22 07:25:46 +0000</bug_when>
    <thetext>Created attachment 28812
strace -tt -d /opt/lighttpd/sbin/lighttpd

lighttpd running in same vm with same ingress bw limit, but delivering data as should be expected. ingress limit 200kbps/20KB burst</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>162385</commentid>
    <comment_count>13</comment_count>
    <who name="Bjørnar Ness">bjornar.ness</who>
    <bug_when>2012-09-25 10:39:43 +0000</bug_when>
    <thetext>Has anyone looked into this? Using 2.4.2 now, and still seeing
the problem, here is how you can reproduce:


tc qdisc add dev eth0 root handle 1:
tc qdisc add dev eth0 root handle 1: htb default 10
tc class add dev eth0 parent 1: classid 1:1 htb rate 10mbps burst 15k
tc class add dev eth0 parent 1:1 classid 1:10 htb rate 100kbps burst 10k

... now this works fine here (100kbps)..

øets try 200kbps

tc class replace dev eth0 parent 1:1 classid 1:10 htb rate 200kbps burst 10k

... try downloading some file from apache... completely hangs
what is going on here? Eventually try other speeds.


Lighttpd handles the exact same settings just fine, so I dont want to believe this is not a httpd bug!</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>28785</attachid>
            <date>2012-05-16 08:34:32 +0000</date>
            <delta_ts>2012-05-16 08:34:32 +0000</delta_ts>
            <desc>strace -tt -d httpd -X</desc>
            <filename>logfile.gz</filename>
            <type>text/plain</type>
            <size>198365</size>
            <attacher name="Bjørnar Ness">bjornar.ness</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>28786</attachid>
            <date>2012-05-16 09:23:29 +0000</date>
            <delta_ts>2012-05-16 09:23:29 +0000</delta_ts>
            <desc>har-log of site loading in httpd 2.5-trunk</desc>
            <filename>www.arne.org-httpd.har</filename>
            <type>application/octet-stream</type>
            <size>19237</size>
            <attacher name="Bjørnar Ness">bjornar.ness</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>28787</attachid>
            <date>2012-05-16 09:24:02 +0000</date>
            <delta_ts>2012-05-16 09:24:02 +0000</delta_ts>
            <desc>har-log of site loading in lighttpd</desc>
            <filename>www.arne.org-lighttpd.har</filename>
            <type>application/octet-stream</type>
            <size>18104</size>
            <attacher name="Bjørnar Ness">bjornar.ness</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>28800</attachid>
            <date>2012-05-17 17:43:40 +0000</date>
            <delta_ts>2012-05-17 17:43:40 +0000</delta_ts>
            <desc>pcap of transfer (not same as above)</desc>
            <filename>httpd-log.pcap</filename>
            <type>application/octet-stream</type>
            <size>189793</size>
            <attacher name="Bjørnar Ness">bjornar.ness</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>28808</attachid>
            <date>2012-05-21 11:22:05 +0000</date>
            <delta_ts>2012-05-21 11:22:05 +0000</delta_ts>
            <desc>strace -tt -d /opt/apache/bin/httpd -X &gt; logfile 2&gt;&amp;1</desc>
            <filename>logfile.bz2</filename>
            <type>application/x-bzip</type>
            <size>132949</size>
            <attacher name="Bjørnar Ness">bjornar.ness</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>28812</attachid>
            <date>2012-05-22 07:25:46 +0000</date>
            <delta_ts>2012-05-22 07:25:46 +0000</delta_ts>
            <desc>strace -tt -d /opt/lighttpd/sbin/lighttpd</desc>
            <filename>strace-lighttpd.log.bz2</filename>
            <type>application/x-bzip</type>
            <size>9055</size>
            <attacher name="Bjørnar Ness">bjornar.ness</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>54498</bug_id>
          
          <creation_ts>2013-01-28 22:23:00 +0000</creation_ts>
          <short_desc>apache crash on any cgi request with certain http accept header</short_desc>
          <delta_ts>2013-02-15 12:54:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Frank">franktraffic</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>164916</commentid>
    <comment_count>0</comment_count>
    <who name="Frank">franktraffic</who>
    <bug_when>2013-01-28 22:23:00 +0000</bug_when>
    <thetext>I have problem with regular crash my apache / whole server because of out of memory. 

After investigating I found somebody sends requests to any .cgi script with this header [HTTP_ACCEPT] =&gt; !!mUiX6BaBHCeqIoxmNSdGa/XC2O8YisRs3w03aglTIw0A
I have only certain group of scripts installed, but i think it will crash with any script. 

As a result it generates thousand httpd proccesses and it eat all resourses.
In log 
212.117.160.93 - - [08/Jan/2013:17:41:19 -0600] GET /cgi-bin/a2/out.cgi HTTP/1.1 &quot;200&quot; 56695613 &quot;http://cut.../cgi-b
in/a2/out.cgi&quot; &quot;Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)&quot; &quot;-&quot;

This is 56695613 answer size. It looks like while it return this answer all scripts are locked and because new requests are incoming - in couple of minutes there are accumulated thousand httpd proccesses.

I verified and simulated it - it crashes apache every time when I send this headers. It works on Freebsd server. I tried send this request to other OS - it doesnt crash. 
Before I found this problem I tried reinstall OS from freebsd 8 to freebsd 9. I also tried all versions of Apache, including last one, and all mysql, php, nginx.

Could you fix this please. This person changes ip and I need catch his ip and add to blacklist. But time of time my server crashes.

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165256</commentid>
    <comment_count>1</comment_count>
    <who name="Frank">franktraffic</who>
    <bug_when>2013-02-15 00:16:28 +0000</bug_when>
    <thetext>rdtfgyuhijkl;&apos;
wertyui



any one read this and going to fix??</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165257</commentid>
    <comment_count>2</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-02-15 00:47:42 +0000</bug_when>
    <thetext>You&apos;ll need to provide some more detail if anyone is going to have a serious look. The detail you provided didn&apos;t have any effect on a sample CGI on Linux, AIX, or Solaris.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165262</commentid>
    <comment_count>3</comment_count>
      <attachid>29957</attachid>
    <who name="Frank">franktraffic</who>
    <bug_when>2013-02-15 11:25:46 +0000</bug_when>
    <thetext>Created attachment 29957
this show what happen</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165263</commentid>
    <comment_count>4</comment_count>
    <who name="Frank">franktraffic</who>
    <bug_when>2013-02-15 11:27:21 +0000</bug_when>
    <thetext>(In reply to comment #2)
&gt; You&apos;ll need to provide some more detail if anyone is going to have a serious
&gt; look. The detail you provided didn&apos;t have any effect on a sample CGI on
&gt; Linux, AIX, or Solaris.

Please specify what info can I provide more? I have attached screenshot.
I send simple request with this tool http://soft-net.net/send-http-tool/
This 276 processes are generated after 5 seconds. It will be 1,5k+ in minute and server will be out of memory if not restart apache.

This happens on FreeBsd server. I have reinstalled it from clean and it happens again. 

I am interested this to be fixed, because somebody disturb my server with this.

Please try it. Or should I make script and crash all freebsd servers for make you interesting.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165264</commentid>
    <comment_count>5</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-02-15 12:54:33 +0000</bug_when>
    <thetext>Can you get a backtrace of the CGI and httpd processes?  It would be best if you reproduced with a simple &quot;hello world&quot; CGI. Also details of your version and configuration.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>29957</attachid>
            <date>2013-02-15 11:25:46 +0000</date>
            <delta_ts>2013-02-15 11:25:46 +0000</delta_ts>
            <desc>this show what happen</desc>
            <filename>crash2.JPG</filename>
            <type>image/jpeg</type>
            <size>245427</size>
            <attacher name="Frank">franktraffic</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>54701</bug_id>
          
          <creation_ts>2013-03-15 06:01:34 +0000</creation_ts>
          <short_desc>Apache 2.4.3 Migration Issue Not loading the pages , Rendering Issue</short_desc>
          <delta_ts>2015-10-23 16:19:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.6</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Saravana Babu">saravana.raman</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>ananthan.selvaraj</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>165852</commentid>
    <comment_count>0</comment_count>
      <attachid>30054</attachid>
    <who name="Saravana Babu">saravana.raman</who>
    <bug_when>2013-03-15 06:01:34 +0000</bug_when>
    <thetext>Created attachment 30054
HTTPD Configuration Used for Reverse Proxy

Hi , 

I am facing some issue with Migration of Apache 2.4.3 , I had Reverse proxy setup in the Apache configuration of 2.2 version which was working from fine , But due to some security issues we want to migration to Apache 2.4.3 and followed the below steps 

How Did we setup 

1) Down loaded httpd 2.4.3 version 
2) Extracted and compiled with required modules 
3) Modified the Httpd.conf , Httpd-ssl.conf to support the Reverse proxy setting 
     (The Configuration is attached on this email)

Issue we are are facing 

1) The Apache get started and it works for 2 hrs , After 2 hr if the load is heavy ( More number of concurrence users ) , then the apache hangs out and we find lot of rendering issues while loading the page , somtime the page is not getting loaded , some time we get JSON issue , sometimes we get text displaying on the screen.

Looks like there is caching / buffering happening and some point this hangs out or not able to render , Please let us know if some body can help us on this issue .</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>30054</attachid>
            <date>2013-03-15 06:01:34 +0000</date>
            <delta_ts>2013-03-15 06:01:34 +0000</delta_ts>
            <desc>HTTPD Configuration Used for Reverse Proxy</desc>
            <filename>HTTPD-CONF.zip</filename>
            <type>application/zip</type>
            <size>12563</size>
            <attacher name="Saravana Babu">saravana.raman</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>54704</bug_id>
          
          <creation_ts>2013-03-15 15:59:01 +0000</creation_ts>
          <short_desc>Web Services stalling on it&apos;s own</short_desc>
          <delta_ts>2013-03-15 17:43:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.0</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ed Prete">pretee</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>165864</commentid>
    <comment_count>0</comment_count>
    <who name="Ed Prete">pretee</who>
    <bug_when>2013-03-15 15:59:01 +0000</bug_when>
    <thetext>We are running two Windows 2008R2 servers with Adobe ColdFusion in a load balanced configuration. One of the two servers has consistently had a service interuption at intervals of two months where the web service seems to hang thus impacting page delivery. We are now experiencing the same issue with the second server. A restart of the server and services solves the issue. Being this happens intermittmently its unpredictable and impacting service.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>54782</bug_id>
          
          <creation_ts>2013-04-02 08:12:39 +0000</creation_ts>
          <short_desc>Memory Corruption errors - mpm_worker mod_perl</short_desc>
          <delta_ts>2014-02-21 20:39:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.15</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="David">hermand</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>166315</commentid>
    <comment_count>0</comment_count>
    <who name="David">hermand</who>
    <bug_when>2013-04-02 08:12:39 +0000</bug_when>
    <thetext>I have been getting these errors in my apache logs on my server - it only happened once a day or every two days. Any idea what could be causing this? I dont even have an idea of where to start?

CentOS Linux 6.4
Apache version 2.2.15

See the full output of the error and backtrace here: http://pastebin.com/emUCQVzg

Here is another instance of the same kind of error: http://pastebin.com/Gg4HC1CU

And yet another: http://pastebin.com/1fRvM01R

Please advise if any other information is needed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>166320</commentid>
    <comment_count>1</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2013-04-02 12:06:54 +0000</bug_when>
    <thetext>mod_perl is the closest in proximity to the crash, not mod_fcgid.
(Did you think you were running your Perl code out of process via mod_fcgid?)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>166323</commentid>
    <comment_count>2</comment_count>
    <who name="David">hermand</who>
    <bug_when>2013-04-02 13:24:17 +0000</bug_when>
    <thetext>ok - so mod_perl -anything I can do on my side to help prevent/fix this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>173425</commentid>
    <comment_count>3</comment_count>
    <who name="David Nielson">naptastic</who>
    <bug_when>2014-02-21 20:39:31 +0000</bug_when>
    <thetext>The errors you&apos;re seeing sound an awful lot like synchronization problems. Is the code you&apos;re running thread-safe, and is your mod_perl configured to be thread-safe?

http://perl.apache.org/docs/2.0/user/intro/overview.html#Threads_Support

If your server can handle the switch, you can try mpm_prefork. If the crashes go away, then the code and/or configuration are not thread-safe and need to be properly audited.

If you need a threaded MPM, you might also consider altering your Perl software to run via CGI or FastCGI instead of through mod_perl.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>54936</bug_id>
          
          <creation_ts>2013-05-08 10:17:48 +0000</creation_ts>
          <short_desc>Some potential bugs reported by static analysis tool canalyze</short_desc>
          <delta_ts>2014-09-02 09:33:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhenbo Xu">zhenbo1987</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>167090</commentid>
    <comment_count>0</comment_count>
    <who name="Zhenbo Xu">zhenbo1987</who>
    <bug_when>2013-05-08 10:17:48 +0000</bug_when>
    <thetext>Hi, 
I&apos;m a developer of a static analysis tool canalyze.
Recently I applied it to httpd-2.4.4
It seems some reports are real after by manually checking:
(I have tried my best to confirming these reports. But I&apos;m not familiar with the source code of httpd. Thus, if there still exist many false alarms, sorry for the trouble. I still hope for your replies!)

1. Use Undefined Value
file: ssl_util.c
function: ssl_util_path_check
At line 124: if (pcm &amp; SSL_PCM_EXISTS &amp;&amp; apr_stat(&amp;finfo, path,
pcm &amp; SSL_PCM_EXISTS may be 0, which leaves finfo uninitialized.

At line 129 : if (pcm &amp; SSL_PCM_ISREG &amp;&amp; finfo.filetype != APR_REG)
finfo is directly used.

2. Use Undefined Value
file: scoreboard.c
function: ap_find_child_by_pid
At line 394: ap_mpm_query(AP_MPMQ_MAX_DAEMONS, &amp;max_daemons_limit);
may leaves max_daemons_limit uninitialized when ap_run_mpm_query returns -1.

3. Use Undefined Value
file: proxy_util.c
function: proxy_get_host_of_request
At line 401: err = ap_proxy_canon_netloc(r-&gt;pool, &amp;url, &amp;user, &amp;password, &amp;host, &amp;port);
host may not be initialized when ap_proxy_canon_netloc returns &quot;Invalid host/port&quot; at line 349.

4. Use Undefined Value
file: dbm.c
function: dav_dbm_open
At line 167: (void) dav_fs_dir_file_name(resource, &amp;dirpath, &amp;fname);
fname may not be initialized when dav_fs_dir_file_name returns at line 285: return dav_new_error(ctx-&gt;pool, HTTP_INTERNAL_SERVER_ERROR, 0, rv, ...)

The similar problem occurs at:
file: repos.c
function: dav_fs_copymoveset
line 570: (void) dav_fs_dir_file_name(src, &amp;src_dir, &amp;src_file);
line 571: (void) dav_fs_dir_file_name(dst, &amp;dst_dir, &amp;dst_file);

file: repos.c
function: dav_fs_deleteset
line 623: (void) dav_fs_dir_file_name(resource, &amp;dirpath, &amp;fname);


file: lock.c
function: dav_fs_add_locknull_state
line 936: (void) dav_fs_dir_file_name(resource, &amp;dirpath, &amp;fname);
dirpath is not initialized.

file: lock.c
function: dav_fs_add_locknull_state
line 936: (void) dav_fs_dir_file_name(resource, &amp;dirpath, &amp;fname);

file: lock.c
function: dav_fs_get_locknull_members
line 919: (void) dav_fs_dir_file_name(resource, &amp;dirpath, NULL);

5. Null Pointer
file: lock.c
function: dav_fs_save_lock_record
line 443: (void) dav_dbm_delete(lockdb-&gt;info-&gt;db, key);
The first argument may be null, which is assigned at

line 434: if ((err = dav_fs_really_open_lockdb(lockdb)) != NULL)
function call dav_fs_really_open_lockdb may assign null to lockdb-&gt;info-&gt;db at

line 307: err = dav_dbm_open_direct(lockdb-&gt;info-&gt;pool,..., &amp;lockdb-&gt;info-&gt;db)
in 

file dbm.c at line 133: *pdb = NULL; 

(Also at line 499: if ((err = dav_dbm_store(lockdb-&gt;info-&gt;db, key, val)) != NULL))

6. Null Pointer
file: dbm.c
function: dav_propdb_output_value
line 535: apr_datum_t key = dav_build_key(db, name);
key may be zerod at line 317

line 547: dav_append_prop(db-&gt;pool, key.dptr, value.dptr, phdr);
Directly uses key.dptr in function dav_append_prop.

7. Null Pointer
file: props.c
function: dav_get_props
line 700: apr_xml_elem *elem = dav_find_child(doc-&gt;root, &quot;prop&quot;);
Could elem be null?

The similar problem:
file: mod_dav.c
function: dav_cache_badprops
line 1924: elem = dav_find_child(ctx-&gt;doc-&gt;root, &quot;prop&quot;);


8. Null pointer
file: mod_dav.c
function: dav_failed_proppatch
line 2159: if (ctx-&gt;err == NULL) 
ctx-&gt;err may be null when exiting the for loop

line 2185: ctx-&gt;err-&gt;status
directly use it.

9. Null Pointer
file: request.c
function: prep_walk_cache
line 347: note = ap_get_request_note(r, t);
note may be null

10. Null pointer
file: props.c
function: dav_prop_validate
line 944: ctx-&gt;err = (*priv-&gt;provider-&gt;patch_validate)(propdb-&gt;resource,
priv-&gt;provider may be null, which is checked at

line 934: if (!dav_rw_liveprop(propdb, priv))
line 291: if (priv-&gt;provider != NULL)

11. Null Pointer
file: config.c
function: socache_shmcb_create
line 294: ctx-&gt;data_file = path = ap_server_root_relative(p, arg);
path may be null which is passed to strchr at line 296

12. Memory leak
file: util_ldap_cache.c
function: util_ldap_url_node_copy
line 55: util_ald_free(cache, node-&gt;url);
what we should free is node?

13. Use Undefine Value
file: mod_authz_dbm.c
function: dbmfilegroup_check_authorization
line 229: status = get_dbm_grp(r, apr_pstrcat(r-&gt;pool, user, &quot;:&quot;, realm, NULL),user, conf-&gt;grpfile, conf-&gt;dbmtype, &amp;groups);
The function call may just return 

14. Use Undefined Value
file: proxy_util.c
function: proxy_get_host_of_request
line 401: err = ap_proxy_canon_netloc(r-&gt;pool, &amp;url, &amp;user, &amp;password, &amp;host, &amp;port);
when err is not null, host is not initialized.

15. Use Undefined Value
file: util_expr_eval.c
function: ap_expr_exec_re
line 873: ap_expr_exec_ctx(&amp;ctx)
As ctx.result_string is uninitialized, of which the use at line 809 is invalid.

16. Null Pointer
file: mod_include.c
function: handle_if
line 2318: ap_ssi_get_tag_and_value(ctx, &amp;tag, &amp;expr, SSI_VALUE_RAW);
Could tag be assigned as null?

Also in function handle_elif.

17. Memory leak
file: util_ldap_cache_mgr.c
function: util_ald_create_caches
line 305: if (search_cache &amp;&amp; compare_cache &amp;&amp; dn_compare_cache)
What if only one or two of caches is null, the other one is not release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>168633</commentid>
    <comment_count>1</comment_count>
    <who name="Christophe JAILLET">christophe.jaillet</who>
    <bug_when>2013-07-17 05:51:55 +0000</bug_when>
    <thetext>Thanks for the report.

1. Invalid.
In the between of line 124 and 129 you can find:
    AP_DEBUG_ASSERT((pcm &amp; SSL_PCM_EXISTS) ||
                    !(pcm &amp; (SSL_PCM_ISREG|SSL_PCM_ISDIR|SSL_PCM_ISNONZERO)));
So it is expected not to happen.
This was introduced in r1180330 in the 2.4.x branch


2. r1503990


3. r1503991


8. Invalid
At that point ctx-&gt;err can not be NULL. It has been set to err424_set or err424_delete which are allocated in the pool.
Should the memory allocation fail, we would abort.


9. Invalid
After the call you mention, we have
     AP_DEBUG_ASSERT(note != NULL);
So it is expected not to be NULL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>168651</commentid>
    <comment_count>2</comment_count>
    <who name="Christophe JAILLET">christophe.jaillet</who>
    <bug_when>2013-07-17 21:52:38 +0000</bug_when>
    <thetext>12. r1504276


13. Invalid
I think that you mean that &apos;groups&apos; can be used uninitialized.
If &apos;get_dbm_grp&apos; just return, the status != APR_SUCCESS
It is checked at line 231.
So we are guaranteed that &apos;groups&apos; is initialized when it is used.


14. same as 3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>169569</commentid>
    <comment_count>3</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2013-08-19 11:46:52 +0000</bug_when>
    <thetext>#12 is now in the 2.4.x branch (r1515372)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>177502</commentid>
    <comment_count>4</comment_count>
    <who name="Christophe JAILLET">christophe.jaillet</who>
    <bug_when>2014-09-02 09:33:02 +0000</bug_when>
    <thetext>#15 is invalid.
The code is guarded by AP_EXPR_FLAG_STRING_RESULT.

See:
    AP_DEBUG_ASSERT((info-&gt;flags &amp; AP_EXPR_FLAG_STRING_RESULT) == 0);
in &apos;ap_expr_exec_re&apos;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>54986</bug_id>
          
          <creation_ts>2013-05-16 18:34:28 +0000</creation_ts>
          <short_desc>httpd hanging on large form submit in ap_run_handler</short_desc>
          <delta_ts>2013-05-22 18:21:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.22</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rich">rtomasso</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>167250</commentid>
    <comment_count>0</comment_count>
    <who name="Rich">rtomasso</who>
    <bug_when>2013-05-16 18:34:28 +0000</bug_when>
    <thetext>Have an issue with a customer system. The apache process is completely hanging when trying to process a submitted form. It&apos;s a POST with a long list of mac addresses, about 22K of total data. At some point this just stopped working. Smaller submits, up to 20K work, the exact tripping point varies each time we run it.

Running gdb and attaching to the httpd process (recompiled with -g3 flag) I see this, with a breakpoint set at ap_run_handler.

(gdb) bt
#0 ap_run_handler (r=0xdd3bd50) at config.c:157
#1 0x0807990f in ap_invoke_handler (r=0xdd3bd50) at config.c:376
#2 0x08094d45 in ap_process_request (r=0xdd3bd50) at http_request.c:282
#3 0x0dd3bd50 in ?? ()
#4 0x0d632440 in ?? ()
#5 0x00000000 in ?? ()
(gdb) s

And it just hangs. I can&apos;t see what r is pointing to.

I find no function definition in the apache source tree for ap_run_handler(). 

Line 157 in config.c is
AP_IMPLEMENT_HOOK_RUN_FIRST(int, handler, (request_rec *r), (r), DECLINED)

Following the code for definitions of this macro, leads me to a rather obfuscated define in apr_hooks.h, line 358
/** macro to implement the hook */
#define APR_IMPLEMENT_EXTERNAL_HOOK_BASE(ns,link,name) \
link##_DECLARE(void) ns##_hook_##name(ns##_HOOK_##name##_t *pf,const char * const *aszPre, \
                                      const char * const *aszSucc,int nOrder) \
    { \

The apache docs are no help, simply notes it as an internal macro.


# uname -a
Linux lab01.net 2.6.18-238.9.1.el5 #1 SMP Tue Apr 12 18:10:13 EDT 2011 x86_64 x86_64 x86_64 GNU/Linux
(I think this is CentOS 5.7) 

# httpd -V
Server version: Apache/2.2.22 (Unix)
Server built:   May 13 2013 11:55:26
Server&apos;s Module Magic Number: 20051115:30
Server loaded:  APR 1.4.5, APR-Util 1.3.12
Compiled using: APR 1.4.5, APR-Util 1.4.1
Architecture:   32-bit
Server MPM:     Prefork
  threaded:     no
    forked:     yes (variable process count)
Server compiled with....
 -D APACHE_MPM_DIR=&quot;server/mpm/prefork&quot;
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT=&quot;/space/vendor-build/apache&quot;
 -D SUEXEC_BIN=&quot;/space/vendor-build/apache/bin/suexec&quot;
 -D DEFAULT_PIDLOG=&quot;logs/httpd.pid&quot;
 -D DEFAULT_SCOREBOARD=&quot;logs/apache_runtime_status&quot;
 -D DEFAULT_LOCKFILE=&quot;logs/accept.lock&quot;
 -D DEFAULT_ERRORLOG=&quot;logs/error_log&quot;
 -D AP_TYPES_CONFIG_FILE=&quot;conf/mime.types&quot;
 -D SERVER_CONFIG_FILE=&quot;conf/httpd.conf&quot;

# httpd -l
Compiled in modules:
  core.c
  mod_ssl.c
  prefork.c
  http_core.c
  mod_so.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>167251</commentid>
    <comment_count>1</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-05-16 18:40:27 +0000</bug_when>
    <thetext>What handler/module is expected to process this request?  Usually the  body isn&apos;t read until the handler has control. Can you try again with -O0 and don&apos;t set a breakpoint, just get a backtrace of the hung thread.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>167312</commentid>
    <comment_count>2</comment_count>
    <who name="Rich">rtomasso</who>
    <bug_when>2013-05-20 18:26:09 +0000</bug_when>
    <thetext>We&apos;re running in a mod_perl environment. If I let the process hang I can&apos;t get a backtrace.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>167327</commentid>
    <comment_count>3</comment_count>
    <who name="Rich">rtomasso</who>
    <bug_when>2013-05-21 17:52:42 +0000</bug_when>
    <thetext>Rebuilt with the -O0 option I was able to get some more information. In this environment the doc root is &quot;/opt/product/apache/htdocs&quot;.

(gdb) bt
#0  ap_run_handler (r=0xce37d20) at config.c:157
#1  0x0807fb5c in ap_invoke_handler (r=0xce37d20) at config.c:376
#2  0x080a33b2 in ap_process_request (r=0xce37d20) at http_request.c:282
#3  0x080a06e0 in ap_process_http_connection (c=0xcb53d08) at http_core.c:190
#4  0x08086b8f in ap_run_process_connection (c=0xcb53d08) at connection.c:43
#5  0x08086fe5 in ap_process_connection (c=0xcb53d08, csd=0xcb53b70) at connection.c:190
#6  0x080a9490 in child_main (child_num_arg=0) at prefork.c:667
#7  0x080a963c in make_child (s=0x8dd2ca8, slot=0) at prefork.c:768
#8  0x080a96af in startup_children (number_to_start=1) at prefork.c:786
#9  0x080a9ae0 in ap_mpm_run (_pconf=0x8dce0a8, plog=0x8e04180, s=0x8dd2ca8) at prefork.c:1007
#10 0x08069dd1 in main (argc=3, argv=0xffa79174) at main.c:753
(gdb) p r
$1 = (request_rec *) 0xce37d20
(gdb) p *r
$2 = {pool = 0xce37ce0, connection = 0xcb53d08, server = 0x8dd2ca8, next = 0x0, prev = 0x0, main = 0x0,
  the_request = 0xce38c60 &quot;POST /sla/create/index.html HTTP/1.1&quot;, assbackwards = 0, proxyreq = 0, header_only = 0,
  protocol = 0xce38d00 &quot;HTTP/1.1&quot;, proto_num = 1001, hostname = 0xce39220 &quot;209.211.205.181&quot;,
  request_time = 1369158013800915, status_line = 0x0, status = 200, method = 0xce38cb0 &quot;POST&quot;, method_number = 2,
  allowed = 0, allowed_xmethods = 0x0, allowed_methods = 0xce37ec0, sent_bodyct = 0, bytes_sent = 0, mtime = 0,
  chunked = 0, range = 0x0, clength = 0, remaining = 0, read_length = 0, read_body = 0, read_chunked = 0,
  expecting_100 = 0, headers_in = 0xce37ef0, headers_out = 0xce38380, err_headers_out = 0xce38528,
  subprocess_env = 0xce38138, notes = 0xce38680, content_type = 0x8e90c48 &quot;text/html&quot;,
  handler = 0x8ded1c8 &quot;perl-script&quot;, content_encoding = 0x0, content_languages = 0x0, vlist_validator = 0x0,
  user = 0x0, ap_auth_type = 0x0, no_cache = 0, no_local_copy = 0,
  unparsed_uri = 0xce38cd0 &quot;/sla/create/index.html&quot;, uri = 0xce38ce8 &quot;/sla/create/index.html&quot;,
  filename = 0xce39348 &quot;/opt/product/apache/htdocs/sla/create/index.html&quot;,
  canonical_filename = 0xce39348 &quot;/opt/product/apache/htdocs/sla/create/index.html&quot;, path_info = 0xce392c1 &quot;&quot;,
  args = 0x0, finfo = {pool = 0xce37ce0, valid = 7598960, protection = 1604, filetype = APR_REG, user = 504,
    group = 110, inode = 6657732, device = 64769, nlink = 1, size = 2608, csize = 4096, atime = 1369157418000000,
    mtime = 1360861380000000, ctime = 1360861380000000,
    fname = 0xce39290 &quot;/opt/product/apache/htdocs/sla/create/index.html&quot;, name = 0x0, filehand = 0x0}, parsed_uri = {
    scheme = 0x0, hostinfo = 0x0, user = 0x0, password = 0x0, hostname = 0x0, port_str = 0xce39239 &quot;8080&quot;,
    path = 0xce38ce8 &quot;/sla/create/index.html&quot;, query = 0x0, fragment = 0x0, hostent = 0x0, port = 8080,
    is_initialized = 1, dns_looked_up = 0, dns_resolved = 0}, used_path_info = 2, per_dir_config = 0xce39590,
  request_config = 0xce387d8, htaccess = 0x0, output_filters = 0xccf1818, input_filters = 0xce39240,
  proto_output_filters = 0xce38be0, proto_input_filters = 0xce39240, eos_sent = 0}


Stepping from here, the process hangs. Running pstack from another window returns nothing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>167344</commentid>
    <comment_count>4</comment_count>
    <who name="Mike Rumph">mike.rumph</who>
    <bug_when>2013-05-22 00:34:46 +0000</bug_when>
    <thetext>(In reply to comment #0)
&gt; I find no function definition in the apache source tree for
&gt; ap_run_handler(). 
&gt; 
&gt; Line 157 in config.c is
&gt; AP_IMPLEMENT_HOOK_RUN_FIRST(int, handler, (request_rec *r), (r), DECLINED)
&gt; 
&gt; Following the code for definitions of this macro, leads me to a rather
&gt; obfuscated define in apr_hooks.h, line 358
&gt; /** macro to implement the hook */
&gt; #define APR_IMPLEMENT_EXTERNAL_HOOK_BASE(ns,link,name) \
&gt; link##_DECLARE(void) ns##_hook_##name(ns##_HOOK_##name##_t *pf,const char *
&gt; const *aszPre, \
&gt;                                       const char * const *aszSucc,int
&gt; nOrder) \
&gt;     { \
&gt; 
&gt; The apache docs are no help, simply notes it as an internal macro.
&gt; 
The function to look for is ap_hook_handler.
This is found in several modules.
One example is server/core.c:
   ap_hook_handler(default_handler,NULL,NULL,APR_HOOK_REALLY_LAST);
This will cause the default_handler function in core.c to be called whenever ap_run_handler is called.
The following documentation may help explain this:
- http://httpd.apache.org/docs/2.2/developer/hooks.html

Perhaps mod_perl should have something like this as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>167360</commentid>
    <comment_count>5</comment_count>
    <who name="Rich">rtomasso</who>
    <bug_when>2013-05-22 18:21:51 +0000</bug_when>
    <thetext>I set breakpoints at ap_hook_handler and default_handler, neither of them were reached.

I ran the same form with a small data set so it completed. At the breakpoint for ap_run_handler, I did step and it came back quickly with the next line further down, a call to ap_invoke_handler [config.c:378]. And the form has returned. No meaningful difference in contents of the request object.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>55045</bug_id>
          
          <creation_ts>2013-06-01 20:47:46 +0000</creation_ts>
          <short_desc>calls to gets() in test_find.c and test_parser.c</short_desc>
          <delta_ts>2013-12-23 13:14:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.3</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>PatchAvailable</keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bill Parker">wp02855</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>167571</commentid>
    <comment_count>0</comment_count>
      <attachid>30361</attachid>
    <who name="Bill Parker">wp02855</who>
    <bug_when>2013-06-01 20:47:46 +0000</bug_when>
    <thetext>Created attachment 30361
patch to replace gets() with fgets() in test_find.c

Hello All,

   In httpd-2.4.3, directory &apos;test&apos;, files &apos;test_parser.c&apos; and
&apos;test_find.c&apos;, I found a calls to gets() which by definition
is unsafe, so I replaced the calls with fgets() equivalents.

The patch files are listed below (in diff -u format):

--- test_find.c.orig    2013-05-29 19:22:13.112875876 -0700
+++ test_find.c 2013-05-29 19:26:27.226873980 -0700
@@ -64,11 +64,11 @@
     p = apr_pool_alloc_init();
 
     printf(&quot;Enter field value to find items within:\n&quot;);
-    if (!gets(line))
+    if (!fgets(line, sizeof(line), stdin))
         exit(0);
 
     printf(&quot;Enter search item:\n&quot;);
-    while (gets(tok)) {
+    while (fgets(tok, sizeof(tok), stdin)) {
         printf(&quot;  [%s] == %s\n&quot;, tok, ap_find_list_item(p, line, tok)
                                   ? &quot;Yes&quot; : &quot;No&quot;);
         printf(&quot;Enter search item:\n&quot;);
		 
======================================================================

--- test_parser.c.orig  2013-05-29 19:26:43.851869923 -0700
+++ test_parser.c       2013-05-29 19:27:17.185871805 -0700
@@ -64,7 +64,7 @@
 
     p = apr_pool_alloc_init();
 
-    while (gets(instr)) {
+    while (fgets(instr, sizeof(instr), stdin)) {
         printf(&quot;  [%s] ==\n&quot;, instr);
         field = instr;
         while ((newstr = ap_get_list_item(p, &amp;field)) != NULL)
		 
I&apos;m attaching the patch files to this e-mail.

Bill Parker (wp02855 at gmail dot com)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>167572</commentid>
    <comment_count>1</comment_count>
      <attachid>30362</attachid>
    <who name="Bill Parker">wp02855</who>
    <bug_when>2013-06-01 20:48:31 +0000</bug_when>
    <thetext>Created attachment 30362
patch to replace gets() with fgets() in test_parser.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>171894</commentid>
    <comment_count>2</comment_count>
      <attachid>30361</attachid>
    <who name="Christophe JAILLET">christophe.jaillet</who>
    <bug_when>2013-12-23 13:14:21 +0000</bug_when>
    <thetext>Comment on attachment 30361
patch to replace gets() with fgets() in test_find.c

&gt;--- test_find.c.orig	2013-05-29 19:22:13.112875876 -0700
&gt;+++ test_find.c	2013-05-29 19:26:27.226873980 -0700
&gt;@@ -64,11 +64,11 @@
&gt;     p = apr_pool_alloc_init();
&gt; 
&gt;     printf(&quot;Enter field value to find items within:\n&quot;);
&gt;-    if (!gets(line))
&gt;+    if (!fgets(line, sizeof(line), stdin))
&gt;         exit(0);
&gt; 
&gt;     printf(&quot;Enter search item:\n&quot;);
&gt;-    while (gets(tok)) {
&gt;+    while (fgets(tok, sizeof(tok), stdin)) {
&gt;         printf(&quot;  [%s] == %s\n&quot;, tok, ap_find_list_item(p, line, tok)
&gt;                                   ? &quot;Yes&quot; : &quot;No&quot;);
&gt;         printf(&quot;Enter search item:\n&quot;);</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>30361</attachid>
            <date>2013-06-01 20:47:46 +0000</date>
            <delta_ts>2013-12-23 13:14:21 +0000</delta_ts>
            <desc>patch to replace gets() with fgets() in test_find.c</desc>
            <filename>test_find.c.patch</filename>
            <type>text/plain</type>
            <size>579</size>
            <attacher name="Bill Parker">wp02855</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>30362</attachid>
            <date>2013-06-01 20:48:31 +0000</date>
            <delta_ts>2013-06-01 20:48:31 +0000</delta_ts>
            <desc>patch to replace gets() with fgets() in test_parser.c</desc>
            <filename>test_parser.c.patch</filename>
            <type>text/plain</type>
            <size>371</size>
            <attacher name="Bill Parker">wp02855</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>55327</bug_id>
          
          <creation_ts>2013-07-30 07:19:39 +0000</creation_ts>
          <short_desc>Segmentation fault when stopping Apache 2.4.6 normally</short_desc>
          <delta_ts>2014-12-26 16:37:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.6</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Leif Gustafsson">leif.gustafsson</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>leif.gustafsson</cc>
    
    <cc>michael</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>168935</commentid>
    <comment_count>0</comment_count>
    <who name="Leif Gustafsson">leif.gustafsson</who>
    <bug_when>2013-07-30 07:19:39 +0000</bug_when>
    <thetext>Apache 2.4.6 seg faults when stopped, failing to free semaphore arrays. I have had the same issue with 2.4.4 also.

We are running on RH 6.2. We have built the Apache ourselves. We are using APR 1.4.6 in this case, but have the same issue with 1.4.8. We are using apr-util 1.5.2.

I did a gdb trace as seen below.

BR,
Leif Gustafsson

GDB trace
---
Continuing.

Program received signal SIGTERM, Terminated.
0x00000034e10de2d3 in __select_nocancel () from /lib64/libc.so.6
(gdb) c
Continuing.

Program received signal SIGSEGV, Segmentation fault.
apr_palloc (pool=0x16acff8, in_size=38) at memory/unix/apr_pools.c:684
684	    if (size &lt;= node_free_space(active)) {
(gdb) bt
#0  apr_palloc (pool=0x16acff8, in_size=38) at memory/unix/apr_pools.c:684
#1  0x00007eff89a43ccc in apr_pstrcat (a=0x16acff8) at strings/apr_strings.c:149
#2  0x00007eff85c00bdb in socache_dbm_destroy (ctx=0x16a5b28, s=&lt;value optimized out&gt;) at mod_socache_dbm.c:179
#3  0x00007eff859e9cda in ssl_scache_kill (s=0x1385558) at ssl_scache.c:100
#4  0x00007eff859d7c56 in ssl_init_ModuleKill (data=&lt;value optimized out&gt;) at ssl_engine_init.c:1745
#5  0x00007eff89a4d15e in run_cleanups (pool=0x135c138) at memory/unix/apr_pools.c:2352
#6  apr_pool_destroy (pool=0x135c138) at memory/unix/apr_pools.c:814
#7  0x00007eff89a4d135 in apr_pool_destroy (pool=0x135a128) at memory/unix/apr_pools.c:811
#8  0x000000000042813f in destroy_and_exit_process (process=0x135a218, process_exit_value=0) at main.c:264
#9  0x0000000000429486 in main (argc=5, argv=0x7fff7770ae58) at main.c:784</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>168936</commentid>
    <comment_count>1</comment_count>
    <who name="Leif Gustafsson">leif.gustafsson</who>
    <bug_when>2013-07-30 07:33:41 +0000</bug_when>
    <thetext>When started we have 259 semaphores allocated.

When stopped 255 semaphores are left allocated. Is the number 255 a coincidence or not. ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>180030</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Orlitzky">michael</who>
    <bug_when>2014-12-26 16:37:36 +0000</bug_when>
    <thetext>We received a similar report at,

  https://bugs.gentoo.org/show_bug.cgi?id=525222

The stack trace is different, but both wind up in apr_palloc, at memory/unix/apr_pools.c:684. Maybe related, who knows.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>55394</bug_id>
          
          <creation_ts>2013-08-09 14:09:35 +0000</creation_ts>
          <short_desc>apache 2.4 randomy crashes with signal 6</short_desc>
          <delta_ts>2013-08-09 14:17:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.6</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>fhimpe</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>169325</commentid>
    <comment_count>0</comment_count>
      <attachid>30717</attachid>
    <who name="">fhimpe</who>
    <bug_when>2013-08-09 14:09:35 +0000</bug_when>
    <thetext>Created attachment 30717
backtrace

Apache 2.4.6 crashes here every few days and I managed to get the attached backtrace from the core file.


I&apos;m using Apache 2.4.6, Event MPM, libapr 1.4.6, libaprutil 1.5.2 running on Debian Wheezy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>169326</commentid>
    <comment_count>1</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2013-08-09 14:17:15 +0000</bug_when>
    <thetext>3. Explore process

Process (unknown pid)
99 threads:
MPM child worker thread (waiting for connection to handle)
apr_thread_cond_wait&lt;ap_queue_pop_something&lt;worker_thread&lt;dummy_worker
Show each thread...
1 thread:
MPM child listener thread (waiting for connection to accept)
apr_pollset_poll&lt;listener_thread&lt;dummy_worker
Show each thread...
1 thread:
Event MPM child main thread (waiting for termination event)
ap_event_pod_check&lt;child_main&lt;make_child&lt;server_main_loop&lt;event_run&lt;ap_run_mpm&lt;main
Show each thread...
1 thread:
MPM child worker thread (reading client request)
raise&lt;abort&lt;??&lt;??&lt;??&lt;malloc&lt;CRYPTO_malloc&lt;??&lt;??&lt;??&lt;??&lt;ssl_io_filter_handshake&lt;ssl_io_filter_input&lt;ap_rgetline_core&lt;read_request_line&lt;ap_read_request&lt;ap_process_http_sync_connection&lt;ap_process_http_connection&lt;ap_run_process_connection&lt;process_socket&lt;worker_thread&lt;dummy_worker
Hide individual threads...
1: MPM child worker thread (reading client request)
#0 raise
#1 abort
#2 ??
#3 ??
#4 ??
#5 malloc
#6 CRYPTO_malloc()
#7 ??
#8 ??
#9 ??
#10 ??
#11 ssl_io_filter_handshake(filter_ctx=0x7f0b05a9b890)
#12 ssl_io_filter_input(f=0x7f0b0666a078, bb=0x7f0b05a952b8, mode=&lt;optimized out&gt;, block=&lt;optimized out&gt;, readbytes=&lt;optimized out&gt;)
#13 ap_rgetline_core(s=s@entry=0x7f0b05a940d0, n=8192, read=read@entry=0x7f0b167e6d28, r=r@entry=0x7f0b05a940a0, fold=fold@entry=0, bb=bb@entry=0x7f0b05a952b8)
#14 read_request_line(bb=0x7f0b05a952b8, r=0x7f0b05a940a0)
#15 ap_read_request(conn=conn@entry=0x7f0b05a9b330)
#16 ap_process_http_sync_connection(c=0x7f0b05a9b330)
#17 ap_process_http_connection(c=0x7f0b05a9b330)
#18 ap_run_process_connection(c=0x7f0b05a9b330)
#19 process_socket
#20 worker_thread
#21 dummy_worker</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>30717</attachid>
            <date>2013-08-09 14:09:35 +0000</date>
            <delta_ts>2013-08-09 14:09:35 +0000</delta_ts>
            <desc>backtrace</desc>
            <filename>gdb.txt</filename>
            <type>text/plain</type>
            <size>81017</size>
            <attacher>fhimpe</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>55557</bug_id>
          
          <creation_ts>2013-09-14 11:18:57 +0000</creation_ts>
          <short_desc>Some cppcheck reports</short_desc>
          <delta_ts>2013-09-14 11:18:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="julien2412">serval2412</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>170102</commentid>
    <comment_count>0</comment_count>
    <who name="julien2412">serval2412</who>
    <bug_when>2013-09-14 11:18:57 +0000</bug_when>
    <thetext>Hello,

With httpd svn sources updated today + cppcheck (static C++ analyzer) git updated today, I retrieved these reports:
[support/firehose.c:464]: (style) Array index &apos;i&apos; is used before limits check
    464     for (i = 0; str[i] &amp;&amp; i &lt; APR_UUID_FORMATTED_LENGTH; i++) {
    465         header-&gt;uuid[i] = str[i];
    466     }

I tried to filter because cppcheck is normally used for c++, so there were quite a lot of false positives.

[server/mpm/winnt/mpm_winnt.c:607]: (error) Memory leak: args
[server/mpm/winnt/mpm_winnt.c:617]: (error) Memory leak: args

[modules/arch/win32/mod_win32.c:501] -&gt; [modules/arch/win32/mod_win32.c:497]: (style) Found duplicate branches for &apos;if&apos; and &apos;else&apos;.
[modules/generators/mod_cgi.c:170] -&gt; [modules/generators/mod_cgi.c:170]: (style) Found duplicate branches for &apos;if&apos; and &apos;else&apos;.
[modules/generators/mod_cgid.c:1050] -&gt; [modules/generators/mod_cgid.c:1050]: (style) Found duplicate branches for &apos;if&apos; and &apos;else&apos;.
[modules/ssl/ssl_engine_dh.c:133] -&gt; [modules/ssl/ssl_engine_dh.c:131]: (style) Found duplicate branches for &apos;if&apos; and &apos;else&apos;.

[modules/filters/mod_proxy_html.c:381] -&gt; [modules/filters/mod_proxy_html.c:374]: (style) Duplicate conditions in &apos;if&apos; and related &apos;else if&apos;

[modules/proxy/proxy_util.c:2800]: (warning) When using &apos;char&apos; variables in bit operations, sign extension can generate unexpected results.
[modules/ssl/ssl_util.c:481]: (error) Possible null pointer dereference: psaptr
[server/apreq_module_cgi.c:232]: (warning) Ineffective statement similar to &apos;*A++;&apos;. Did you intend to write &apos;(*A)++;&apos;?
[server/mpm/netware/mpm_netware.c:1189]: (warning) Redundant assignment of &apos;screenID&apos; to itself.



Hope it helps a little.

Julien</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>55619</bug_id>
          
          <creation_ts>2013-10-02 15:48:15 +0000</creation_ts>
          <short_desc>Apache httpd reported 500 internal error when uploading files by WebDav</short_desc>
          <delta_ts>2013-10-02 15:49:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.25</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shiyuan Xiao">shiyuan.xiao</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>shiyuan.xiao</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>170390</commentid>
    <comment_count>0</comment_count>
    <who name="Shiyuan Xiao">shiyuan.xiao</who>
    <bug_when>2013-10-02 15:48:15 +0000</bug_when>
    <thetext>When there are multiple clients upload files by WebDav, Apache httpd may report 500 internal error as below and the upload will failed.

[Wed Oct 02 23:49:19 2013] [error] [client 10.0.1.2] The resource was created successfully, but there was a problem inheriting locks from the parent resource.  [500, #0]
[Wed Oct 02 23:49:19 2013] [error] [client 10.0.1.2] Could not open the lock database.  [500, #400]
[Wed Oct 02 23:49:19 2013] [error] [client 10.0.1.2] (35)Resource deadlock avoided: Could not open property database.  [500, #1]</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>55627</bug_id>
          
          <creation_ts>2013-10-04 21:15:02 +0000</creation_ts>
          <short_desc>Remove unnecessary APLOGNO() for trace logging per dev@ discussions</short_desc>
          <delta_ts>2013-10-04 21:16:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jackie Chang">jackie.qq.chang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>170423</commentid>
    <comment_count>0</comment_count>
      <attachid>30903</attachid>
    <who name="Jackie Chang">jackie.qq.chang</who>
    <bug_when>2013-10-04 21:15:02 +0000</bug_when>
    <thetext>Created attachment 30903
The proposed patch. Removed APLOGNO() in 5 TRACE-level log stmts.

Similar to revision-1428280: http://svn.apache.org/viewvc?view=revision&amp;revision=1428280

Developer discussions see, for example, http://apache.markmail.org/message/acjalyzjo34cmwes?q=modules/proxy/mod_proxy_ftp%2Ec+APLOGNO&amp;page=2

Thanks!</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>30903</attachid>
            <date>2013-10-04 21:15:02 +0000</date>
            <delta_ts>2013-10-04 21:16:43 +0000</delta_ts>
            <desc>The proposed patch. Removed APLOGNO() in 5 TRACE-level log stmts.</desc>
            <filename>APACHE.diff</filename>
            <type>text/plain</type>
            <size>2623</size>
            <attacher name="Jackie Chang">jackie.qq.chang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>55738</bug_id>
          
          <creation_ts>2013-11-03 10:06:46 +0000</creation_ts>
          <short_desc>PVS-Studio: few issues</short_desc>
          <delta_ts>2013-11-03 10:06:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrey Karpov">karpov</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>171011</commentid>
    <comment_count>0</comment_count>
    <who name="Andrey Karpov">karpov</who>
    <bug_when>2013-11-03 10:06:46 +0000</bug_when>
    <thetext>Hello. I am recheck httpd-trunk 2.5.0 and find few issues.
I am use PVS-Studio Static Code Analyzer http://www.viva64.com/

Suspicious:

V528 It is odd that pointer to &apos;char&apos; type is compared with the &apos;\0&apos; value. Probably meant: ** ctx-&gt;re_source == &apos;\0&apos;. libhttpd util_expr_eval.c 167

V528: http://www.viva64.com/en/d/0117/

typedef struct {
  ....
  const char **re_source;
  ....
} ap_expr_eval_ctx_t;

static const char *ap_expr_eval_re_backref(ap_expr_eval_ctx_t *ctx, unsigned int n)
{
  int len;
  if (!ctx-&gt;re_pmatch || !ctx-&gt;re_source ||
      *ctx-&gt;re_source == &apos;\0&apos; ||
      ctx-&gt;re_nmatch &lt; n + 1)
    return &quot;&quot;;
  ....
}
-------------------------------------------------------------------------------
V597 The compiler could delete the &apos;memset&apos; function call, which is used to flush &apos;x&apos; buffer. The RtlSecureZeroMemory() function should be used to erase the private data. apr apr_md4.c 362

V597: http://www.viva64.com/en/d/0208/

static void MD4Transform(apr_uint32_t state[4], const unsigned char block[64])
{
  apr_uint32_t a = state[0], b = state[1],
               c = state[2], d = state[3],
               x[APR_MD4_DIGESTSIZE];  
  ....
  /* Zeroize sensitive information. */
  memset(x, 0, sizeof(x));
}

V597 The compiler could delete the &apos;memset&apos; function call, which is used to flush &apos;tmpbuf&apos; buffer. The RtlSecureZeroMemory() function should be used to erase the private data. apr apr_md5.c 436
V597 The compiler could delete the &apos;memset&apos; function call, which is used to flush &apos;final&apos; buffer. The RtlSecureZeroMemory() function should be used to erase the private data. apr apr_md5.c 662
V597 The compiler could delete the &apos;memset&apos; function call, which is used to flush &apos;tmpbuf&apos; buffer. The RtlSecureZeroMemory() function should be used to erase the private data. aprutil apr_md5.c 436
V597 The compiler could delete the &apos;memset&apos; function call, which is used to flush &apos;final&apos; buffer. The RtlSecureZeroMemory() function should be used to erase the private data. aprutil apr_md5.c 662
V597 The compiler could delete the &apos;memset&apos; function call, which is used to flush &apos;x&apos; buffer. The RtlSecureZeroMemory() function should be used to erase the private data. aprutil apr_md4.c 362
V597 The compiler could delete the &apos;memset&apos; function call, which is used to flush &apos;buf&apos; buffer. The RtlSecureZeroMemory() function should be used to erase the private data. htdbm passwd_common.c 165
-------------------------------------------------------------------------------
V614 Potentially uninitialized pointer &apos;wch&apos; used. apr start.c 58

V614: http://www.viva64.com/en/d/0230/

static int warrsztoastr(const char * const * *retarr,
                        const wchar_t * arrsz, int args)
{
  const apr_wchar_t *wch;
  ....

  if (args &lt; 0) {
    for (args = 1, wch = arrsz; wch[0] || wch[1]; ++wch)
      if (!*wch)
       ++args;
  }
  wsize = 1 + wch - arrsz;
  ....
}
-------------------------------------------------------------------------------
V654 The condition &apos;retry &lt; 2&apos; of loop is always true. mod_proxy_wstunnel mod_proxy_wstunnel.c 436

V654: http://www.viva64.com/en/d/0275/

static int proxy_wstunnel_handler(....)
{
  int retry;
  ....
  retry = 0;
  while (retry &lt; 2) {
    char *locurl = url;
    ....
    // Variable &apos;retry&apos; is not used
    ....
  }
  ....
}

----
Best regards,
Andrey Karpov
Ph.D. in Mathematics, CTO
OOO &quot;Program Verification Systems&quot; (Co Ltd)
URL: www.viva64.com
E-Mail: karpov@viva64.com</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>55883</bug_id>
          
          <creation_ts>2013-12-14 01:57:50 +0000</creation_ts>
          <short_desc>string callers of ap_expr should be able to transform expr with regexes</short_desc>
          <delta_ts>2016-07-06 05:45:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.6</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Eric Covener">covener</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>171740</commentid>
    <comment_count>0</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-12-14 01:57:50 +0000</bug_when>
    <thetext>IIUC modules that pull string values out of ap_expr can&apos;t make use of regexes in the expression to transform the value before it pops out.  

This is because the starting state is &quot;string&quot; and while backrefs are reachable, operators that actually do a regex are not.

Maybe a three-parm function (string, regex, replacement) kind of like preg_replace()? e.g. subst(&quot;^/[^/]+/(.*)&quot;, &quot;$1&quot;, %{FOO})</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>192128</commentid>
    <comment_count>1</comment_count>
      <attachid>34008</attachid>
    <who name="">breakbreadallday</who>
    <bug_when>2016-07-05 03:14:57 +0000</bug_when>
    <thetext>Created attachment 34008
&lt;SPAM&gt;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34008</attachid>
            <date>2016-07-05 03:14:57 +0000</date>
            <delta_ts>2016-07-06 05:45:17 +0000</delta_ts>
            <desc>&lt;SPAM&gt;</desc>
            <filename>download.html</filename>
            <type>text/plain</type>
            <size>100521</size>
            <attacher>breakbreadallday</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>55898</bug_id>
          
          <creation_ts>2013-12-17 17:32:43 +0000</creation_ts>
          <short_desc>[RFE] listen on unix socket?</short_desc>
          <delta_ts>2013-12-17 17:32:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hans Henrik">divinity76</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>171797</commentid>
    <comment_count>0</comment_count>
    <who name="Hans Henrik">divinity76</who>
    <bug_when>2013-12-17 17:32:43 +0000</bug_when>
    <thetext>would be nice to have support for listening to unix sockets instead of tpc ports (reasons include, not having to dedicate a tcp port, performance, filesystem based access control~)

syntax could something like this
  Listen unix:/tmp/nginx1.sock;

(which is how nginx does it)

i realize its not a much needed feature (else it&apos;d be implemented already right?), but i need something like this right now, and Nginx has supported this for years (since 2009)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>55914</bug_id>
          
          <creation_ts>2013-12-20 12:35:57 +0000</creation_ts>
          <short_desc>child exit segmentation fault after apache graceful</short_desc>
          <delta_ts>2015-07-06 06:38:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.7</version>
          <rep_platform>Sun</rep_platform>
          <op_sys>Solaris</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>regression</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christophe WEIDEMANN">chriswaddi007</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>bash</cc>
    
    <cc>chriswaddi007</cc>
    
    <cc>n.akhnin</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>171855</commentid>
    <comment_count>0</comment_count>
      <attachid>31138</attachid>
    <who name="Christophe WEIDEMANN">chriswaddi007</who>
    <bug_when>2013-12-20 12:35:57 +0000</bug_when>
    <thetext>Created attachment 31138
result of pstack on core file generated

hello,
i&apos;m working on Solaris 10 and i&apos;ve upgraded my apache from 2.2.23 to 2.4.7. Since then, i have children crashing after a graceful restart. It does not appear after each graceful restart but sometimes. When it occurs, each time i have a request in my access log, a child is crashing. Doing a normal restart is never causing this problem.

Here is a extract of the error log (with LogLevel warn):

[Thu Dec 19 15:51:34.905734 2013] [mpm_worker:notice] [pid 24913:tid 1] AH00297: SIGUSR1 received.  Doing graceful restart
[Thu Dec 19 15:51:36.050587 2013] [mpm_worker:notice] [pid 24913:tid 1] AH00292: Apache/2.4.7 (Unix) mod_auth_kerb/5.4 OpenSSL/0.9.8k configured -- resuming normal operations
[Thu Dec 19 15:51:36.050644 2013] [core:notice] [pid 24913:tid 1] AH00094: Command line: &apos;/local/products/sslproxy/bin/httpd&apos;
[Thu Dec 19 15:51:36.050729 2013] [mpm_worker:warn] [pid 24913:tid 1] AH00291: long lost child came home! (pid 24915)
[Thu Dec 19 15:52:29.076927 2013] [core:notice] [pid 24913:tid 1] AH00052: child pid 3773 exit signal Segmentation fault (11)
[Thu Dec 19 15:53:29.093903 2013] [core:notice] [pid 24913:tid 1] AH00052: child pid 3771 exit signal Segmentation fault (11)
[Thu Dec 19 15:54:30.111803 2013] [core:notice] [pid 24913:tid 1] AH00052: child pid 5049 exit signal Segmentation fault (11)
[Thu Dec 19 15:55:30.129161 2013] [core:notice] [pid 24913:tid 1] AH00052: child pid 5844 exit signal Segmentation fault (11)

i put the LogLevel to trace8 level to see what&apos;s happening just before the crash:
[Thu Dec 19 18:01:07.144950 2013] [core:trace6] [pid 12540:tid 27] core_filters.c(527): [client 136.10.10.10:38372] core_output_filter: flushing because of FLUSH bucket
[Thu Dec 19 18:01:07.147988 2013] [core:trace6] [pid 12540:tid 27] core_filters.c(527): [client 136.10.10.10:38372] core_output_filter: flushing because of FLUSH bucket
[Thu Dec 19 18:01:07.164183 2013] [proxy:debug] [pid 12540:tid 27] proxy_util.c(2035): AH00943: http: has released connection for (eur-lex.europa.eu)
[Thu Dec 19 18:01:07.164434 2013] [proxy_http:trace2] [pid 12540:tid 27] mod_proxy_http.c(1793): [client 136.10.10.10:38372] end body send
[Thu Dec 19 18:01:07.200666 2013] [core:notice] [pid 24913:tid 1] AH00051: child pid 12484 exit signal Segmentation fault (11), possible coredump in /local/products/sslproxy
[Thu Dec 19 18:01:07.200864 2013] [core:trace4] [pid 24913:tid 1] mpm_common.c(530): mpm child 12484 (gen 3/slot 1) exited
[Thu Dec 19 18:01:08.209248 2013] [core:trace4] [pid 24913:tid 1] mpm_common.c(530): mpm child 12545 (gen 3/slot 1) started

And i did a pstack on the core file generated. I will put it in attachment.


Despite the traces put in place, i do not know what is causing this problem. Can  
you help me on this topic? I have to find the root cause otherwise i will have to go back to apache 2.2.

Thanks for your help .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>171857</commentid>
    <comment_count>1</comment_count>
    <who name="Rainer Jung">rainer.jung</who>
    <bug_when>2013-12-20 13:19:40 +0000</bug_when>
    <thetext>Could it be this problem:

https://issues.apache.org/bugzilla/show_bug.cgi?id=50335

In that case the following two patches should help:

http://svn.apache.org/viewvc?view=revision&amp;revision=1534321
http://svn.apache.org/viewvc?view=revision&amp;revision=1550061

Did you change any LoadModule items in configuration before doing the graceful restart?

Another possible crash I&apos;m aware of is when using both mod_logio and mod_status. In this case explicitely setting &quot;ExtendedStatus Off&quot; should fix it.

Are there any non-standard modules active?

Not very likely but also possible:

https://issues.apache.org/bugzilla/show_bug.cgi?id=54357

Regards,

Rainer</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>171882</commentid>
    <comment_count>2</comment_count>
    <who name="Christophe WEIDEMANN">chriswaddi007</who>
    <bug_when>2013-12-22 11:47:11 +0000</bug_when>
    <thetext>What i can tell you is that it appears &quot;randomly&quot; only after a graceful restart. I did not change any LoadModule items before the restart and i&apos;m not using mod_logio. The server was not stressed when it happened Concerning the modules , only standard modules are used except mod_auth_kerb. But i was already using it  with apache 2.2 release without problem.


Details of Loaded Modules:
 core_module (static)
 so_module (static)
 http_module (static)
 access_compat_module (shared)
 actions_module (shared)
 alias_module (shared)
 authn_core_module (shared)
 auth_basic_module (shared)
 auth_kerb_module (shared)
 authn_file_module (shared)
 authnz_ldap_module (shared)
 authz_core_module (shared)
 authz_groupfile_module (shared)
 authz_host_module (shared)
 authz_owner_module (shared)
 authz_user_module (shared)
 autoindex_module (shared)
 socache_shmcb_module (shared)
 slotmem_shm_module (shared)
 cgid_module (shared)
 dir_module (shared)
 env_module (shared)
 expires_module (shared)
 headers_module (shared)
 imagemap_module (shared)
 include_module (shared)
 info_module (shared)
 lbmethod_byrequests_module (shared)
 ldap_module (shared)
 log_config_module (shared)
 logio_module (shared)
 mime_magic_module (shared)
 mpm_worker_module (shared)
 mime_module (shared)
 negotiation_module (shared)
 proxy_module (shared)
 proxy_balancer_module (shared)
 proxy_connect_module (shared)
 proxy_http_module (shared)
 rewrite_module (shared)
 setenvif_module (shared)
 speling_module (shared)
 ssl_module (shared)
 status_module (shared)
 unique_id_module (shared)
 unixd_module (shared)

I compiled with the following line:
./configure --prefix=/local/products/revproxy --with-ldap \
--with-ssl=/usr/local/ssl \
--enable-mods-shared=\
&quot;all ssl ldap cache proxy authn_alias file_cache authnz_ldap charset_lite \
dav_lock cache_disk imagemap&quot; \
--with-included-apr \
--enable-nonportable-atomics=yes \
--enable-mpms-shared=all</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>171883</commentid>
    <comment_count>3</comment_count>
    <who name="Rainer Jung">rainer.jung</who>
    <bug_when>2013-12-22 12:41:05 +0000</bug_when>
    <thetext>(In reply to Christophe WEIDEMANN from comment #2)
&gt; What i can tell you is that it appears &quot;randomly&quot; only after a graceful
&gt; restart. I did not change any LoadModule items before the restart and i&apos;m
&gt; not using mod_logio.

But your below list of loaded modules shows mod_lgio an mod_status, so you should try whether explicitely setting

ExtendedStatus Off

helps (or disable loading mod_logio and check whether it actually vanished from the list of loaded modules).

&gt; The server was not stressed when it happened Concerning
&gt; the modules , only standard modules are used except mod_auth_kerb. But i was
&gt; already using it  with apache 2.2 release without problem.

Apart from the mod_logio problem I think it should not be the mod_ssl problem I cited, because you pstack output isn&apos;t a good fit for that problem. You might want to check a few crashes though, whether the pstack results are consistent (so that it is clear we are looking at the right debug info).

In addition to disable mod_logio or ExtendedStatus Off, suggest you try the tweo patches I mentioned:

http://svn.apache.org/viewvc?view=revision&amp;revision=1534321
http://svn.apache.org/viewvc?view=revision&amp;revision=1550061

That bug is not about restarts but about a pool lifecycle problem so I can&apos;t rule out that it might also manifest during a restart. Both patches are for mod_proxy_http and are very small, so easy to apply.

Regards,

Rainer</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>172122</commentid>
    <comment_count>4</comment_count>
    <who name="">bash</who>
    <bug_when>2014-01-06 19:46:16 +0000</bug_when>
    <thetext>We are experiencing the same issue with httpd-2.4.7. A graceful restart results in the child segfaulting, in this case it happens to be a mod_jk(1.2.37) child (if there is such a thing).

We have both mod_logio and mod_status loaded.

We were able to work around the problem by setting the ExtendedStatus directive to &apos;off&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>172163</commentid>
    <comment_count>5</comment_count>
    <who name="DigitalDude">millennium.bug</who>
    <bug_when>2014-01-08 09:51:11 +0000</bug_when>
    <thetext>There is no debug output and no coredumps.
I sometimes get &quot;failed to open stream: HTTP request failed!&quot;
and segmentation fault. 
version: httpd-2.4.7
Disabling mod_logio and mod_status with ExtendedStatus=Off does not help in my case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>183901</commentid>
    <comment_count>6</comment_count>
    <who name="Nikita Akhnin">n.akhnin</who>
    <bug_when>2015-07-06 06:38:51 +0000</bug_when>
    <thetext>I&apos;m experiencing the same issue with httpd-2.4.12, segfaulting after each graceful restart. And work around the problem by setting the ExtendedStatus directive to &apos;off&apos; are worked for me too. Both of mod_logio and mod_status are loaded.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>31138</attachid>
            <date>2013-12-20 12:35:57 +0000</date>
            <delta_ts>2013-12-20 12:35:57 +0000</delta_ts>
            <desc>result of pstack on core file generated</desc>
            <filename>pstack.txt</filename>
            <type>text/plain</type>
            <size>15740</size>
            <attacher name="Christophe WEIDEMANN">chriswaddi007</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>56064</bug_id>
          
          <creation_ts>2014-01-25 21:00:03 +0000</creation_ts>
          <short_desc>Optimize PNGs</short_desc>
          <delta_ts>2014-01-25 21:00:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ville Skyttä">ville.skytta</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>172693</commentid>
    <comment_count>0</comment_count>
    <who name="Ville Skyttä">ville.skytta</who>
    <bug_when>2014-01-25 21:00:03 +0000</bug_when>
    <thetext>Optimizing PNGs would save some space without any loss of functionality I&apos;m aware of, for example OptiPNG 0.7.4 would shave ~16% off them in total for current trunk:

$ find . -name &quot;*.png&quot; | xargs du -bc | tail -n 1
685147	total
$ find . -name &quot;*.png&quot; | xargs -n4 -P4 optipng -q -o7
$ find . -name &quot;*.png&quot; | xargs du -bc | tail -n 1
577135	total</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>56081</bug_id>
          
          <creation_ts>2014-01-28 22:22:29 +0000</creation_ts>
          <short_desc>Apache 2.2.26 SIGSEGVs when POST&apos;ing data</short_desc>
          <delta_ts>2014-01-28 22:22:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.26</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gary S">gary</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>172771</commentid>
    <comment_count>0</comment_count>
    <who name="Gary S">gary</who>
    <bug_when>2014-01-28 22:22:29 +0000</bug_when>
    <thetext>1.) Starting apache, for the first x minutes POST data works
2.) After say, 5+ minutes, POST data stops working (using CURL to test out the posts and the likes)

Inital bt:

#0  0x00007f524f8cc86f in ?? ()
#1  0x0000000000440cdf in ap_is_recursion_limit_exceeded ()
#2  0x00000000004b8ade in ap_byterange_filter ()
#3  0x000000000045bbbf in get_ptoken ()
#4  0x000000000045c070 in parse_expr ()
#5  0x00000000004e49c9 in ?? ()
#6  0x00007f524fb3c710 in ?? ()
#7  0x0000000000000000 in ?? ()

Detailed bt:

#0  0x00007f125e3f3451 in ?? ()
No symbol table info available.
#1  0x0000000000440ad8 in server_hostname_port (cmd=0x2525638, dummy=0x11e1a300, arg=0x250c7e0 &quot;x\305P\002&quot;) at core.c:2360
        err = 0x0
        portstr = 0x250d028 &quot;\360\305P\002&quot;
        part = 0x2526cb8 &quot;8VR\002&quot;
        scheme = 0x250c5f0 &quot;x\305P\002&quot;
        port = 0
#2  0x00000000004b496a in extract_dn (t=0x0, nids=0x25256b0, pfx=0x2525638 &quot;x\305P\002&quot;, xn=0x11e1a300, p=0x250c7e0) at ssl_engine_vars.c:701
        ents = 0x2526cb8
        xsne = 0x250c5f0
        count = 0x0
        i = 32767
        nid = 0
#3  0x000000000045b9b7 in get_basic_auth (r=0x45b9b7, user=0x7fff256c9f80, pw=0x0) at mod_auth_basic.c:159
        auth_line = 0x24bde18 &quot;\vHK&quot;
        decoded_line = 0x250c7e0 &quot;x\305P\002&quot;
        length = -1
#4  0x000000000045be68 in cache_url_handler (r=0x45b9b7, lookup=32767) at mod_cache.c:73
        rv = 0
        auth = 0x250c7e0 &quot;x\305P\002&quot;
        providers = 0x24bde18
        cache = 0xffffffff00000000
        conf = 0x7fff256c9fb0
        out = 0x45be68
        next = 0x250c5f0
        cache_out_handle = 0x250c7e0
#5  0x00000000004e0855 in subst_prefix_path (r=0xffffffff00000000, input=0x250c578 &quot;h\245P\002&quot;, match=0x250a470 &quot;\002&quot;, subst=0x250a7b0 &quot;h\245P\002&quot;) at mod_rewrite.c:930
        len = 7831192
#6  0x00000000004e0a3a in set_cache_value (name=0x4e0a3a &quot;\211\307\350\317\303\364\377H\213\005\340n%&quot;, t=140733821264032, key=0x7fff256ca1f4 &quot;\002&quot;, 
    val=0xc3562 &lt;Address 0xc3562 out of bounds&gt;) at mod_rewrite.c:982
        map = 0x781908
#7  0x00000000004e0cdf in get_cache_value (name=0x7f12600efb80 &quot;\v&quot;, t=4294967295, key=0x2256ca1f8 &lt;Address 0x2256ca1f8 out of bounds&gt;, p=0x7fff256ca1f4)
    at mod_rewrite.c:1062
        map = 0x700000004
        val = 0x8 &lt;Address 0x8 out of bounds&gt;
#8  0x00000000004e123c in run_rewritemap_programs (s=0x0, p=0x0) at mod_rewrite.c:1240
        fpin = 0x7f125ed7edbb
        fpout = 0x0
        map = 0x787300
        val = 0x773080
        conf = 0x78d358
        hi = 0x787328
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit--- 
        rc = 37338344
        lock_warning_issued = 0
#9  0x000000000042fff9 in main (argc=4, argv=0x7fff256ca408) at main.c:527
        new = 0x77b2a0
        c = 68 &apos;D&apos;
        configtestonly = 0
        ap_dump_loaded_directives = 0
        confname = 0x4e3c9b &quot;\001E\220H\213E\260H\203\300\001H\211E\230\351@\002&quot;
        def_server_root = 0x4e3cab &quot;@\002&quot;
        temp_error_log = 0x0
        error = 0x0
        process = 0x777288
        server_conf = 0x781908
        pglobal = 0x777198
        pconf = 0x7791a8
        plog = 0x78d358
        ptemp = 0x787328
        pcommands = 0x77b1b8
        opt = 0x77b2a8
        rv = 0
        mod = 0x71e5d0
        optarg = 0x7fff256caf59 &quot;SSL&quot;
        signal_server = 0x45e589 &lt;add_cache_enable+71&gt;

ctrl-x 2 gives

Cannot access memory at address 0x7f125e3f3451
(gdb) 

null pointer?

# egrep 7f125e3 maps
7f125e16f000-7f125e36f000 ---p 00041000 08:05 40963                      /lib64/libgssapi_krb5.so.2.2
7f125e36f000-7f125e370000 r--p 00041000 08:05 40963                      /lib64/libgssapi_krb5.so.2.2
7f125e370000-7f125e372000 rw-p 00042000 08:05 40963                      /lib64/libgssapi_krb5.so.2.2
7f125e372000-7f125e4fd000 r-xp 00000000 08:05 41104                      /lib64/libc-2.12.so

 (gdb) up
#1  0x0000000000440ad8 in server_hostname_port (cmd=0x2525638, dummy=0x11e1a300, arg=0x250c7e0 &quot;x\305P\002&quot;) at core.c:2360
2360          ap_str_tolower(scheme);
(gdb) l
2355
2356        part = ap_strstr_c(arg, &quot;://&quot;);
2357
2358        if (part) {
2359          scheme = apr_pstrmemdup(cmd-&gt;pool, arg, part - arg);
2360          ap_str_tolower(scheme);
2361          cmd-&gt;server-&gt;server_scheme = scheme;
2362          part += 3;
2363        } else {
2364          part = arg;
(gdb)

(gdb) down
#1  0x0000000000440ad8 in server_hostname_port (cmd=0x252abf8, dummy=0x11e1a300, arg=0x2510da0 &quot;8\vQ\002&quot;) at core.c:2360
2360          ap_str_tolower(scheme);
(gdb) list
2355
2356        part = ap_strstr_c(arg, &quot;://&quot;);
2357
2358        if (part) {
2359          scheme = apr_pstrmemdup(cmd-&gt;pool, arg, part - arg);
2360          ap_str_tolower(scheme);
2361          cmd-&gt;server-&gt;server_scheme = scheme;
2362          part += 3;
2363        } else {
2364          part = arg;
(gdb) print cmd-&gt;pool
$2 = (apr_pool_t *) 0x0
(gdb) print cmd
$3 = (cmd_parms *) 0x252abf8
(gdb) ptype cmd
type = struct cmd_parms_struct {
    void *info;
    int override;
    apr_int64_t limited;
    apr_array_header_t *limited_xmethods;
    ap_method_list_t *xlimited;
    ap_configfile_t *config_file;
    ap_directive_t *directive;
    apr_pool_t *pool;
    apr_pool_t *temp_pool;
    server_rec *server;
    char *path;
    const command_rec *cmd;
    struct ap_conf_vector_t *context;
    const ap_directive_t *err_directive;
    int override_opts;
} *
(gdb) print *cmd
$4 = {info = 0x2510b38, override = 0, limited = 0, limited_xmethods = 0x2510b40, xlimited = 0x252c1b8, config_file = 0x252c298, directive = 0x250ea30, pool = 0x0, temp_pool = 0x0, server = 0x0, 
  path = 0x4e52a8 &quot;\225&quot;, cmd = 0x252abd0, context = 0x252abd0, err_directive = 0x252ac70, override_opts = 0}</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>56247</bug_id>
          
          <creation_ts>2014-03-12 11:04:00 +0000</creation_ts>
          <short_desc>semaphore creation for proxypass</short_desc>
          <delta_ts>2014-03-12 11:04:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.7</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Angitha">angitha</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>173760</commentid>
    <comment_count>0</comment_count>
    <who name="Angitha">angitha</who>
    <bug_when>2014-03-12 11:04:00 +0000</bug_when>
    <thetext>Hello,


 I installed apache 2.4.7 in a Linux box(rhel 6.3). Whenever apache is started 404 semaphores are created.
==
ipcs -s|wc -l
404
==
If i reduce the number of proxypass rules, semaphores also reduces. Is there any way to control it?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>56621</bug_id>
          
          <creation_ts>2014-06-13 16:25:04 +0000</creation_ts>
          <short_desc>Rotatelogs.exe first start</short_desc>
          <delta_ts>2014-06-13 16:25:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.25</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>waqar.khan</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>175805</commentid>
    <comment_count>0</comment_count>
      <attachid>31714</attachid>
    <who name="">waqar.khan</who>
    <bug_when>2014-06-13 16:25:04 +0000</bug_when>
    <thetext>Created attachment 31714
Multiple files created upon start up

Hi all,

When making a change to httpd.conf and restarting Apache service multiple log files are created. I have attached a screenshot for illustration. Here is the configuration for rotatelogs.exe inside httpd.conf: 

ErrorLog &quot;|bin/rotatelogs logs/error.log 100M&quot;

CustomLog &quot;|bin/rotatelogs logs/access.log 100M&quot; common

ErrorLog &quot;|bin/rotatelogs logs/secure_error.log 100M&quot;
CustomLog &quot;|bin/rotatelogs logs/secure_access.log 100M&quot; common

Another issue, which I have not been able to replicate, when I enter this into a different httpd.conf file on a different server, it seems to rotate the logs every circa 2 mins, not at 100M. I am unable to find anything different in the config. 

Regards</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>31714</attachid>
            <date>2014-06-13 16:25:04 +0000</date>
            <delta_ts>2014-06-13 16:25:04 +0000</delta_ts>
            <desc>Multiple files created upon start up</desc>
            <filename>Rotatelogsmultiple.jpg</filename>
            <type>image/jpeg</type>
            <size>72352</size>
            <attacher>waqar.khan</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>57160</bug_id>
          
          <creation_ts>2014-10-29 02:16:38 +0000</creation_ts>
          <short_desc>httxt2dbm doesn&apos;t generate files on NAS</short_desc>
          <delta_ts>2014-10-29 02:16:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.10</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>nlrreddy</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>178806</commentid>
    <comment_count>0</comment_count>
    <who name="">nlrreddy</who>
    <bug_when>2014-10-29 02:16:38 +0000</bug_when>
    <thetext>When I try to run httxt2dbm on a txt file it doesn&apos;t generate anything (its like the command gets stuck until I hit Ctrl C). It doesn&apos;t generate .dir and .pag files. All this happens if I try to generate the files on NAS. If I try the same command on local drive it works just fine. 

Also, If the same DBM files are on NAS and apache is configured to using them, the server starts fine but won&apos;t respond and hits high load averages.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>57372</bug_id>
          
          <creation_ts>2014-12-19 14:38:42 +0000</creation_ts>
          <short_desc>httpd will lookup every home directory while starting</short_desc>
          <delta_ts>2014-12-19 14:38:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.15</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="William Epler">william.epler</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>179871</commentid>
    <comment_count>0</comment_count>
    <who name="William Epler">william.epler</who>
    <bug_when>2014-12-19 14:38:42 +0000</bug_when>
    <thetext>Given setup: 
RHEL 6.5 httpd-2.2.15-29.el6_4.x86_64
The several home directories will be mounted on demand by autofs

# service httpd start
will look into every home directory as listed by &quot;getent passwd&quot;.
Result: All (thousands of) home directories are mounted - affects server and network performance

Same behavior without &quot;mod_userdir&quot;

Not seen on RHEL5 (httpd-2.2.3-31.el5)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>57383</bug_id>
          
          <creation_ts>2014-12-21 17:48:53 +0000</creation_ts>
          <short_desc>Error retrieving Report: An Existing connection was forcibly closed by the remote host.</short_desc>
          <delta_ts>2014-12-23 20:18:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.0</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="narasimha">murthyn118</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>murthyn118</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>179918</commentid>
    <comment_count>0</comment_count>
      <attachid>32316</attachid>
    <who name="narasimha">murthyn118</who>
    <bug_when>2014-12-21 17:48:53 +0000</bug_when>
    <thetext>Created attachment 32316
error what we get

While using Tortoise SVN client 1.8.8 we got the Issue like &quot;Error retriving Report: An Existing connection was forcibly closed by the remote host.&quot;

when I downgrading to 1.6.11 checked out successfully.

Sometimes tortoise svn client 1.8.8 working in local network machines but Failed in out side of local network.

can you please provide solution for this issue.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>32316</attachid>
            <date>2014-12-21 17:48:53 +0000</date>
            <delta_ts>2014-12-21 17:48:53 +0000</delta_ts>
            <desc>error what we get</desc>
            <filename>error.png</filename>
            <type>image/png</type>
            <size>194089</size>
            <attacher name="narasimha">murthyn118</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>57492</bug_id>
          
          <creation_ts>2015-01-24 17:05:06 +0000</creation_ts>
          <short_desc>incomplete chunked-transfered request body is not correctly de-chunked</short_desc>
          <delta_ts>2015-01-25 01:57:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.10</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>57485</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter>charleschung.cn</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>charleschung.cn</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>180550</commentid>
    <comment_count>0</comment_count>
    <who name="">charleschung.cn</who>
    <bug_when>2015-01-24 17:05:06 +0000</bug_when>
    <thetext>I created an issue in mod_jk modules(https://issues.apache.org/bugzilla/show_bug.cgi?id=57485),but the cause seems to lie in httpd or apr,would anyone help to check it?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>58364</bug_id>
          
          <creation_ts>2015-09-11 12:06:38 +0000</creation_ts>
          <short_desc>Apache Server is restarted time to time (Release 2.4.10)</short_desc>
          <delta_ts>2015-09-11 12:06:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.10</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>regression</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Senthil">senlog80</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>185109</commentid>
    <comment_count>0</comment_count>
      <attachid>33096</attachid>
    <who name="Senthil">senlog80</who>
    <bug_when>2015-09-11 12:06:38 +0000</bug_when>
    <thetext>Created attachment 33096
Apache Error log attached

Hello,

I am using Apache release 2.4.10 in Windows Server 2008.  Time to time the Apache server is getting restarted.
The service is unavailable for 3-5 minutes and after that the service is started up automatically.  This issue occurs frequently.  twice a day, two days once etc..

But the Apache release 2.2.25 is working fine in our environment.

Apache Error.log is recorded with following details

&quot;Cannot serve directory D:/8770/Client/Help/: No matching DirectoryIndex (index.php) found, and server-generated directory index forbidden by Options directive&quot;

[Tue Apr 28 09: 24: 08.138835 2015] [mpm_winnt: warn] [pid 13308: 3024 tid] (OS 64) The specified network name is no longer available. : AH00341: winnt_accept: Asynchronous AcceptEx failed.

For the above issue, I tried the following in the httpd.conf file
      AcceptFilter https none
      AcceptFilter http none
      EnableSendfile Off
      EnableMMAP off
But it is not working.

The scenario seems to be the issue discussed in the topic &quot;http://www.apachelounge.com/viewtopic.php?t=4543&quot; where they face the issue with APR 1.4.5 and 1.4.6.

Any help is highly appreciated.

Senthil</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>33096</attachid>
            <date>2015-09-11 12:06:38 +0000</date>
            <delta_ts>2015-09-11 12:06:38 +0000</delta_ts>
            <desc>Apache Error log attached</desc>
            <filename>error.log</filename>
            <type>text/plain</type>
            <size>154715</size>
            <attacher name="Senthil">senlog80</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>58855</bug_id>
          
          <creation_ts>2016-01-14 08:05:29 +0000</creation_ts>
          <short_desc>Don&apos;t read through entire string when testing for emptiness</short_desc>
          <delta_ts>2016-05-16 14:54:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>PatchAvailable</keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael McConville">mmcco</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>187652</commentid>
    <comment_count>0</comment_count>
      <attachid>33440</attachid>
    <who name="Michael McConville">mmcco</who>
    <bug_when>2016-01-14 08:05:29 +0000</bug_when>
    <thetext>Created attachment 33440
Patch to optimize empty string checks

strlen unconditionally reads through the entire string, so it&apos;s unfortunate to use it when determining whether a string is empty. Simply dereferencing the pointer and comparing it with &apos;\0&apos; is simpler and faster. Compilers are generally bad at making these kinds of optimizations, so it&apos;s best to do them manually.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>33440</attachid>
            <date>2016-01-14 08:05:29 +0000</date>
            <delta_ts>2016-01-14 08:05:29 +0000</delta_ts>
            <desc>Patch to optimize empty string checks</desc>
            <filename>a.diff</filename>
            <type>text/plain</type>
            <size>8784</size>
            <attacher name="Michael McConville">mmcco</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>58990</bug_id>
          
          <creation_ts>2016-02-10 19:41:47 +0000</creation_ts>
          <short_desc>Option to send &quot;406 Not Acceptable&quot; when mime type in &quot;Accept&quot; header cannot be fulfilled</short_desc>
          <delta_ts>2016-02-10 19:41:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>cweiske+bz.apache.org</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>3</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>188339</commentid>
    <comment_count>0</comment_count>
    <who name="">cweiske+bz.apache.org</who>
    <bug_when>2016-02-10 19:41:47 +0000</bug_when>
    <thetext>Apache 2 returns as &quot;200 OK&quot; status code with the full contents when requesting a URL with an &quot;Accept&quot; header that does not match the content type:

&gt; $ curl -I -H &apos;Accept: image/png&apos; httpd.apache.org/
&gt; HTTP/1.1 200 OK
&gt; ...
&gt; Content-Type: text/html

This is allowed by RFC 2616[1]:

&gt; Note: HTTP/1.1 servers are allowed to return responses which are
&gt; not acceptable according to the accept headers sent in the
&gt; request.

I would still like to be able to force (configure) Apache to return a &quot;406 Not Acceptable&quot; when it cannot deliver the content type the client requests.

This would save bandwidth when e.g. crawlers fetch all links on a web site and express that they only understand HTML in their Accept header. Images and file downloads wouldn&apos;t be delivered to them then, saving bandwidth.


This issue is similare to bug #17936, but this here is a feature request.

[1] https://tools.ietf.org/html/rfc2616#section-10.4.7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>59007</bug_id>
          
          <creation_ts>2016-02-15 10:14:48 +0000</creation_ts>
          <short_desc>mod_proxy disables balancer worker after a timeout from ajp even if the failontimeout set to off</short_desc>
          <delta_ts>2016-02-15 14:08:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.18</version>
          <rep_platform>Sun</rep_platform>
          <op_sys>Solaris</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Konstantin J. Chernov">k.j.chernov</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>188430</commentid>
    <comment_count>0</comment_count>
      <attachid>33556</attachid>
    <who name="Konstantin J. Chernov">k.j.chernov</who>
    <bug_when>2016-02-15 10:14:48 +0000</bug_when>
    <thetext>Created attachment 33556
mod_proxy and mod_proxy_ajp patch

I&apos;ve encountered a very annoying bug in mod_proxy that causes it to disable balancer worker after a timeout from backend even if the failontimeout set to off.

Following messages in the error log appears:
[2016-02-15 13:00:08.042994] [proxy_ajp:error] [pid 11478:tid 25] [VsGhbMCoW2YAACzWK-0AAABW] AH00992: ajp_read_header: ajp_ilink_receive failed
[2016-02-15 13:00:08.043068] [proxy_ajp:error] [pid 11478:tid 25] [VsGhbMCoW2YAACzWK-0AAABW] (70007)The timeout specified has expired: AH00893: dialog to x.x.x.x:port (x.x.x.x) failed

I&apos;m using sticky sessions, and after each such timeout (which is normal for some applications that does not handle too long queries well) half of the users are being disconnected and forced to re-login into the application.

I&apos;ve made a small patch to make mod_proxy_ajp+mod_proxy respect failontimeout property. It is included.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>188438</commentid>
    <comment_count>1</comment_count>
      <attachid>33557</attachid>
    <who name="Konstantin J. Chernov">k.j.chernov</who>
    <bug_when>2016-02-15 14:08:21 +0000</bug_when>
    <thetext>Created attachment 33557
patch that introduces new option ProxyAllowTimeouts

I did a quick research and it looks like that mod_proxy_http suffers from the same problem -- I got another timeout error that disabled my worker even though failontimeout set to off.

[Mon Feb 15 19:56:14.191054 2016] [proxy_http:error] [pid 14722:tid 22] (70007)The timeout specified has expired: [client x.x.x.x:port] AH01102: error reading stat
us line from remote server x.x.x.x:port, referer: http://x.x.x.x:port/url
[Mon Feb 15 19:56:14.191547 2016] [proxy:error] [pid 14722:tid 22] [client x.x.x.x:port] AH00898: Timeout on 100-Continue returned by /url/here, referer: http://x.x.x.x:port/referer/here

I attached another patch that adds new option ProxyAllowTimeouts that disables this annoying behaviour of the mod_proxy.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>33556</attachid>
            <date>2016-02-15 10:14:48 +0000</date>
            <delta_ts>2016-02-15 10:14:48 +0000</delta_ts>
            <desc>mod_proxy and mod_proxy_ajp patch</desc>
            <filename>mod_proxy.patch</filename>
            <type>text/plain</type>
            <size>1776</size>
            <attacher name="Konstantin J. Chernov">k.j.chernov</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>33557</attachid>
            <date>2016-02-15 14:08:21 +0000</date>
            <delta_ts>2016-02-15 14:08:21 +0000</delta_ts>
            <desc>patch that introduces new option ProxyAllowTimeouts</desc>
            <filename>mod_proxy.patch</filename>
            <type>text/plain</type>
            <size>4719</size>
            <attacher name="Konstantin J. Chernov">k.j.chernov</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59745</bug_id>
          
          <creation_ts>2016-06-23 09:00:19 +0000</creation_ts>
          <short_desc>apachectl -V does not work without a default httpd.conf file</short_desc>
          <delta_ts>2016-06-23 09:00:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.6</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>raodan1104</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>191901</commentid>
    <comment_count>0</comment_count>
    <who name="">raodan1104</who>
    <bug_when>2016-06-23 09:00:19 +0000</bug_when>
    <thetext>The default conf/httpd.conf has been removed after installation, and we manually created several customized httpd configuration files. However, when we run &quot;httpd -V&quot; or &quot;apachectl -V&quot; command, it always failed with error:
httpd: Could not open configuration file /etc/httpd/conf/httpd.conf: No such file or directory  

And only after added -f option, it could work:
[root@lalfidev0app100 conf]# httpd -V -f /etc/httpd/conf/httpdat01.conf                                                                                                                                 
Server version: Apache/2.4.6 (Red Hat Enterprise Linux)                 
                                                                        
Server built:   Sep 17 2015 09:06:30                                    
                                                                        
...
                                                                        
Server compiled with....                                                
                                                                        
...                                                                     
...                                                                     
-D HTTPD_ROOT=&quot;/etc/httpd&quot;                                              
                                                                        
-D SUEXEC_BIN=&quot;/usr/sbin/suexec&quot;                                        
                                                                        
-D DEFAULT_PIDLOG=&quot;/run/httpd/httpd.pid&quot;                                
                                                                        
-D DEFAULT_SCOREBOARD=&quot;logs/apache_runtime_status&quot;                      
                                                                        
-D DEFAULT_ERRORLOG=&quot;logs/error_log&quot;                                    
                                                                        
-D AP_TYPES_CONFIG_FILE=&quot;conf/mime.types&quot;                               
                                                                        
-D SERVER_CONFIG_FILE=&quot;conf/httpd.conf&quot;    

I cannot find any documentation notifying that the default httpd.conf MUST be existing all the time. But have no idea why this command always failed. Could you pls help on that?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>59749</bug_id>
          
          <creation_ts>2016-06-23 22:30:28 +0000</creation_ts>
          <short_desc>apache http 2.2.29: Segmentation fault</short_desc>
          <delta_ts>2016-06-27 13:22:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.29</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rahul">rahul.bhoyar</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>191924</commentid>
    <comment_count>0</comment_count>
    <who name="Rahul">rahul.bhoyar</who>
    <bug_when>2016-06-23 22:30:28 +0000</bug_when>
    <thetext>We are using apache http server 2.2.29 on Linux (2.6.32).We have observed that apache is generating many core dumps and getting crashed regularly. When it generates the core dump, below is being printed in the http’s error log:

[Mon Jun 20 01:28:09 2016] [notice] child pid 6520 exit signal Segmentation fault (11), possible coredump in /app/http_instance_name
[Mon Jun 20 03:27:54 2016] [notice] child pid 6462 exit signal Segmentation fault (11), possible coredump in /app/http_instance_name

 Below is the output of the httpd -V

./httpd -V
 Server version: Apache/2.2.29 (Unix)
 Server built:   Jan 13 2016 15:10:57
 Server&apos;s Module Magic Number: 20051115:36
 Server loaded:  APR 1.5.1, APR-Util 1.5.3
 Compiled using: APR 1.5.1, APR-Util 1.5.3
 Architecture:   64-bit
 Server MPM:     Worker
 threaded:     yes (fixed thread count)
 forked:     yes (variable process count)
 Server compiled with....
 -D APACHE_MPM_DIR=&quot;server/mpm/worker&quot;
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT=&quot;/app/****&quot;
 -D SUEXEC_BIN=&quot;/app/****/bin/suexec&quot;
 -D DEFAULT_SCOREBOARD=&quot;logs/apache_runtime_status&quot;
 -D DEFAULT_ERRORLOG=&quot;logs/error_log&quot;
 -D AP_TYPES_CONFIG_FILE=&quot;conf/mime.types&quot;
 -D SERVER_CONFIG_FILE=&quot;conf/httpd.conf&quot;


Below is the output of &apos;bt full&apos; [ during the core analysis ]

#0  0x0000003704a0e7dd in read () from /lib64/libpthread.so.0
     No symbol table info available.
    #1  0x000000000044f8b7 in ap_mpm_pod_check (pod=&lt;value optimized out&gt;)     at pod.c:54
    c = &lt;value optimized out&gt;
    fd = 6
    rc = &lt;value optimized out&gt;
   #2  0x000000000044de74 in child_main (child_num_arg=1) at worker.c:1259
    threads = 0xc2bab0
    rv = &lt;value optimized out&gt;
    ts = 0xc079f8
    thread_attr = 0xc07a18
    start_thread_id = &lt;value optimized out&gt;
  #3  0x000000000044e0dd in make_child (s=0xb44870, slot=1) at worker.c:1342
    pid = 0
   #4  0x000000000044efc0 in perform_idle_server_maintenance     (_pconf=&lt;value             optimized out&gt;, plog=&lt;value optimized out&gt;, s=&lt;value optimized out&gt;)
at worker.c:1568
    j = &lt;value optimized out&gt;
    free_slots = {1, 5, 6, 7, 11817336, 0, 11784504, 0, -1236161560, 11137,   11817336, 0, 11800920, 0, 11815024, 0, 11784504, 0, -1361903789, 11137,
      4337480, 0, -1238262800, 11137, 29, 0, 12768544, 0, 11815024, 0, 12489224, 0}
    total_non_dead = &lt;value optimized out&gt;
    active_thread_count = &lt;value optimized out&gt;
    idle_thread_count = &lt;value optimized out&gt;
    free_length = 1
    i = &lt;value optimized out&gt;
    ps = &lt;value optimized out&gt;
    totally_free_length = &lt;value optimized out&gt;
    last_non_dead = &lt;value optimized out&gt;
      #5  server_main_loop (_pconf=&lt;value optimized out&gt;, plog=&lt;value optimized out&gt;, s=&lt;value optimized out&gt;) at worker.c:1680
    status = 11
    pid = {pid = -1, in = 0xb45178, out = 0xb41158, err = 0xb3d138}
    i = &lt;value optimized out&gt;
    child_slot = &lt;value optimized out&gt;
    exitwhy = 6
    processed_status = &lt;value optimized out&gt;
    #6  ap_mpm_run (_pconf=&lt;value optimized out&gt;, plog=&lt;value optimized out&gt;,     s=&lt;value optimized out&gt;) at worker.c:1782
    remaining_children_to_start = &lt;value optimized out&gt;
    rv = &lt;value optimized out&gt;
    #7  0x0000000000425e34 in main (argc=3, argv=0x7ffcafb44eb8) at main.c:753
    c = 0 &apos;\000&apos;
    configtestonly = &lt;value optimized out&gt;
    confname = 0x458a64 &quot;conf/httpd.conf&quot;
    def_server_root = 0x458a4f &quot;/app/***&quot;
    temp_error_log = 0x0
    error = &lt;value optimized out&gt;
    process = 0xb44870
    server_conf = 0xb44870
    pglobal = 0xb3b128
    pconf = 0xb3d138
    plog = 0xb45178
    ptemp = 0xb41158
    pcommands = 0xb3f148
    opt = 0xb3f238
    rv = &lt;value optimized out&gt;
    mod = &lt;value optimized out&gt;
    optarg = 0x0
    signal_server = &lt;value optimized out&gt;&apos;

We are using Mod_proxy as a balancer to the backend jboss application server.

I have attached a core dump herewith.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>191925</commentid>
    <comment_count>1</comment_count>
    <who name="Rahul">rahul.bhoyar</who>
    <bug_when>2016-06-23 22:34:38 +0000</bug_when>
    <thetext>Unable to add core dump due to size limit</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>191926</commentid>
    <comment_count>2</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2016-06-23 22:43:10 +0000</bug_when>
    <thetext>
&gt; Below is the output of &apos;bt full&apos; [ during the core analysis ]
&gt; 
&gt; #0  0x0000003704a0e7dd in read () from /lib64/libpthread.so.0
&gt;      No symbol table info available.
&gt;     #1  0x000000000044f8b7 in ap_mpm_pod_check (pod=&lt;value optimized out&gt;)  
&gt; at pod.c:54
&gt;     c = &lt;value optimized out&gt;
&gt;     fd = 6
&gt;     rc = &lt;value optimized out&gt;
&gt;    #2  0x000000000044de74 in child_main (child_num_arg=1) at worker.c:1259
&gt;     threads = 0xc2bab0

wrong thread, there&apos;s probably a more interesting one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>191938</commentid>
    <comment_count>3</comment_count>
    <who name="Rahul">rahul.bhoyar</who>
    <bug_when>2016-06-24 13:40:18 +0000</bug_when>
    <thetext>Below is the &apos;bt full&apos; output of another core? Can this help?

#0  0x0000003037f2b4d5 in __strcasecmp_l_sse42 () from /lib64/libc.so.6
No symbol table info available.
#1  0x00002b9f1c7c67b4 in ap_proxy_determine_connection (p=0x2b9f3001d0a8, r=0x2b9f3001d120, conf=0x80fdb8, worker=0x7e13c8, conn=0x832ff8,
    uri=&lt;value optimized out&gt;, url=0x2b9f213c3b48, proxyname=0x0, proxyport=0, server_portstr=0x2b9f213c3b50 &quot;&quot;, server_portstr_size=32)
    at proxy_util.c:2228
        ssl_hostname = 0x2b9f3403cf00 &quot;rchvasp0037.rsrpmi.net&quot;
        server_port = &lt;value optimized out&gt;
        err = &lt;value optimized out&gt;
        uerr = &lt;value optimized out&gt;
#2  0x00002b9f1cddb26d in proxy_http_handler (r=0x2b9f3001d120, worker=0x7e13c8, conf=0x80fdb8, url=0x2b9f30020158 &quot;/CommonWeb/pages/common/jsp/login.jsp&quot;,
    proxyname=0x0, proxyport=0) at mod_proxy_http.c:2024
        status = 0
        server_portstr = &quot;\000\321\001\060\237+\000\000\370\376\200&quot;, &apos;\000&apos; &lt;repeats 13 times&gt;&quot;\370, \376\200\000\000\000\000&quot;
        scheme = &lt;value optimized out&gt;
        proxy_function = 0x2b9f1cddd6ac &quot;HTTPS&quot;
        u = &lt;value optimized out&gt;
        backend = 0x832ff8
        is_ssl = &lt;value optimized out&gt;
        c = 0x2b9f2c000c48
        p = 0x2b9f3001d0a8
        uri = 0x2b9f30020068
#3  0x00002b9f1c7bde62 in proxy_run_scheme_handler (r=0x2b9f3001d120, worker=0x7e13c8, conf=0x80fdb8,
    url=0x2b9f30020018 &quot;https://rchvasp0037.rsrpmi.net:8443/CommonWeb/pages/common/jsp/login.jsp&quot;, proxyhost=0x0, proxyport=0) at mod_proxy.c:2412
        pHook = &lt;value optimized out&gt;
        n = &lt;value optimized out&gt;
        rv = -1
#4  0x00002b9f1c7c2417 in proxy_handler (r=0x2b9f3001d120) at mod_proxy.c:1039
        url = 0x2b9f30020018 &quot;https://rchvasp0037.rsrpmi.net:8443/CommonWeb/pages/common/jsp/login.jsp&quot;
        uri = 0x2b9f3003bede &quot;balancer://paascluster/CommonWeb/pages/common/jsp/login.jsp&quot;
        scheme = 0x2b9f3003bf78 &quot;balancer&quot;
        p = 0x2b9f213c3d08 &quot;\250\323\001\060\237+&quot;
        p2 = &lt;value optimized out&gt;
        sconf = &lt;value optimized out&gt;
        conf = 0x80fdb8
        proxies = 0x80fef8
        ents = 0x80ff18
        i = &lt;value optimized out&gt;
        access_status = 0
        direct_connect = &lt;value optimized out&gt;
        str = &lt;value optimized out&gt;
        maxfwd = &lt;value optimized out&gt;
        balancer = 0x80cf78
        worker = 0x7e13c8
        attempts = 0
        max_attempts = 1
        list = &lt;value optimized out&gt;
#5  0x00000000004399f0 in ap_run_handler (r=0x2b9f3001d120) at config.c:158
        pHook = &lt;value optimized out&gt;
        n = &lt;value optimized out&gt;
        rv = -1
#6  0x000000000043d01e in ap_invoke_handler (r=0x2b9f3001d120) at config.c:376
        handler = &lt;value optimized out&gt;
        p = &lt;value optimized out&gt;
        result = 0
        old_handler = 0x2b9f2055a457 &quot;proxy-server&quot;
        ignore = &lt;value optimized out&gt;
#7  0x0000000000447d60 in ap_process_request (r=0x2b9f3001d120) at http_request.c:282
        access_status = &lt;value optimized out&gt;
#8  0x0000000000444ce0 in ap_process_http_connection (c=0x2b9f2c000c48) at http_core.c:190</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>191961</commentid>
    <comment_count>4</comment_count>
    <who name="Yann Ylavic">ylavic.dev</who>
    <bug_when>2016-06-27 06:21:49 +0000</bug_when>
    <thetext>It seems that the proxy_conn_rec is corrupted (at least conn-&gt;ssl_hostname), but I don&apos;t see how this can happen.

Could you please &quot;print *conn&quot; in ap_proxy_determine_connection (frame 1) and show the output?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>191964</commentid>
    <comment_count>5</comment_count>
    <who name="Rahul">rahul.bhoyar</who>
    <bug_when>2016-06-27 11:46:13 +0000</bug_when>
    <thetext>Could you please provide me the steps to perform this please?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>191965</commentid>
    <comment_count>6</comment_count>
    <who name="Rahul">rahul.bhoyar</who>
    <bug_when>2016-06-27 11:46:48 +0000</bug_when>
    <thetext>(In reply to Yann Ylavic from comment #4)
&gt; It seems that the proxy_conn_rec is corrupted (at least conn-&gt;ssl_hostname),
&gt; but I don&apos;t see how this can happen.
&gt; 
&gt; Could you please &quot;print *conn&quot; in ap_proxy_determine_connection (frame 1)
&gt; and show the output?

Could you please provide me the steps to perform this please?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>191967</commentid>
    <comment_count>7</comment_count>
    <who name="Yann Ylavic">ylavic.dev</who>
    <bug_when>2016-06-27 12:40:22 +0000</bug_when>
    <thetext>(In reply to Rahul from comment #6)
&gt; (In reply to Yann Ylavic from comment #4)
&gt; &gt; 
&gt; &gt; Could you please &quot;print *conn&quot; in ap_proxy_determine_connection (frame 1)
&gt; &gt; and show the output?
&gt; 
&gt; Could you please provide me the steps to perform this please?

In gdb, according to comment 3, you should be able to switch to function ap_proxy_determine_connection by typing (where &quot;(gdb)&quot; is the prompt):
(gdb) frame 1

and then simply enter:
(gdb) print *conn</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>191968</commentid>
    <comment_count>8</comment_count>
    <who name="Rahul">rahul.bhoyar</who>
    <bug_when>2016-06-27 13:22:47 +0000</bug_when>
    <thetext>(In reply to Yann Ylavic from comment #7)
&gt; (In reply to Rahul from comment #6)
&gt; &gt; (In reply to Yann Ylavic from comment #4)
&gt; &gt; &gt; 
&gt; &gt; &gt; Could you please &quot;print *conn&quot; in ap_proxy_determine_connection (frame 1)
&gt; &gt; &gt; and show the output?
&gt; &gt; 
&gt; &gt; Could you please provide me the steps to perform this please?
&gt; 
&gt; In gdb, according to comment 3, you should be able to switch to function
&gt; ap_proxy_determine_connection by typing (where &quot;(gdb)&quot; is the prompt):
&gt; (gdb) frame 1
&gt; 
&gt; and then simply enter:
&gt; (gdb) print *conn

I have have taken the &apos;bt full&apos; of a fresh core dump. The &quot;print *conn&quot; output for this core dump have also followed below.

Please note that &quot;xxxxx.xxxx.net&quot; is hostname of the bakcend jboss application server .

(gdb) bt full
#0  ap_pass_brigade (next=0x200000000, bb=0x2b9f3803e5c0) at util_filter.c:526
        e = &lt;value optimized out&gt;
#1  0x00002b9f1cdd99ca in pass_brigade (bucket_alloc=&lt;value optimized out&gt;, r=0x2b9f4402e220, conn=0x2b9f24027bb8, origin=0x2b9f44001e20,
    bb=0x2b9f3803e5c0, flush=&lt;value optimized out&gt;) at mod_proxy_http.c:269
        status = &lt;value optimized out&gt;
        transferred = 1638
#2  0x00002b9f1cddc017 in stream_reqbody_cl (r=0x2b9f4402e220, worker=&lt;value optimized out&gt;, conf=0x2b9f231d2bd8,
    url=0x2b9f3803e4e0 &quot;/LoginWeb/ui/jsp/headerMenu.xhtml?isDbAbsent=null&amp;siteName=null&amp;homePage=Yes&amp;type=login&amp;userName=Dave%20Baker&amp;lastLoginDetails=First%20Time%20LogIn&amp;envName=PRDBANCS2&amp;version=Client_12.01.00.01.169&amp;onsit&quot;..., proxyname=0x2b9f3802d718 &quot;Xs\001,\237+&quot;, proxyport=14016) at mod_proxy_http.c:537
        rv = &lt;value optimized out&gt;
        status = &lt;value optimized out&gt;
        bucket_alloc = 0x2b9f3802d718
        bb = 0x2b9f3803e5c0
        e = &lt;value optimized out&gt;
        bytes = 47963040834080
        seen_eos = &lt;value optimized out&gt;
        cl_val = 0
        bytes_streamed = 0
#3  ap_proxy_http_request (r=0x2b9f4402e220, worker=&lt;value optimized out&gt;, conf=0x2b9f231d2bd8,
    url=0x2b9f3803e4e0 &quot;/LoginWeb/ui/jsp/headerMenu.xhtml?isDbAbsent=null&amp;siteName=null&amp;homePage=Yes&amp;type=login&amp;userName=Dave%20Baker&amp;lastLoginDetails=First%20Time%20LogIn&amp;envName=PRDBANCS2&amp;version=Client_12.01.00.01.169&amp;onsit&quot;..., proxyname=0x2b9f3802d718 &quot;Xs\001,\237+&quot;, proxyport=14016) at mod_proxy_http.c:1143
        bucket_alloc = 0x2b9f231d2bb8
        e = &lt;value optimized out&gt;
        headers_in_array = &lt;value optimized out&gt;
        rv = &lt;value optimized out&gt;
        temp_brigade = 0x2b9f4402a768
        force10 = 589114312
        headers_in_copy = &lt;value optimized out&gt;
        c = 0x2b9f2c0175f8
        header_brigade = 0x2b9f3803e5c0
        input_brigade = 0x2b9f4402a728
        buf = &lt;value optimized out&gt;
        headers_in = 0x6736c0
        status = &lt;value optimized out&gt;
        bytes_read = &lt;value optimized out&gt;
        bytes = 0
        counter = 589114304
        rb_method = &lt;value optimized out&gt;
        old_cl_val = &lt;value optimized out&gt;
        old_te_val = 0x2b9f3802d718 &quot;Xs\001,\237+&quot;
#4  proxy_http_handler (r=0x2b9f4402e220, worker=&lt;value optimized out&gt;, conf=0x2b9f231d2bd8,
    url=0x2b9f3803e4e0 &quot;/LoginWeb/ui/jsp/headerMenu.xhtml?isDbAbsent=null&amp;siteName=null&amp;homePage=Yes&amp;type=login&amp;userName=Dave%20Baker&amp;lastLoginDetails=First%20Time%20LogIn&amp;envName=PRDBANCS2&amp;version=Client_12.01.00.01.169&amp;onsit&quot;..., proxyname=0x2b9f3802d718 &quot;Xs\001,\237+&quot;, proxyport=14016) at mod_proxy_http.c:2054
        status = &lt;value optimized out&gt;
        server_portstr = &quot;\000\342\002D\237+\000\000\370\376\200&quot;, &apos;\000&apos; &lt;repeats 13 times&gt;&quot;\370, \376\200\000\000\000\000&quot;
        scheme = &lt;value optimized out&gt;
        proxy_function = 0x2b9f1cddd6ac &quot;HTTPS&quot;
        u = &lt;value optimized out&gt;
        backend = 0x2b9f24027bb8
        is_ssl = &lt;value optimized out&gt;
        c = 0x2b9f2c0175f8
        p = 0x2b9f4402e1a8
        uri = &lt;value optimized out&gt;
#5  0x00002b9f1c7bde62 in proxy_run_scheme_handler (r=0x2b9f4402e220, worker=0x7e14c8, conf=0x80fdb8,
    url=0x2b9f3803e228 &quot;https://xxxxx.xxxx.net:8443/LoginWeb/ui/jsp/headerMenu.xhtml?isDbAbsent=null&amp;siteName=null&amp;homePage=Yes&amp;type=login&amp;userName=Dave%20Baker&amp;lastLoginDetails=First%20Time%20LogIn&amp;envName=PRDBANCS2&quot;..., proxyhost=0x0, proxyport=0) at mod_proxy.c:2412
        pHook = &lt;value optimized out&gt;
       n = &lt;value optimized out&gt;
        rv = -1


(gdb) frame 1
#1  0x00002b9f1cdd99ca in pass_brigade (bucket_alloc=&lt;value optimized out&gt;, r=0x2b9f4402e220, conn=0x2b9f24027bb8, origin=0x2b9f44001e20,
    bb=0x2b9f3803e5c0, flush=&lt;value optimized out&gt;) at mod_proxy_http.c:269
269         status = ap_pass_brigade(origin-&gt;output_filters, bb);
(gdb) print *conn
$1 = {connection = 0x2b9f44001e20, hostname = 0x2b9f3400d9a0 &quot;xxxxx.xxxx.net&quot;, port = 8443, is_ssl = 1, pool = 0x2b9f3400d928,
  sock = 0x2b9f2403f2a8, addr = 0x2b9f240273c8, flags = 0, close = 0, close_on_recycle = 0, worker = 0x7e14c8, data = 0x0, inreslist = 0,
  scpool = 0x2b9f2403f218, r = 0x0, need_flush = 0, forward = 0x0, ssl_hostname = 0x2b9f2403f290 &quot;xxxxx.xxxx.net&quot;}</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>59760</bug_id>
          
          <creation_ts>2016-06-27 14:39:51 +0000</creation_ts>
          <short_desc>Include and install systemd service</short_desc>
          <delta_ts>2016-06-27 14:40:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.20</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Craig">candrews</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>candrews</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>191970</commentid>
    <comment_count>0</comment_count>
      <attachid>33991</attachid>
    <who name="Craig">candrews</who>
    <bug_when>2016-06-27 14:39:51 +0000</bug_when>
    <thetext>Created attachment 33991
httpd.service

httpd should include and install a systemd service.

Currently, each distribution is required to write its own systemd service. This situation is less than ideal because work is duplicated and there is a lot inconsistency. It makes more sense to develop the service definition upstream and include it as part of the httpd release so each distro has a solid, consistent, supported starting point, and distros can collaborate via Apache to improve the service over time.

I&apos;ve attached a systemd service definition that I think would work well. I&apos;ve adapted it from what Fedora 24 distributes ( http://pkgs.fedoraproject.org/cgit/rpms/httpd.git/tree/httpd.service?h=f24 ), except I&apos;ve added some additional hardening and changed the type from &quot;notify&quot; to &quot;forking&quot; because I&apos;m hoping this service will be distributed with the next 2.4.x release which likely will not include mod_systemd.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>33991</attachid>
            <date>2016-06-27 14:39:51 +0000</date>
            <delta_ts>2016-06-27 14:39:51 +0000</delta_ts>
            <desc>httpd.service</desc>
            <filename>httpd.service</filename>
            <type>text/plain</type>
            <size>1172</size>
            <attacher name="Craig">candrews</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59763</bug_id>
          
          <creation_ts>2016-06-27 16:56:32 +0000</creation_ts>
          <short_desc>mod_systemd should include a systemd generator for sockets</short_desc>
          <delta_ts>2016-06-27 16:56:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Craig">candrews</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>candrews</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>191974</commentid>
    <comment_count>0</comment_count>
    <who name="Craig">candrews</who>
    <bug_when>2016-06-27 16:56:32 +0000</bug_when>
    <thetext>It would be great for httpd to include a systemd generator that makes socket units based on httpd&apos;s configuration.

For example, if httpd.conf indicates that ports 443 and 80 should be listened on, the generator can make .socket units for those 2 ports that the httpd service uses.

Such an improvement would make socket activation possible as well as make it easier to start httpd not as root.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>59978</bug_id>
          
          <creation_ts>2016-08-11 15:13:28 +0000</creation_ts>
          <short_desc>[patch] Add log message when ap_mutex_register fails</short_desc>
          <delta_ts>2016-08-11 15:58:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiazhouyang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193022</commentid>
    <comment_count>0</comment_count>
      <attachid>34124</attachid>
    <who name="">jiazhouyang</who>
    <bug_when>2016-08-11 15:13:28 +0000</bug_when>
    <thetext>Created attachment 34124
Add log message when ap_mutex_register fails

Function ap_mutex_register may fail. The majority of calls have checked the return value and printed log message like the following code snippet, while the others have not. Those unchecked ones probably need logs too (see attachment).


/* httpd-2.4.10/modules/proxy/mod_proxy.c:2687:23 */
    apr_status_t rv = ap_mutex_register(pconf, proxy_id, NULL,
            APR_LOCK_DEFAULT, 0);
    if (rv != APR_SUCCESS) {
        ap_log_perror(APLOG_MARK, APLOG_CRIT, rv, plog, APLOGNO(02480)
                &quot;failed to register %s mutex&quot;, proxy_id);
        return 500; /* An HTTP status would be a misnomer! */
    }</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34124</attachid>
            <date>2016-08-11 15:13:28 +0000</date>
            <delta_ts>2016-08-11 15:13:28 +0000</delta_ts>
            <desc>Add log message when ap_mutex_register fails</desc>
            <filename>ap_mutex_register.patch</filename>
            <type>text/plain</type>
            <size>2494</size>
            <attacher>jiazhouyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59979</bug_id>
          
          <creation_ts>2016-08-11 15:16:56 +0000</creation_ts>
          <short_desc>[patch] Add log message when ap_save_brigade fails</short_desc>
          <delta_ts>2016-08-11 15:58:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiazhouyang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193023</commentid>
    <comment_count>0</comment_count>
      <attachid>34125</attachid>
    <who name="">jiazhouyang</who>
    <bug_when>2016-08-11 15:16:56 +0000</bug_when>
    <thetext>Created attachment 34125
Add log message when ap_save_brigade fails

Function ap_save_brigade may fail. The majority of calls have checked the return value and printed log message like the following code snippet, while the others have not. Those unchecked ones probably need logs too (see attachment).

/* httpd-2.4.10/modules/proxy/mod_proxy_http.c:826:18 */
        status = ap_save_brigade(NULL, &amp;input_brigade, &amp;temp_brigade, p);
        if (status != APR_SUCCESS) {
            ap_log_rerror(APLOG_MARK, APLOG_ERR, status, r, APLOGNO(01096)
                          &quot;processing prefetched request body failed&quot;
                          &quot; to %pI (%s) from %s (%s)&quot;,
                          p_conn-&gt;addr, p_conn-&gt;hostname ? p_conn-&gt;hostname: &quot;&quot;,
                          c-&gt;client_ip, c-&gt;remote_host ? c-&gt;remote_host: &quot;&quot;);
            return HTTP_INTERNAL_SERVER_ERROR;
        }</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34125</attachid>
            <date>2016-08-11 15:16:56 +0000</date>
            <delta_ts>2016-08-11 15:16:56 +0000</delta_ts>
            <desc>Add log message when ap_save_brigade fails</desc>
            <filename>ap_save_brigade.patch</filename>
            <type>text/plain</type>
            <size>744</size>
            <attacher>jiazhouyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59980</bug_id>
          
          <creation_ts>2016-08-11 15:19:13 +0000</creation_ts>
          <short_desc>[patch] Add log message when apr_file_dup2 fails</short_desc>
          <delta_ts>2016-08-11 15:58:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiazhouyang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193024</commentid>
    <comment_count>0</comment_count>
      <attachid>34126</attachid>
    <who name="">jiazhouyang</who>
    <bug_when>2016-08-11 15:19:13 +0000</bug_when>
    <thetext>Created attachment 34126
Add log message when apr_file_dup2 fails

Function apr_file_dup2 may fail. The majority of calls have checked the return value and printed log message like the following code snippet, while the others have not. Those unchecked ones probably need logs too (see attachment).

/* httpd-2.4.10/server/log.c:479:14 */
        rv = apr_file_dup2(stderr_log, s_main-&gt;error_log, stderr_p);
        if (rv != APR_SUCCESS) {
            ap_log_error(APLOG_MARK, APLOG_CRIT, rv, s_main, APLOGNO(00092)
                         &quot;unable to replace stderr with error_log&quot;);
        }</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34126</attachid>
            <date>2016-08-11 15:19:13 +0000</date>
            <delta_ts>2016-08-11 15:19:13 +0000</delta_ts>
            <desc>Add log message when apr_file_dup2 fails</desc>
            <filename>apr_file_dup2.patch</filename>
            <type>text/plain</type>
            <size>667</size>
            <attacher>jiazhouyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59981</bug_id>
          
          <creation_ts>2016-08-11 15:22:29 +0000</creation_ts>
          <short_desc>[patch] Add log message when apr_file_open_stdin/stdout fails</short_desc>
          <delta_ts>2016-08-11 15:58:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiazhouyang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193025</commentid>
    <comment_count>0</comment_count>
      <attachid>34127</attachid>
    <who name="">jiazhouyang</who>
    <bug_when>2016-08-11 15:22:29 +0000</bug_when>
    <thetext>Created attachment 34127
Add log message when apr_file_open_stdin/apr_file_open_stdout fails

Function apr_file_open_stdin/apr_file_open_stdout may fail. The majority of calls have checked the return value and printed log message like the following code snippet, while the others have not. Those unchecked ones probably need logs too (see attachment).

/* httpd-2.4.10/support/rotatelogs.c:625:9 */
    if (apr_file_open_stdin(&amp;f_stdin, status.pool) != APR_SUCCESS) {
        fprintf(stderr, &quot;Unable to open stdin\n&quot;);
        exit(1);
    }

    if (apr_file_open_stdout(&amp;f_stdout, status.pool) != APR_SUCCESS) {
        fprintf(stderr, &quot;Unable to open stdout\n&quot;);
        exit(1);
    }</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34127</attachid>
            <date>2016-08-11 15:22:29 +0000</date>
            <delta_ts>2016-08-11 15:22:29 +0000</delta_ts>
            <desc>Add log message when apr_file_open_stdin/apr_file_open_stdout fails</desc>
            <filename>apr_file_open_stdin.patch</filename>
            <type>text/plain</type>
            <size>693</size>
            <attacher>jiazhouyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59982</bug_id>
          
          <creation_ts>2016-08-11 15:25:05 +0000</creation_ts>
          <short_desc>[patch] Add log message when apr_global_mutex_lock/unlock fails</short_desc>
          <delta_ts>2016-08-11 15:57:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiazhouyang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193026</commentid>
    <comment_count>0</comment_count>
      <attachid>34128</attachid>
    <who name="">jiazhouyang</who>
    <bug_when>2016-08-11 15:25:05 +0000</bug_when>
    <thetext>Created attachment 34128
Add log message when apr_global_mutex_lock/unlock fails

Function apr_global_mutex_lock/unlock may fail. The majority of calls have checked the return value and printed log message like the following code snippet, while the others have not. Those unchecked ones probably need logs too (see attachment).

/* httpd-2.4.10/modules/cache/mod_cache_socache.c:532:35*/
            apr_status_t status = apr_global_mutex_lock(socache_mutex);
            if (status != APR_SUCCESS) {
                ap_log_rerror(APLOG_MARK, APLOG_ERR, status, r, APLOGNO(02355)
                        &quot;could not acquire lock, ignoring: %s&quot;, obj-&gt;key);
                apr_pool_destroy(sobj-&gt;pool);
                sobj-&gt;pool = NULL;
                return DECLINED;
            }</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34128</attachid>
            <date>2016-08-11 15:25:05 +0000</date>
            <delta_ts>2016-08-11 15:25:05 +0000</delta_ts>
            <desc>Add log message when apr_global_mutex_lock/unlock fails</desc>
            <filename>apr_global_mutex_lock.patch</filename>
            <type>text/plain</type>
            <size>7087</size>
            <attacher>jiazhouyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59984</bug_id>
          
          <creation_ts>2016-08-11 15:30:17 +0000</creation_ts>
          <short_desc>[patch] Add log message when apr_hash_get fails</short_desc>
          <delta_ts>2016-08-11 15:57:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiazhouyang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193028</commentid>
    <comment_count>0</comment_count>
      <attachid>34130</attachid>
    <who name="">jiazhouyang</who>
    <bug_when>2016-08-11 15:30:17 +0000</bug_when>
    <thetext>Created attachment 34130
Add log message when apr_hash_get fails

Function apr_hash_get may fail. The majority of calls have checked the return value and printed log message like the following code snippet, while the others have not. Those unchecked ones probably need logs too (see attachment).

/* httpd-2.4.10/modules/aaa/mod_authz_dbd.c:214:10 */
    query = apr_hash_get(dbd-&gt;prepared, cfg-&gt;query, APR_HASH_KEY_STRING);
    if (query == NULL) {
        ap_log_rerror(APLOG_MARK, APLOG_ERR, 0, r, APLOGNO(01650)
                      &quot;Error retrieving query for dbd-group!&quot;);
        return HTTP_INTERNAL_SERVER_ERROR;
    }</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34130</attachid>
            <date>2016-08-11 15:30:17 +0000</date>
            <delta_ts>2016-08-11 15:30:17 +0000</delta_ts>
            <desc>Add log message when apr_hash_get fails</desc>
            <filename>apr_hash_get.patch</filename>
            <type>text/plain</type>
            <size>520</size>
            <attacher>jiazhouyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59985</bug_id>
          
          <creation_ts>2016-08-11 15:31:55 +0000</creation_ts>
          <short_desc>[patch] Add log message when apr_pollset_remove fails</short_desc>
          <delta_ts>2016-08-11 15:56:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiazhouyang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193029</commentid>
    <comment_count>0</comment_count>
      <attachid>34131</attachid>
    <who name="">jiazhouyang</who>
    <bug_when>2016-08-11 15:31:55 +0000</bug_when>
    <thetext>Created attachment 34131
Add log message when apr_pollset_remove fails

Function apr_pollset_remove may fail. The majority of calls have checked the return value and printed log message like the following code snippet, while the others have not. Those unchecked ones probably need logs too (see attachment).

/* httpd-2.4.10/server/mpm/event/event.c:1403:14 */
        rv = apr_pollset_remove(event_pollset, &amp;cs-&gt;pfd);
        if (rv != APR_SUCCESS &amp;&amp; !APR_STATUS_IS_NOTFOUND(rv)) {
            ap_log_cerror(APLOG_MARK, APLOG_ERR, rv, cs-&gt;c, APLOGNO(00473)
                          &quot;apr_pollset_remove failed&quot;);
        }</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34131</attachid>
            <date>2016-08-11 15:31:55 +0000</date>
            <delta_ts>2016-08-11 15:31:55 +0000</delta_ts>
            <desc>Add log message when apr_pollset_remove fails</desc>
            <filename>apr_pollset_remove.patch</filename>
            <type>text/plain</type>
            <size>677</size>
            <attacher>jiazhouyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59986</bug_id>
          
          <creation_ts>2016-08-11 15:34:19 +0000</creation_ts>
          <short_desc>[patch] Add log message when apr_socket_opt_set fails</short_desc>
          <delta_ts>2016-08-11 15:56:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiazhouyang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193030</commentid>
    <comment_count>0</comment_count>
      <attachid>34132</attachid>
    <who name="">jiazhouyang</who>
    <bug_when>2016-08-11 15:34:19 +0000</bug_when>
    <thetext>Created attachment 34132
Add log message when apr_socket_opt_set fails

Function apr_socket_opt_set may fail. The majority of calls have checked the return value and printed log message like the following code snippet, while the others have not. Those unchecked ones probably need logs too (see attachment).

/* httpd-2.4.10/server/listen.c:227:14 */
        rv = apr_socket_opt_set(s, APR_TCP_DEFER_ACCEPT, 30);
        if (rv != APR_SUCCESS &amp;&amp; !APR_STATUS_IS_ENOTIMPL(rv)) {
            ap_log_perror(APLOG_MARK, APLOG_WARNING, rv, p, APLOGNO(00076)
                              &quot;Failed to enable APR_TCP_DEFER_ACCEPT&quot;);
        }</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34132</attachid>
            <date>2016-08-11 15:34:19 +0000</date>
            <delta_ts>2016-08-11 15:34:19 +0000</delta_ts>
            <desc>Add log message when apr_socket_opt_set fails</desc>
            <filename>apr_socket_opt_set.patch</filename>
            <type>text/plain</type>
            <size>3807</size>
            <attacher>jiazhouyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59987</bug_id>
          
          <creation_ts>2016-08-11 15:35:57 +0000</creation_ts>
          <short_desc>[patch] Add log message when apr_socket_send fails</short_desc>
          <delta_ts>2016-08-11 15:56:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiazhouyang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193031</commentid>
    <comment_count>0</comment_count>
      <attachid>34133</attachid>
    <who name="">jiazhouyang</who>
    <bug_when>2016-08-11 15:35:57 +0000</bug_when>
    <thetext>Created attachment 34133
Add log message when apr_socket_send fails

Function apr_socket_send may fail. The majority of calls have checked the return value and printed log message like the following code snippet, while the others have not. Those unchecked ones probably need logs too (see attachment).

/* httpd-2.4.10/modules/proxy/mod_proxy_scgi.c:234:19 */
        if ((rv = apr_socket_send(conn-&gt;sock, buf, &amp;written)) != APR_SUCCESS) {
            ap_log_rerror(APLOG_MARK, APLOG_ERR, rv, r, APLOGNO(00858)
                          &quot;sending data to %s:%u failed&quot;,
                          conn-&gt;hostname, conn-&gt;port);
        }</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34133</attachid>
            <date>2016-08-11 15:35:57 +0000</date>
            <delta_ts>2016-08-11 15:35:57 +0000</delta_ts>
            <desc>Add log message when apr_socket_send fails</desc>
            <filename>apr_socket_send.patch</filename>
            <type>text/plain</type>
            <size>1152</size>
            <attacher>jiazhouyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59988</bug_id>
          
          <creation_ts>2016-08-11 15:37:22 +0000</creation_ts>
          <short_desc>[patch] Add log message when apr_thread_mutex_create fails</short_desc>
          <delta_ts>2016-08-11 15:55:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiazhouyang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193032</commentid>
    <comment_count>0</comment_count>
      <attachid>34134</attachid>
    <who name="">jiazhouyang</who>
    <bug_when>2016-08-11 15:37:22 +0000</bug_when>
    <thetext>Created attachment 34134
Add log message when apr_thread_mutex_create fails

Function apr_thread_mutex_create may fail. The majority of calls have checked the return value and printed log message like the following code snippet, while the others have not. Those unchecked ones probably need logs too (see attachment).

/* httpd-2.4.10/modules/database/mod_dbd.c:689:15 */
        rv2 = apr_thread_mutex_create(&amp;group-&gt;mutex,
                                      APR_THREAD_MUTEX_DEFAULT, pool);
        if (rv2 != APR_SUCCESS) {
             ap_log_error(APLOG_MARK, APLOG_CRIT, rv2, s, APLOGNO(00635)
                          &quot;Failed to create thread mutex&quot;);
             return rv2;
        }</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34134</attachid>
            <date>2016-08-11 15:37:22 +0000</date>
            <delta_ts>2016-08-11 15:37:22 +0000</delta_ts>
            <desc>Add log message when apr_thread_mutex_create fails</desc>
            <filename>apr_thread_mutex_create.patch</filename>
            <type>text/plain</type>
            <size>3544</size>
            <attacher>jiazhouyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59989</bug_id>
          
          <creation_ts>2016-08-11 15:40:45 +0000</creation_ts>
          <short_desc>[patch] Add log message when dav_auto_checkin fails</short_desc>
          <delta_ts>2016-08-11 15:55:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiazhouyang</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193033</commentid>
    <comment_count>0</comment_count>
      <attachid>34135</attachid>
    <who name="">jiazhouyang</who>
    <bug_when>2016-08-11 15:40:45 +0000</bug_when>
    <thetext>Created attachment 34135
Add log message when dav_auto_checkin fails

Function dav_auto_checkin may fail. The majority of calls have checked the return value and printed log message like the following code snippet, while the others have not. Those unchecked ones probably need logs too (see attachment).

/* httpd-2.4.10/modules/dav/main/mod_dav.c:3421:11 */
    err = dav_auto_checkin(r, resource, 0 /*undo*/, 0 /*unlock*/, &amp;av_info);
    if (err != NULL) {
        /* just log a warning */
        err = dav_push_error(r-&gt;pool, err-&gt;status, 0,
                             &quot;The VERSION-CONTROL was successful, but there &quot;
                             &quot;was a problem automatically checking in &quot;
                             &quot;the parent collection.&quot;,
                             err);
        dav_log_err(r, err, APLOG_WARNING);
    }</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34135</attachid>
            <date>2016-08-11 15:40:45 +0000</date>
            <delta_ts>2016-08-11 15:40:45 +0000</delta_ts>
            <desc>Add log message when dav_auto_checkin fails</desc>
            <filename>dav_auto_checkin.patch</filename>
            <type>text/plain</type>
            <size>3853</size>
            <attacher>jiazhouyang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59990</bug_id>
          
          <creation_ts>2016-08-11 18:36:02 +0000</creation_ts>
          <short_desc>some trivial spelling fixes (comments in code)</short_desc>
          <delta_ts>2016-08-11 19:55:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.23</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>trivial</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="klemens">ka7</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193036</commentid>
    <comment_count>0</comment_count>
      <attachid>34138</attachid>
    <who name="klemens">ka7</who>
    <bug_when>2016-08-11 18:36:02 +0000</bug_when>
    <thetext>Created attachment 34138
patch with spelling fixes

hi,

this patches are against a SVN checkout of 
Revision: 1755424

They contains just some trivial spelling-fixes -- in comments of the source code.
( found by a script: https://github.com/ka7/misspell_fixer, prove-read )

the patch is across all the dirs ( server/, modules/, .. )

.ka7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>193041</commentid>
    <comment_count>1</comment_count>
    <who name="Rainer Jung">rainer.jung</who>
    <bug_when>2016-08-11 19:55:14 +0000</bug_when>
    <thetext>I applied the patch to trunk in r1756038.

I did remove the small part that renamed a variable from &quot;upto&quot; to &quot;up_to&quot;, so that really no change to code was committed.

The parts for CHANGES and STATUS did no longer apply to trunk, maybe they will (at least partly) for 2.4.

I plan to propose this for backport to 2.4.x.

Thanks for the patch.

Rainer</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34138</attachid>
            <date>2016-08-11 18:36:02 +0000</date>
            <delta_ts>2016-08-11 18:36:02 +0000</delta_ts>
            <desc>patch with spelling fixes</desc>
            <filename>spelling.patch</filename>
            <type>text/plain</type>
            <size>67541</size>
            <attacher name="klemens">ka7</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>59998</bug_id>
          
          <creation_ts>2016-08-13 15:34:17 +0000</creation_ts>
          <short_desc>some trivial spelling fixes (comments in code)</short_desc>
          <delta_ts>2016-08-13 15:34:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>trivial</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="klemens">ka7</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193078</commentid>
    <comment_count>0</comment_count>
      <attachid>34144</attachid>
    <who name="klemens">ka7</who>
    <bug_when>2016-08-13 15:34:17 +0000</bug_when>
    <thetext>Created attachment 34144
patch with spelling fixes

hi,

this patches are against a SVN checkout of 
Revision: 1756272

They contains just some trivial spelling-fixes -- in comments of the source code.
( found by a script: https://github.com/ka7/misspell_fixer, prove-read )

the patch is across all the dirs ( server/, modules/, .. )
( it&apos;s like ticket #59990, but this time for 2.5 dev tree )

.ka7</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>34144</attachid>
            <date>2016-08-13 15:34:17 +0000</date>
            <delta_ts>2016-08-13 15:34:17 +0000</delta_ts>
            <desc>patch with spelling fixes</desc>
            <filename>spelling_fixes.patch</filename>
            <type>text/plain</type>
            <size>64083</size>
            <attacher name="klemens">ka7</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>60063</bug_id>
          
          <creation_ts>2016-08-29 13:54:45 +0000</creation_ts>
          <short_desc>Trivial enhancement to logresolve: flush output after each line</short_desc>
          <delta_ts>2016-08-29 14:15:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.10</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vadim Zeitlin">vz-apache</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193388</commentid>
    <comment_count>0</comment_count>
    <who name="Vadim Zeitlin">vz-apache</who>
    <bug_when>2016-08-29 13:54:45 +0000</bug_when>
    <thetext>This is a really trivial feature request: I&apos;m using &quot;tee apache.log | logresolve &gt; other.log&quot; where the other.log file is being monitored (and contains output from other sources than Apache) and since upgrading to 2.4, logresolve output is buffered and doesn&apos;t appear in the file immediately (this wasn&apos;t the case with 2.2).

I&apos;ve worked around this by adding &quot;apr_file_flush(outfile)&quot; line right after &quot;apr_file_printf&quot; in the main loop of logresolve, but it would be great to have a command line option (&quot;-f&quot;?) to do it in the official version. If it could be useful, I could submit the (trivial) patch doing it, please let me know if I should do it.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>193390</commentid>
    <comment_count>1</comment_count>
    <who name="Vadim Zeitlin">vz-apache</who>
    <bug_when>2016-08-29 14:15:10 +0000</bug_when>
    <thetext>As indicated by Rick Houser in a private email, a better idea for a patch would be to only flush the output once all the available input is consumed, as this would avoid the (possibly dramatic) slowdown in normal use.

Perhaps if it were implemented like this, it could even be the default behaviour?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>60086</bug_id>
          
          <creation_ts>2016-09-06 07:12:20 +0000</creation_ts>
          <short_desc>PVS-Studio:  Rechecking Apache HTTP Server</short_desc>
          <delta_ts>2016-09-06 07:12:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrey Karpov">karpov</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193505</commentid>
    <comment_count>0</comment_count>
    <who name="Andrey Karpov">karpov</who>
    <bug_when>2016-09-06 07:12:20 +0000</bug_when>
    <thetext>Apache HTTP Server project continues to develop, and so does PVS-Studio analyzer, growing even more powerful with every new version. Let&apos;s see what we&apos;ve got this time: http://www.viva64.com/en/b/0427/</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>60262</bug_id>
          
          <creation_ts>2016-10-17 11:04:10 +0000</creation_ts>
          <short_desc>Apache restart after some time period with some error</short_desc>
          <delta_ts>2016-10-17 11:04:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.18</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Swapnil">swap.no1</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>194467</commentid>
    <comment_count>0</comment_count>
    <who name="Swapnil">swap.no1</who>
    <bug_when>2016-10-17 11:04:10 +0000</bug_when>
    <thetext>Hi,

I have below error :
mpm_winnt:error AH00326: Server ran out of threads to serve requests. Consider raising the ThreadsPerChild setting

we hide all
#EnableMMAP off
#EnableSendfile off
#Include conf/extra/httpd-mpm.conf in apache conf file

I have mentioned below code in top of the conf file
AcceptFilter http none
AcceptFilter https none

Still I am getting the error. Can you please help me what is the exact problem ?
( Apache/2.4.18 (Win32) PHP/5.4.45 )



Thanks,
Swapnil</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>25435</bug_id>
          
          <creation_ts>2003-12-11 11:21:53 +0000</creation_ts>
          <short_desc>sethandler and directoryindex not playing nice</short_desc>
          <delta_ts>2009-01-02 12:54:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.0.54</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jon keller">jkeller</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>rroeilck</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>48893</commentid>
    <comment_count>0</comment_count>
    <who name="Jon keller">jkeller</who>
    <bug_when>2003-12-11 11:21:53 +0000</bug_when>
    <thetext>I&apos;ve notived that when invoking sethandler to do things like enable modperl in a
&lt;directory&gt; container, DirectoryIndex no longer works.

I ran into this problem when a upgrading from 1.3 to 2.0 using the fedora core1 
apache 2.0 rpms, this used to work fine with 1.3

If I replace the sethandler with a addhandler and a file extention then 
directoryindex starts working again. However this is not a useful fix for me as 
my modperl directory contains scripts which have no file extentions for url 
tidyness.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>48902</commentid>
    <comment_count>1</comment_count>
    <who name="Joshua Slive">slive</who>
    <bug_when>2003-12-11 14:20:25 +0000</bug_when>
    <thetext>A specific configuration example always helps.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>48936</commentid>
    <comment_count>2</comment_count>
    <who name="Jon keller">jkeller</who>
    <bug_when>2003-12-11 22:35:49 +0000</bug_when>
    <thetext>Sure, sorry

Alias /admin /var/www/perl
&lt;Directory /var/www/perl&gt;
    SetHandler perl-script
    DirectoryIndex index.pl panel
    PerlHandler ModPerl::Registry
    Options Indexes +ExecCGI FollowSymLinks
&lt;/Directory&gt;

when /admin is accessed i get a 404 error, with this in the error log
[Thu Dec 11 23:53:58 2003] [error] [client 203.118.169.214] Attempt to serve 
directory: /var/www/perl/

if i access /admin/panel it works fine

For the sake of testing i copied panel to a file called index.pl
I replaced the Sethandler command with the &apos;Addhandler perl-script .pl&apos; command
DirectoryIndex started working again and /admin works on its own. however 
my /admin directory is full of scripts without file extentions, these files 
need to be run without extentions.

thank you</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>48951</commentid>
    <comment_count>3</comment_count>
    <who name="Jon keller">jkeller</who>
    <bug_when>2003-12-12 00:29:03 +0000</bug_when>
    <thetext>I&apos;d also like to add that this exact configuration worked fine in apache 1.3.

thanks
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>77101</commentid>
    <comment_count>4</comment_count>
    <who name="Gene Pavlovsky">heilong</who>
    <bug_when>2005-07-08 12:41:42 +0000</bug_when>
    <thetext>I&apos;ve got the same problem when using SetHandler for my PHP files. I&apos;ve checked
the server error log files and it seems that the new apache tries to execute the
directory itself with mod_php, which obviously files, so I get an error. I&apos;ve
worked around this by the following config, but the bug should be fixed.

    &lt;Directory &quot;/var/www/localhost/htdocs/forum&quot;&gt;
        DirectoryIndex list
        &lt;Files &quot;?*&quot;&gt;
            SetHandler application/x-httpd-php
        &lt;/Files&gt;
    &lt;/Directory&gt;

This works because Files &quot;?*&quot; doesn&apos;t match the directory itself.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>78664</commentid>
    <comment_count>5</comment_count>
    <who name="Paul Querna">chip</who>
    <bug_when>2005-08-18 21:57:13 +0000</bug_when>
    <thetext>I can easily reproduce this with CGIs too:

DirectoryIndex index
&lt;Directory /var/foo&gt;
  SetHandler cgi-script
&lt;/Directory&gt;

Where /var/foo/index is a cgi script, we get the &apos;attempt to invoke directory as
script&apos;.

I suspect that mod_dir is never attempting to find the index, and lets mod_cgi
handle it, which means it is never being mapped from the / to /index internally...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>78666</commentid>
    <comment_count>6</comment_count>
    <who name="Paul Querna">chip</who>
    <bug_when>2005-08-18 22:11:08 +0000</bug_when>
    <thetext>Fixed in trunk/r25435.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>78822</commentid>
    <comment_count>7</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2005-08-22 17:55:19 +0000</bug_when>
    <thetext>
  FYI - although it&apos;s noted that this is &apos;fixed in trunk&apos; - that patch was
  backed out.

  Here&apos;s the problem; httpd/unix-directory (DIR_MAGIC_TYPE) is the handler 
  name for mod_dir/mod_autoindex.  When you told the server to substitute using
  SetHandler - you told it the whole shot, dir files and all.

  You mentioned mod_perl however; if you are not allowed to override the
  handler, you can&apos;t replace the mod_dir/mod_autoindex handling with a module
  of your own design.  The proposed &apos;fix&apos; would have ignored the handler name
  for directory uri&apos;s, and that&apos;s an inappropriate fix.

  For 2.2, especially, what about a SetFileHandler directive to apply
  on to any &apos;file&apos; type, and a SetDirHandler directive to apply only to any
  &apos;directory&apos; type?

  There may also be some issues where we are toggling r-&gt;handler, that aren&apos;t
  in an appropriate location.  I&apos;d guess we should be setting up the r-&gt;handler
  in the MapToStorage hook, right after the TranslateName hook is done.

  Anyways, allowing SetHandler to change the handler for directory resources
  is absolutely by design; otherwise mod_jk, mod_aspdotnet and other back end
  engines would not be allowed to perform their own directory resource handling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>78831</commentid>
    <comment_count>8</comment_count>
    <who name="André Malo">nd</who>
    <bug_when>2005-08-22 18:34:42 +0000</bug_when>
    <thetext>+1 to type specific handlers. I would add an option to Sethandler though (vs.
adding new directives), like

# for all:
Sethandler foo

# for files:
SetHandler files foo

# for dirs
SetHandler dirs foo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>78835</commentid>
    <comment_count>9</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2005-08-22 18:49:00 +0000</bug_when>
    <thetext>The workaround is

  &lt;Files &quot;*&quot;&gt;
      SetHandler my-handler
  &lt;/Files&gt;

(Files won&apos;t be applied to a directory), so the bug is non-critical.

The reason nd&apos;s suggestion doesn&apos;t quite work, is that SetHandler will
always work, it&apos;s a Location handler that doesn&apos;t depend on any file system
underneath it.

The SetFileHandler/SetDirHandler would be handled by the apache filesystem
core, and not the apache core uri handler, so an overloaded directive doesn&apos;t
work in this case.

The theory-to-be is that we should someday be able to unplug the filesystem 
core, and still have a useful apache which can serve other forms of
non-filesystem based content, such as a pure jk, pure proxy, or pure php server.


</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>82058</commentid>
    <comment_count>10</comment_count>
    <who name="Paul Querna">chip</who>
    <bug_when>2005-11-02 16:46:20 +0000</bug_when>
    <thetext>*** Bug 37290 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>123713</commentid>
    <comment_count>11</comment_count>
    <who name="Andreas Krüger">andreas.krueger</who>
    <bug_when>2009-01-02 12:54:42 +0000</bug_when>
    <thetext>For what it&apos;s worth, http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=451714 seems to be a duplicate of this bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>31565</bug_id>
          
          <creation_ts>2004-10-06 15:52:17 +0000</creation_ts>
          <short_desc>Won&apos;t start correctly if parent closed stdin, stdout and stderr</short_desc>
          <delta_ts>2004-11-16 19:05:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.0.51</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tom Chan">tchan</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>64701</commentid>
    <comment_count>0</comment_count>
    <who name="Tom Chan">tchan</who>
    <bug_when>2004-10-06 15:52:17 +0000</bug_when>
    <thetext>I have this test program which starts apache.  The result is the child processes
all die on an accept() call with errno 88 (ENOTSOCK).
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;syslog.h&gt;

int main (int argc, char *argv[]) {
    int i;
    char *arg;

    if (argc &lt; 2) {
        printf(&quot;Must specify the path to the executable\n&quot;);
        exit(1);
    }
    close(0);
    close(1);
    close(2);

    arg = malloc(strlen(argv[1]) + 1);
    strcpy(arg, argv[1]);
    for (i = 2; i &lt; argc; i++) {
        arg = realloc(arg, strlen(arg) + strlen(argv[i]) + 2);
        strcat(arg, &quot; &quot;);
        strcat(arg, argv[i]);
    }
    syslog(LOG_ERR, &quot;Calling system(%s)&quot;, arg);
    system(arg);
    exit(0);
}

If I comment out the close()&apos;s (or open /dev/null in their place), the child
processes will have no problems.

I think the problem is with the order of these events:
First, apache processes the config file with a LISTEN directive, opens the
listen socket(s) and keeps the file descriptor(s) in its table.  With no stdin,
stdout, etc, the first listen socket will be fd 0 and so on.
Then later, apr_proc_detach() in srclib/apr/threadproc/unix/procsup.c does
freopen() on stdin, stdout and stderr which, regardless of whether fd 0, 1 and 2
are sockets or the std files, may wipe out listen sockets created earlier.
Later, when accept() is called on the first listen socket, it has already been
freopen() to a file, causing ENOTSOCK.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>66395</commentid>
    <comment_count>1</comment_count>
    <who name="Paul Querna">chip</who>
    <bug_when>2004-11-04 02:36:09 +0000</bug_when>
    <thetext>Ouch.

Moving this to a enhancement since the solution involves hacking into APR :(</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>41621</bug_id>
          
          <creation_ts>2007-02-15 02:50:50 +0000</creation_ts>
          <short_desc>Apache 2.2.4 backend problem with Apache 2.0.59 Reverse Proxy</short_desc>
          <delta_ts>2007-02-16 00:33:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hermann Maurer">hnmr</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>99412</commentid>
    <comment_count>0</comment_count>
    <who name="Hermann Maurer">hnmr</who>
    <bug_when>2007-02-15 02:50:50 +0000</bug_when>
    <thetext>We have an internal Webserver (IWS), which serves our Subversion repositories.
For the external access we have a reverse proxy (RP). The both servers are
running under SuSE Linux i586. The external connections from the Client to the
RP are always HTTPS as well as the connections between RP and IWS. The user
authentication and authorization are provided by 
 authnz_ldap_module (shared)
 ldap_module (shared)
against our MS ADS LDAP.

Ater we had upgraded IWS to Apache HTTPD 2.2.4 we faced on the problems, that
our external clients get the PROXY ERROR with a description &apos;Reason: Error
reading from the remote server&apos;. The external users access to the repositories
with TortoiseSVN 1.4 and with Webbrowsers (Mozilla Firefox 2.0 and MS IE
6.0/7.0). The error is not depending on the client used.

In the error_log on RP there are entries like that:
[Thu Feb 15 11:10:52 2007] [error] [client xx.136.xxx.32] proxy: error reading
status line from remote server IWS, referer: https://RP/blah-blah
[Thu Feb 15 11:10:52 2007] [error] [client xx.136.xxx.32] proxy: Error reading
from remote server returned by /blah-blah referer: https://RP/blah-blah

On the IWS there are only entries, which mean, that there are NO problems while
serving the appropriate request:

xxx.xx.191.xx - user1 [15/Feb/2007:11:10:45 +0100] &quot;GET /blah-blah HTTP/1.1&quot; 200
9021
xxx.xx.191.xx - user1 [15/Feb/2007:11:10:45 +0100] &quot;GET /blah-blah HTTP/1.1&quot; 200
9021

The both boxes have the same clock time.

The users must reload the pages in their webbrowser or restart their subversion
action, when they get such an error. Sometimes they get the error once again but
 normally the next try works. Unfortunately the errors come sporadically, so we
cannot see any other relevant conditions for this behaivour like day time, the
load on the leased line, a definded url and so on.

Configuration:
IWS:
httpd -V
Server version: Apache/2.2.4 (Unix)
Server built:   Jan 16 2007 09:28:12
Server&apos;s Module Magic Number: 20051115:4
Server loaded:  APR 1.2.8, APR-Util 1.2.8
Compiled using: APR 1.2.8, APR-Util 1.2.8
Architecture:   32-bit
Server MPM:     Prefork
  threaded:     no
    forked:     yes (variable process count)
Server compiled with....
 -D APACHE_MPM_DIR=&quot;server/mpm/prefork&quot;
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT=&quot;/usr/local&quot;
 -D SUEXEC_BIN=&quot;/usr/local/bin/suexec&quot;
 -D DEFAULT_PIDLOG=&quot;/var/run/httpd.pid&quot;
 -D DEFAULT_SCOREBOARD=&quot;logs/apache_runtime_status&quot;
 -D DEFAULT_LOCKFILE=&quot;/var/run/accept.lock&quot;
 -D DEFAULT_ERRORLOG=&quot;logs/error_log&quot;
 -D AP_TYPES_CONFIG_FILE=&quot;/etc/httpd/mime.types&quot;
 -D SERVER_CONFIG_FILE=&quot;/etc/httpd/httpd.conf&quot;

httpd -l
Compiled in modules:
  core.c
  prefork.c
  http_core.c
  mod_so.c
---------------------------
RP:
httpd -V
Server version: Apache/2.0.59
Server built:   Jul 31 2006 10:23:39
Server&apos;s Module Magic Number: 20020903:12
Server loaded:  APR 0.9.12, APR-UTIL 0.9.12
Compiled using: APR 0.9.12, APR-UTIL 0.9.12
Architecture:   32-bit
Server compiled with....
 -D APACHE_MPM_DIR=&quot;server/mpm/prefork&quot;
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D HTTPD_ROOT=&quot;/usr/local&quot;
 -D SUEXEC_BIN=&quot;/usr/local/bin/suexec&quot;
 -D DEFAULT_PIDLOG=&quot;/var/run/httpd.pid&quot;
 -D DEFAULT_SCOREBOARD=&quot;logs/apache_runtime_status&quot;
 -D DEFAULT_LOCKFILE=&quot;/var/run/accept.lock&quot;
 -D DEFAULT_ERRORLOG=&quot;logs/error_log&quot;
 -D AP_TYPES_CONFIG_FILE=&quot;/etc/httpd/mime.types&quot;
 -D SERVER_CONFIG_FILE=&quot;/etc/httpd/httpd.conf&quot;

httpd -l
Compiled in modules:
  core.c
  prefork.c
  http_core.c
  mod_so.c

Any help is appreciated. I&apos;m ready to supply any additional information, that
could be needful to solve the problem. 
Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>99449</commentid>
    <comment_count>1</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2007-02-15 13:21:31 +0000</bug_when>
    <thetext>You might find helpful settings for your RP here:
http://httpd.apache.org/docs/2.0/en/mod/mod_proxy.html#envsettings.
But it is really strange to me that this happened after you upgraded your IWS to
2.2.4. As there had been many changes between 2.0.x and 2.2.x in the proxy
backend connection handling I would have expected that there might be problems
after upgrading the RP to 2.2.4, but not after upgrading the IWS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>99462</commentid>
    <comment_count>2</comment_count>
    <who name="Hermann Maurer">hnmr</who>
    <bug_when>2007-02-16 00:33:16 +0000</bug_when>
    <thetext>FYI: Because of the problems we have to get back to Apache HTTP Server 2.0.59 on
IWS. After the downgrade yesterday there were no errors anymore.

</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>47485</bug_id>
          
          <creation_ts>2009-07-06 17:54:24 +0000</creation_ts>
          <short_desc>HTML5 Websocket implementation</short_desc>
          <delta_ts>2015-09-10 21:20:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc>http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol-17</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Senthilkumar">sendtopms</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>adam</cc>
    
    <cc>ap</cc>
    
    <cc>apache_bugzilla</cc>
    
    <cc>clopez</cc>
    
    <cc>ian</cc>
    
    <cc>julian.reschke</cc>
    
    <cc>karl156</cc>
    
    <cc>m</cc>
    
    <cc>marcus</cc>
    
    <cc>mike</cc>
    
    <cc>richard.allen.smith.jr</cc>
    
    <cc>tom</cc>
    
    <cc>tyoshino</cc>
    
    <cc>wfernandom2004</cc>
    
    <cc>yuzo</cc>
          
          <votes>17</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>128571</commentid>
    <comment_count>0</comment_count>
    <who name="Senthilkumar">sendtopms</who>
    <bug_when>2009-07-06 17:54:24 +0000</bug_when>
    <thetext>I am creating this BUG to track HTML5 web socket (now it is IETF websocket protocol. I am able to see browsers such as 
1. Mozilla Firefox (Websocket code is checked into the latest Trunk)
2. Google Chrome http://docs.google.com/View?id=dfm7gfvg_1dm97qxgm
3. Webkit (Safari) http://docs.google.com/View?id=dfm7gfvg_0fpjg22gh
are going to support officially in few months. 
This entry is to make sure apache is not missing the web socket part.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128572</commentid>
    <comment_count>1</comment_count>
    <who name="Dan Poirier">poirier</who>
    <bug_when>2009-07-06 18:30:26 +0000</bug_when>
    <thetext>Marking as enhancement since this is a request for new function.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128573</commentid>
    <comment_count>2</comment_count>
    <who name="Nick Kew">nick</who>
    <bug_when>2009-07-06 18:35:08 +0000</bug_when>
    <thetext>I see Dan beat me to marking this as an enhancement request!

I&apos;d also note that this looks like a module, and could perfectly well be implemented independently by a third-party if none of the core devs find time for it.  Or even if we do!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128899</commentid>
    <comment_count>3</comment_count>
    <who name="Michael(tm) Smith">mike</who>
    <bug_when>2009-07-16 01:28:13 +0000</bug_when>
    <thetext>(In reply to comment #0)
&gt; I am creating this BUG to track HTML5 web socket (now it is IETF websocket
&gt; protocol. I am able to see browsers such as 
&gt; 1. Mozilla Firefox (Websocket code is checked into the latest Trunk)

just a note: it doesn&apos;t actually seem to be checked into Mozilla trunk yet. There&apos;s an open enhancement bug for it:

https://bugzilla.mozilla.org/show_bug.cgi?id=472529

...with a patch that seems to (sorta) be under review still</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128900</commentid>
    <comment_count>4</comment_count>
    <who name="Julian Reschke">julian.reschke</who>
    <bug_when>2009-07-16 02:08:09 +0000</bug_when>
    <thetext>(In reply to comment #0)
&gt; I am creating this BUG to track HTML5 web socket (now it is IETF websocket
&gt; protocol. I am able to see browsers such as 
&gt; 1. Mozilla Firefox (Websocket code is checked into the latest Trunk)
&gt; 2. Google Chrome http://docs.google.com/View?id=dfm7gfvg_1dm97qxgm
&gt; 3. Webkit (Safari) http://docs.google.com/View?id=dfm7gfvg_0fpjg22gh
&gt; are going to support officially in few months. 
&gt; This entry is to make sure apache is not missing the web socket part.

Please do not call it an &quot;IETF&quot; protocol. It&apos;s just an Internet Draft submitted by an individual. There is no IETF Working Group for this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128920</commentid>
    <comment_count>5</comment_count>
    <who name="Joe Orton">jorton</who>
    <bug_when>2009-07-16 12:43:26 +0000</bug_when>
    <thetext>Can I file RFEs in bugzilla for all the application layer protocols listed in /etc/services until it we run out of disk space?

Or can we keep the RFEs to stuff which is actually relevant to the server?  Pretty please?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128932</commentid>
    <comment_count>6</comment_count>
    <who name="Senthilkumar">sendtopms</who>
    <bug_when>2009-07-16 17:12:44 +0000</bug_when>
    <thetext>(In reply to comment #5)
&gt; Can I file RFEs in bugzilla for all the application layer protocols listed in
&gt; /etc/services until it we run out of disk space?
&gt; 
&gt; Or can we keep the RFEs to stuff which is actually relevant to the server? 
&gt; Pretty please?

I am able to understand your curiosity here is my answer to all of your questions.
http://pmsenthilkumar.blogspot.com/2009/07/apaches-html5-websocket-conundrum.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128933</commentid>
    <comment_count>7</comment_count>
    <who name="Senthilkumar">sendtopms</who>
    <bug_when>2009-07-16 17:22:15 +0000</bug_when>
    <thetext>(In reply to comment #4)
&gt; (In reply to comment #0)
&gt; &gt; I am creating this BUG to track HTML5 web socket (now it is IETF websocket
&gt; &gt; protocol. I am able to see browsers such as 
&gt; &gt; 1. Mozilla Firefox (Websocket code is checked into the latest Trunk)
&gt; &gt; 2. Google Chrome http://docs.google.com/View?id=dfm7gfvg_1dm97qxgm
&gt; &gt; 3. Webkit (Safari) http://docs.google.com/View?id=dfm7gfvg_0fpjg22gh
&gt; &gt; are going to support officially in few months. 
&gt; &gt; This entry is to make sure apache is not missing the web socket part.
&gt; 
&gt; Please do not call it an &quot;IETF&quot; protocol. It&apos;s just an Internet Draft submitted
&gt; by an individual. There is no IETF Working Group for this.

Ok... I am not able to understand your question. Websocket is going change the web development paradigm and many companies and folks supporting it. New way of web development may be at least from circa 2005, especially comet which influenced Servlet 3.0 Spec. Is it a correct reason to omit something if it is proposed by a single person? Do you really going to support if Army of people suggested something useless? I tried to express my thoughts to answer all this question http://pmsenthilkumar.blogspot.com/2009/07/apaches-html5-websocket-conundrum.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128935</commentid>
    <comment_count>8</comment_count>
    <who name="Julian Reschke">julian.reschke</who>
    <bug_when>2009-07-16 23:59:39 +0000</bug_when>
    <thetext>(In reply to comment #7)

&gt; Ok... I am not able to understand your question. Websocket is going change the
&gt; web development paradigm and many companies and folks supporting it. New way of
&gt; web development may be at least from circa 2005, especially comet which
&gt; influenced Servlet 3.0 Spec. Is it a correct reason to omit something if it is
&gt; proposed by a single person? Do you really going to support if Army of people
&gt; suggested something useless? I tried to express my thoughts to answer all this
&gt; question
&gt; http://pmsenthilkumar.blogspot.com/2009/07/apaches-html5-websocket-conundrum.html

Don&apos;t put words in my mouth. All I said is thst it is incorrect to call it an &quot;IETF protocol&quot; at this point.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128964</commentid>
    <comment_count>9</comment_count>
    <who name="Senthilkumar">sendtopms</who>
    <bug_when>2009-07-17 22:24:57 +0000</bug_when>
    <thetext>(In reply to comment #8)
&gt; (In reply to comment #7)
&gt; 
&gt; &gt; Ok... I am not able to understand your question. Websocket is going change the
&gt; &gt; web development paradigm and many companies and folks supporting it. New way of
&gt; &gt; web development may be at least from circa 2005, especially comet which
&gt; &gt; influenced Servlet 3.0 Spec. Is it a correct reason to omit something if it is
&gt; &gt; proposed by a single person? Do you really going to support if Army of people
&gt; &gt; suggested something useless? I tried to express my thoughts to answer all this
&gt; &gt; question
&gt; &gt; http://pmsenthilkumar.blogspot.com/2009/07/apaches-html5-websocket-conundrum.html
&gt; 
&gt; Don&apos;t put words in my mouth. All I said is thst it is incorrect to call it an
&gt; &quot;IETF protocol&quot; at this point.

If you go back and read your comment &quot;Please do not call it an &quot;IETF&quot; protocol. It&apos;s just an Internet Draft submitted
by an individual. There is no IETF Working Group for this&quot;. 

I responded because you said &quot;It&apos;s just an Internet Draft submitted
by an individual&quot;. I think now you know why I said. It is the forum and many a people will visit. I don&apos;t want to this bug/enhancement request colored by stating the draft submitted by &quot;individual&quot;. BTW, It is not my intention to put or pull anything from your mouth.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>130229</commentid>
    <comment_count>10</comment_count>
    <who name="">yuzo</who>
    <bug_when>2009-09-09 01:42:41 +0000</bug_when>
    <thetext>Hi,

Just for your information, we&apos;ve open sourced an experimental
Web Socket extension for Apache HTTP Server:
http://code.google.com/p/pywebsocket/

Please take a look if you are interested.

Yuzo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>130230</commentid>
    <comment_count>11</comment_count>
    <who name="Nick Kew">nick</who>
    <bug_when>2009-09-09 02:35:09 +0000</bug_when>
    <thetext>(In reply to comment #10)
&gt; Hi,
&gt; 
&gt; Just for your information, we&apos;ve open sourced an experimental
&gt; Web Socket extension for Apache HTTP Server:
&gt; http://code.google.com/p/pywebsocket/
&gt; 
&gt; Please take a look if you are interested.
&gt; 
&gt; Yuzo

Thanks for posting.  As I suggested in Comment #2 , we now have a third-party implementation.

Do you plan to announce this more widely, for example on the users list?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>131133</commentid>
    <comment_count>12</comment_count>
    <who name="">yuzo</who>
    <bug_when>2009-10-14 23:45:35 +0000</bug_when>
    <thetext>(In reply to comment #11)
&gt; (In reply to comment #10)
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; Just for your information, we&apos;ve open sourced an experimental
&gt; &gt; Web Socket extension for Apache HTTP Server:
&gt; &gt; http://code.google.com/p/pywebsocket/
&gt; &gt; 
&gt; &gt; Please take a look if you are interested.
&gt; &gt; 
&gt; &gt; Yuzo
&gt; 
&gt; Thanks for posting.  As I suggested in Comment #2 , we now have a third-party
&gt; implementation.
&gt; 
&gt; Do you plan to announce this more widely, for example on the users list?

Hi, Nick,

Sorry for the very late response. I&apos;ve forgotten to add me to CC.
Can you recommend a list or two to which I can announce this?

Yuzo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>146257</commentid>
    <comment_count>13</comment_count>
    <who name="karl155">karl156</who>
    <bug_when>2011-05-11 07:57:00 +0000</bug_when>
    <thetext>Request for comments: My proposal for WebSockets support

Add a new Config directive &quot;WebSocketsHandler &lt;filenameExecutable&gt;&quot; with context VirtualHost or server config (same as DocumentRoot directive)

If a connection comes in with &quot;Connection: Upgrade&quot; and &quot;Upgrade: Websocket&quot; (case insensitive), wait until the request header is complete and then hand the connection over to the executable.

Proposal A:
- If a request body was sent preliminary (before passing the FD to the
  executable) then close the connection because of a protocol error.
- (A1) All request headers are passed to the executable via env like in CGI
  or (A2) All request headers are passed to the executable via STDIN
- the id of the socket descriptor is passed as env &quot;WEBSOCKET_FD&quot;
- The socket descriptor is left open when forking (FD_CLOEXEC clear)

or Proposal B:
- All request headers are passed to the executable via env like in CGI
- Apache httpd needs to immediately pass all further received data to STDIN of
  the executable (because no new requests can be made in this connection),
  beginning with the request body
- All data wrote in STDOUT of the executable need to be passed through to the
  client (the executable has to send the response header)
- The Apache httpd connection timeouts need to be deactivated

Advantages:
- Maximum customizability in the client application.
- No need of further modifications to Apache httpd
- Easy to understand and implement
- Proposal B is compatible with any Websocket specification
  (confirmed with draft-hixie and draft-ietf-hybi)
- Proposal A needs at least rev. 04 of draft-ietf-hybi-thewebsocketprotocol
- Proposal A allows finetuning of the socket FD
- Proposal A reduces the system load of Apache httpd

Disadvantages:
- Like ordinary CGI scripts, a new executable has to be run for every request
- Proposal A will have problems with SSL/TLS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>150290</commentid>
    <comment_count>14</comment_count>
    <who name="Yannick">yleny</who>
    <bug_when>2011-10-07 09:46:27 +0000</bug_when>
    <thetext>
You can find 2 modules on Internet that add websocket protocol support in Apache.

The first is : PyWebSocket 
at http://code.google.com/p/pywebsocket/
but it use Python for the source code.
I don&apos;t like to use Python on my production servers.
I think that it is licensed under BSD licence (http://code.google.com/p/pywebsocket/source/browse/trunk/src/COPYING) when I look at http://en.wikipedia.org/wiki/BSD_licenses


The secondth is : Apache WebSocket module 
at https://github.com/disconnect/apache-websocket.
It use language C for the source code.
It is licensed under the Apache License, Version 2.0 (https://github.com/disconnect/apache-websocket/blob/master/LICENSE)
Today, October 07, 2011, this source code implemented the latest support for WebSocket protocol 13 (August 31, 2011 / http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-13).

The latest IETF draft for websocket protocol is available at https://datatracker.ietf.org/doc/draft-ietf-hybi-thewebsocketprotocol/

Is it possible to add Apache WebSocket module (apache-websocket) in the official Apache HTTPD 2.3 source code ? 
And if possible in Apache HTTPD 2.2.x ?

I think that now, it is the best candidate to add websocket protocol support in Apache HTTPD.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165520</commentid>
    <comment_count>15</comment_count>
    <who name="Carlos Alberto Lopez Perez">clopez</who>
    <bug_when>2013-02-27 22:50:46 +0000</bug_when>
    <thetext>Hello from the future :)


Has been there any progress? I really think this is a major feature missed on Apache. Websockets are getting more and more attention each day.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165522</commentid>
    <comment_count>16</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-02-27 23:35:31 +0000</bug_when>
    <thetext>&gt; Has been there any progress? 

Not really.  There are some weird looking third-party modules you could research and report on.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165526</commentid>
    <comment_count>17</comment_count>
    <who name="Carlos Alberto Lopez Perez">clopez</who>
    <bug_when>2013-02-28 02:11:25 +0000</bug_when>
    <thetext>(In reply to comment #16)
&gt; &gt; Has been there any progress? 
&gt; 
&gt; Not really.  There are some weird looking third-party modules you could
&gt; research and report on.

Does this matter?

There is already enough literature on the net about this third-party &quot;weird&quot; modules.

If this code is still not merged after ~4 years I don&apos;t think another report saying: &quot;yes, it works&quot; will change the mind of the apache developers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165527</commentid>
    <comment_count>18</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-02-28 02:31:36 +0000</bug_when>
    <thetext>(In reply to comment #17)
&gt; (In reply to comment #16)
&gt; &gt; &gt; Has been there any progress? 
&gt; &gt; 
&gt; &gt; Not really.  There are some weird looking third-party modules you could
&gt; &gt; research and report on.
&gt; 
&gt; Does this matter?

To someone asking here about Websocket support in Apache, yes.

&gt; There is already enough literature on the net about this third-party &quot;weird&quot;
&gt; modules.

By whose account?

&gt; If this code is still not merged after ~4 years I don&apos;t think another report
&gt; saying: &quot;yes, it works&quot; will change the mind of the apache developers.

It&apos;s not a matter of changing the mind of anyone, it&apos;s a matter of documenting the requirements and the status quo.  I don&apos;t think any patch or module has been contributed in any meaningful way, it&apos;s not like contributions are being ignored.

If there was some patch or standalone module that anyone was considering spending their time working on, they&apos;d surely want to track here what peoples experience with it is (along with the needs and  requirements of others), and this is a reasonable place for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165642</commentid>
    <comment_count>19</comment_count>
    <who name="Carlos Alberto Lopez Perez">clopez</who>
    <bug_when>2013-03-05 05:52:58 +0000</bug_when>
    <thetext>I have asked to the author of github.com/disconnect/apache-websocket to consider trying to merge his module in Apache upstream.

If some of you want to review the code or help with the merge, here is the bug:

https://github.com/disconnect/apache-websocket/issues/27</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>185094</commentid>
    <comment_count>20</comment_count>
    <who name="Jacob Champion">champion.p</who>
    <bug_when>2015-09-10 21:20:47 +0000</bug_when>
    <thetext>(In reply to Carlos Alberto Lopez Perez from comment #19)
&gt; I have asked to the author of github.com/disconnect/apache-websocket to
&gt; consider trying to merge his module in Apache upstream.

Since self.disconnect appears to be AWOL, I&apos;ve forked the repository at https://github.com/jchampio/apache-websocket. If, six years after this report was opened, there&apos;s still interest in making this happen, c&apos;mon over to GitHub and let&apos;s get started.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>39973</bug_id>
          
          <creation_ts>2006-07-06 02:36:22 +0000</creation_ts>
          <short_desc>apache software folder should be movable</short_desc>
          <delta_ts>2006-07-17 11:08:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>ASSIGNED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc>http://httpd.apache.org/docs/2.2/programs/apachectl.html</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dave Yost">Dave</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>3</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>90926</commentid>
    <comment_count>0</comment_count>
    <who name="Dave Yost">Dave</who>
    <bug_when>2006-07-06 02:36:22 +0000</bug_when>
    <thetext>Say apache-2.1.0 is running in /var/apache/. Now I want to build 2.2.2 and try it out using port 8080.

In the apache-2.2.2 src dir, I run
  configure --prefix=/var/apacheTest
so I won&apos;t clobber the running server, and I tweak the /var/apacheTest dir with a new httpd.conf file 
and maybe some symlinks to the live htdocs dir etc.

There are two problems with this approach:
1. I have to build a special version of php etc. for the /var/apacheTest location.
2. When I decide it&apos;s OK to cut over to 2.2.2, I have to re-configure and rebuild apache-2.2.2, php, etc. 
and take the server down while make install is clobbering things in /var/apache.

It seems to me that the solution is for apachectl to work like this:
  apachectl start [ &lt;apache-root-dir&gt; ]
The only file that should maybe have an apache-root-dir path burned into it is apachectl itself, so it can 
default to the standard location.  But on unix even that is unnecessary because it is possible to deduce 
the dir from which apachectl was executed by looking at argv[0].

All pathnames used in conf files and used by modules should normally be relative to apache-root-dir 
(whether it was given explicitly or defaulted to).  If you want to put stuff outside of the apache-root-dir 
tree, you can use full paths in conf files or you can use symlinks on platforms that support them.

Or something like that.  Forgive me if I am missing something obvious.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90939</commentid>
    <comment_count>1</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2006-07-06 11:49:30 +0000</bug_when>
    <thetext>A completely rational suggestion, I&apos;ve reclassified it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90944</commentid>
    <comment_count>2</comment_count>
    <who name="Joshua Slive">slive</who>
    <bug_when>2006-07-06 13:58:45 +0000</bug_when>
    <thetext>I believe this feature already exists.  

Can you explain how this suggestion differs from
apachectl -d /path/to/serverroot

If you are saying that there are some paths used in httpd that are not relative
to ServerRoot (and there probably are), than I agree that those should be fixed.
 But  the basic infrastructure is there.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90946</commentid>
    <comment_count>3</comment_count>
    <who name="Dave Yost">Dave</who>
    <bug_when>2006-07-06 14:37:29 +0000</bug_when>
    <thetext>I don&apos;t see any mention of a -d argument on the apachectl doc page.
http://httpd.apache.org/docs/2.2/programs/apachectl.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90947</commentid>
    <comment_count>4</comment_count>
    <who name="Dave Yost">Dave</who>
    <bug_when>2006-07-06 14:48:03 +0000</bug_when>
    <thetext>If the apachectl -d option does exist, then is php just behind the times in its use of absolute paths into 
the apache tree?  Is the infrastructure there for a module such as php to use the runtime apache /path/to/
server/root?

Z% find /var/apache/php -type f | xargs strings -a | grep /var/apache
     52     187   33203
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90948</commentid>
    <comment_count>5</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2006-07-06 14:49:12 +0000</bug_when>
    <thetext>Josuha, that wouldn&apos;t solve the issue, FWIW.

I actually have written the same patch over and over which breaks
out arg one (the action verb) and then allows the remaining args
to be parsed in httpd command arg syntax.

E.g.

./apachectl start -d foo

doesn&apos;t work today.  With my patch, it does.

But apachectl would also have to load the proper bin/envvars that&apos;s
relative to the desired installation of apache, so your comment
doesn&apos;t actually contribute to solving the requested feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90951</commentid>
    <comment_count>6</comment_count>
    <who name="Dave Yost">Dave</who>
    <bug_when>2006-07-06 15:11:10 +0000</bug_when>
    <thetext>The first directive doc entry I looked at,
  http://httpd.apache.org/docs/2.2/mod/core.html#directory
says, &quot;directory-path is either the full path to a directory, or a wild-card string using Unix shell-style 
matching.&quot;

It says nothing about a path relative to ServerRoot.
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90952</commentid>
    <comment_count>7</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2006-07-06 15:16:01 +0000</bug_when>
    <thetext>&gt;If the apachectl -d option does exist

Here&apos;s the clue:

If apachectl doesn&apos;t see its traditional init script-style parameter
(start/stop/restart/etc.), it assumes the command-line consists of httpd
parameters, and passes them straight through to httpd.  That, and the fact that
httpd is a non-portable* way to start Apache 2+, are not clear from the
documentation.

*httpd may work perfectly, may not start at all, or may appear to work but with
suboptimal settings, depending on the platform and exactly how Apache was built

If we rework apachectl to expand its use, we should keep in mind some of the
confusion which has occurred with Apache 2+ with httpd options vs. apachectl
options, including confusion of users of binary builds which require apachectl.

The idea that apachectl is primarily an init script and should be symlinked to
the proper rc directory, or run directly with the familiar init script
command-line, is a nice simplification.  Also, for every web server install a
suitable apachectl will be created which already has the proper install path.

Separately there is a value in a lower-level interface, but which unlike the
current httpd executable, also picks up the required settings from envvars, so
that the same low-level command-line works for source users and binbuild users
and everything in-between.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90956</commentid>
    <comment_count>8</comment_count>
    <who name="Joshua Slive">slive</who>
    <bug_when>2006-07-06 17:07:21 +0000</bug_when>
    <thetext>First, regarding apachectl arguments, I think it is quite clearly documented at
http://httpd.apache.org/docs/2.2/programs/apachectl.html
that apachectl also takes all the httpd arguments.

Will: Your patch is not necessary.  Simply use
apachectl -k start -d /path
I&apos;ve made an effort to update the docs to discourage the use of the &quot;naked&quot;
commands for just this reason:  Using the &quot;-k&quot; format allows you to easily
incorporate other options.  The sysv style naked commands should really only be
used when you want apachectl to act as a sysv init script.  (And Jeff, we did
hash this issue out a couple years ago.  I think the present compromise isn&apos;t
that bad and is relatively well-documented.  But of course the documentation can
always be improved.)

With regard to picking up the envvars from the right place, that I would buy as
a possible enhancement request, although I doubt that solving it really requires
a new apachectl command-line argument.  Perhaps just assuming that it lives in
the same directory as apachectl (since they are both installed to exp_sbindir)
would be sufficient.

Anyway, this bug report has already gone off on several tangents and I suggest
bringing the discussion to dev@httpd.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90957</commentid>
    <comment_count>9</comment_count>
    <who name="Joshua Slive">slive</who>
    <bug_when>2006-07-06 17:11:33 +0000</bug_when>
    <thetext>Oh, and Dave, the issue of &lt;Directory&gt; not being ServerRoot-relative is a whole
other ball-of-wax.  It isn&apos;t really necessary for the common case of trying
different versions to have a ServerRoot-relative &lt;Directory&gt;, since you usually
want to point both versions at the same content.

I wouldn&apos;t actually object to the concept of allowing ServerRoot-relative
&lt;Directory&gt; entries.  But it could cause some confusion.  (Many people already
assume that &lt;Directory&gt; is DocumentRoot-relative.)

And as I mentioned, too many threads in this bug report.  If you want a
ServerRoot-relative &lt;Directory&gt;, you should start a new bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90959</commentid>
    <comment_count>10</comment_count>
    <who name="Dave Yost">Dave</who>
    <bug_when>2006-07-06 17:30:00 +0000</bug_when>
    <thetext>I&apos;m fine with defining some relative pathX as being relative to some pathY, as long as the relation is 
transitive, resolving finally to ServerRoot.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90961</commentid>
    <comment_count>11</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2006-07-06 17:43:36 +0000</bug_when>
    <thetext>Joshua, why are you arguing?

The request is that apachectl would not only trigger a different configuration
tree (how you interpreted the request) but ALSO...

that you could pass an arguement to apachectl triggering a *different* apache
httpd binary and dependent libraries (envvars) path.  This could be used, for
example, to launch one of two binaries (e.g. one built event mpm, one built
with plain old worker mpm).  

I find the request interesting, so I&apos;m accepting the bug :)  apachectl is a
fairly dirt simple stupid script that should basically work against any of
the installed httpd&apos;s, as long as it picks up the desired httpd binary and
the desired envvars dependent libraries path.
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90962</commentid>
    <comment_count>12</comment_count>
    <who name="Joshua Slive">slive</who>
    <bug_when>2006-07-06 18:15:32 +0000</bug_when>
    <thetext>I don&apos;t mean to argue, but I see two problems here:

1. Dave isn&apos;t interested in the same thing as you.  He wants to be able to pick
up an apache installation, move it someplace else, and still have it work.  I
actually think that is an interesting thing to be able to do, and there are
various things we could do in httpd to make it easier.  But just fixing this one
thing in apachectl wouldn&apos;t get you that far.  To work on that issue, I think he
needs a better understanding of what is already possible, and then to
specifically identify where he things the barriers are in separate bug reports
(like ServerRoot-relative &lt;Directory&gt;, for example).

2. You are proposing adding a third type of command-line argument to apachectl.
 We already have sysvinit-style arguments and httpd arguments and you want to
add apachectl-specific config arguments.  I think that is too complicated (or at
least, I can&apos;t imagine how to write clear and simple docs to explain it).  Two
alternatives I see are: 1) use the assumption that httpd and envvars live in the
same directory as apachectl (doesn&apos;t solve the two-binaries in one install tree
problem you mention); or 2) tell people to copy and edit apachectl as needed. 
As you mention, it is just a simple shell script -- that is, until we add too
many different command-line arguments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90964</commentid>
    <comment_count>13</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2006-07-06 18:55:11 +0000</bug_when>
    <thetext>To 1) above, yes if I&apos;ve misunderstood, there is an issue.  httpd is not
relocation-friendly.  I presumed he had two parallel installs and wanted
to use a single apachectl script.

To 2) above, yes, I don&apos;t like the syntax.  Propose your desired alternative
and modify the subject line here.
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>90965</commentid>
    <comment_count>14</comment_count>
    <who name="Dave Yost">Dave</who>
    <bug_when>2006-07-06 19:27:42 +0000</bug_when>
    <thetext>This is good.  You get it about what I&apos; saying: &quot;He wants to be able to pick up an apache installation, move 
it someplace else, and still have it work.&quot;  I regret to say that this bug report is going to have to be a 
drive-by shooting.  I&apos;m pinch-hitting for a sysadmin, updating an apache installation, and I happened to 
notice something important enough to say something in my RFE.  But I won&apos;t be around to post other 
related bugs.  I hope you do make the change.  It will be a great thing. And thanks loads for all your work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>91366</commentid>
    <comment_count>15</comment_count>
    <who name="Dave Yost">Dave</who>
    <bug_when>2006-07-17 18:05:32 +0000</bug_when>
    <thetext>Perhaps a test case will make this crystal clear:

Three folders:
  apache/             (contains 2.2.1)
  apache-2.2.2/
  apachedata/       (contains htdocs, conf, logs, etc.)
The first two folders contain no runtime data, only symlinks, like this:
  ln -s ../apachedata/htdocs htdocs
  etc.

1. I should be able to start either of these servers and everything works.  Perhaps this is true today.  For 
this to be true, nothing in the conf files should be required to reference the actual software folder.
2. I should be able to do the following and have everything still work.
     apache/bin/apachectl stop
     mv apache apache-2.2.1
     mv apache-2.2.2 apache
     apache/bin/apachectl start
3. It would be nice if configure would allow one to specify a separate folder for all runtime data and 
then make all the appropriate symlinks.

With the problem stated this way, it appears that relative pathnames in the conf files is a nonissue, 
since directives can simply use the full path to the apachedata/ folder.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>91367</commentid>
    <comment_count>16</comment_count>
    <who name="Dave Yost">Dave</who>
    <bug_when>2006-07-17 18:08:22 +0000</bug_when>
    <thetext>Changed the Summary</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>44027</bug_id>
          
          <creation_ts>2007-12-05 21:24:36 +0000</creation_ts>
          <short_desc>Internationalized Domain Name (IDN) support</short_desc>
          <delta_ts>2009-02-28 22:01:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>ASSIGNED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P5</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Takashi Sato">takashi.asfbugzilla</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>clouserw</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>111479</commentid>
    <comment_count>0</comment_count>
    <who name="Takashi Sato">takashi.asfbugzilla</who>
    <bug_when>2007-12-05 21:24:36 +0000</bug_when>
    <thetext>I want to write IDN directly to httpd.conf, though I can use IDN with manual
conversion (ToASCII).
httpd.conf including many punycode is hard to read.

RFC3490 IDNA
http://tools.ietf.org/html/rfc3490</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>112264</commentid>
    <comment_count>1</comment_count>
    <who name="Roy T. Fielding">fielding</who>
    <bug_when>2007-12-28 17:05:26 +0000</bug_when>
    <thetext>This would require some form of unicode support in the config files
as well, which doesn&apos;t seem likely in 2.x.  Perhaps you could request
it as a feature for Apache 3.x</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>112265</commentid>
    <comment_count>2</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2007-12-28 17:24:08 +0000</bug_when>
    <thetext>There&apos;s actually no obstacle with processing httpd.conf as utf-8 today.

However, it means that any typical editor would be at a loss to display the
document if it contained both utf-8 strings and iso-8859 encoded strings,
since they are mutually exclusive (some code points in iso-8859 cannot be 
rendered in utf-8, while utf-8 codes are gibberish inspected with an iso-8859
code page).

On the win32 platform, the conf file is already interpreted as utf-8 for purpose
of path names, resource (file) names, etc.  But as a new feature, I&apos;d recommend
creating new ServerNameIDNA and ServerAliasIDNA directives, to avoid ambiguity.
</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>42732</bug_id>
          
          <creation_ts>2007-06-25 05:43:49 +0000</creation_ts>
          <short_desc>Authentication against database issue.</short_desc>
          <delta_ts>2007-09-18 06:37:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.4</version>
          <rep_platform>HP</rep_platform>
          <op_sys>HP-UX</op_sys>
          <bug_status>REOPENED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc>intranet</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="destroyedlolo">laurent.faillie</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>104676</commentid>
    <comment_count>0</comment_count>
    <who name="destroyedlolo">laurent.faillie</who>
    <bug_when>2007-06-25 05:43:49 +0000</bug_when>
    <thetext>Hello,

I running on an HP-UX 11.11 712 box, and I have compiled apache 2.2.4 with GCC.
I have took mod_dbd.c from truck due to several bugs in the version provided w/
2.2.4.

I&apos;m authenticating my users against a PostgreSQL database w/ following directives :

AuthType Basic
AuthName &quot;mariage&quot;
AuthBasicProvider dbd
Require valid-user
AuthDBDUserPWQuery &quot;select passwd from test.comptes where id = %s&quot;

Unfortunately, I have to enter 4 or 5 time my username password before being
accepted by apache. In error.log, I got many 
[Mon Jun 25 12:08:28 2007] [error] [client 164.129.228.100] user myuser :
 authentication failure for &quot;/~laurent/&quot;: Password Mismatch

It&apos;s not a problem of password as I typed exactly the same one (copy/past), and
every time I&apos;m restarting apache, the password is asked another 4 or 5 time
before being accepted.

I can spend some time for debugging if needed, but I duno where to start.

Best regards,

Laurent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>104680</commentid>
    <comment_count>1</comment_count>
    <who name="Tony Stevenson">tony</who>
    <bug_when>2007-06-25 06:21:50 +0000</bug_when>
    <thetext>Laurent, 

This is not the place to obtain support for your issues.  Rather go to
&quot;http://httpd.apache.org/docs/2.2/faq/&quot; and use opne of those methods to get
some help.  This forum is for the reporting of bugs in the product.  If indeed
there is a bug found, please come back here an re-open this issue.

Thanks,
Tony
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>105084</commentid>
    <comment_count>2</comment_count>
    <who name="destroyedlolo">laurent.faillie</who>
    <bug_when>2007-07-05 04:58:31 +0000</bug_when>
    <thetext>It&apos;s not a misconfiguration but really a bug : I did several tests and generated
some log on the database.

when the password is rejected, Apache did initiated the connection but the query
didn&apos;t run.

DEBUG:  bind &lt;unnamed&gt; to authn_dbd_1
DEBUG:  StartTransactionCommand
DEBUG:  StartTransaction
DEBUG:  name: unnamed; blockState:       DEFAULT; state: INPROGR, xid/subid/cid:
3116/1/0, nestlvl: 1, children: &lt;&gt;
LOG:  execute authn_dbd_1: PREPARE authn_dbd_1 (varchar) AS select passwd from
test.comptes where id = $1
DETAIL:  parameters: $1 = &apos;Test&apos;
DEBUG:  CommitTransactionCommand
DEBUG:  CommitTransaction
DEBUG:  name: unnamed; blockState:       STARTED; state: INPROGR, xid/subid/cid:
3116/1/1, nestlvl: 1, children: &lt;&gt;

When the password is accepted, Apache initiate the connection and then a query
is issued on the database.

DEBUG:  bind &lt;unnamed&gt; to authn_dbd_1
DEBUG:  StartTransactionCommand
DEBUG:  StartTransaction
DEBUG:  name: unnamed; blockState:       DEFAULT; state: INPROGR, xid/subid/cid:
3120/1/0, nestlvl: 1, children: &lt;&gt;
LOG:  execute authn_dbd_1: PREPARE authn_dbd_1 (varchar) AS select passwd from
test.comptes where id = $1
DETAIL:  parameters: $1 = &apos;Test&apos;
DEBUG:  CommitTransactionCommand
DEBUG:  CommitTransaction
DEBUG:  name: unnamed; blockState:       STARTED; state: INPROGR, xid/subid/cid:
3120/1/1, nestlvl: 1, children: &lt;&gt;
DEBUG:  bind &lt;unnamed&gt; to authn_dbd_1
DEBUG:  StartTransactionCommand
DEBUG:  StartTransaction
DEBUG:  name: unnamed; blockState:       DEFAULT; state: INPROGR, xid/subid/cid:
3121/1/0, nestlvl: 1, children: &lt;&gt;
LOG:  execute authn_dbd_1: PREPARE authn_dbd_1 (varchar) AS select passwd from
test.comptes where id = $1
DETAIL:  parameters: $1 = &apos;Test&apos;
DEBUG:  CommitTransactionCommand
DEBUG:  CommitTransaction
DEBUG:  name: unnamed; blockState:       STARTED; state: INPROGR, xid/subid/cid:
3121/1/1, nestlvl: 1, children: &lt;&gt;
DEBUG:  bind &lt;unnamed&gt; to authn_dbd_1
DEBUG:  StartTransactionCommand
DEBUG:  StartTransaction
DEBUG:  name: unnamed; blockState:       DEFAULT; state: INPROGR, xid/subid/cid:
3122/1/0, nestlvl: 1, children: &lt;&gt;
LOG:  execute authn_dbd_1: PREPARE authn_dbd_1 (varchar) AS select passwd from
test.comptes where id = $1
DETAIL:  parameters: $1 = &apos;Test&apos;
DEBUG:  CommitTransactionCommand
DEBUG:  CommitTransaction
DEBUG:  name: unnamed; blockState:       STARTED; state: INPROGR, xid/subid/cid:
3122/1/1, nestlvl: 1, children: &lt;&gt;
DEBUG:  bind &lt;unnamed&gt; to authn_dbd_1
DEBUG:  StartTransactionCommand
DEBUG:  StartTransaction
DEBUG:  name: unnamed; blockState:       DEFAULT; state: INPROGR, xid/subid/cid:
3123/1/0, nestlvl: 1, children: &lt;&gt;
LOG:  execute authn_dbd_1: PREPARE authn_dbd_1 (varchar) AS select passwd from
test.comptes where id = $1
DETAIL:  parameters: $1 = &apos;Test&apos;
DEBUG:  CommitTransactionCommand
DEBUG:  CommitTransaction
DEBUG:  name: unnamed; blockState:       STARTED; state: INPROGR, xid/subid/cid:
3123/1/1, nestlvl: 1, children: &lt;&gt;
DEBUG:  bind &lt;unnamed&gt; to authn_dbd_1
DEBUG:  StartTransactionCommand
DEBUG:  StartTransaction
DEBUG:  name: unnamed; blockState:       DEFAULT; state: INPROGR, xid/subid/cid:
3124/1/0, nestlvl: 1, children: &lt;&gt;
LOG:  execute authn_dbd_1: PREPARE authn_dbd_1 (varchar) AS select passwd from
test.comptes where id = $1
DETAIL:  parameters: $1 = &apos;Test&apos;
DEBUG:  CommitTransactionCommand
DEBUG:  CommitTransaction
DEBUG:  name: unnamed; blockState:       STARTED; state: INPROGR, xid/subid/cid:
3124/1/1, nestlvl: 1, children: &lt;&gt;
LOG:  connection received: host=[local]
DEBUG:  forked new backend, pid=18697 socket=7
LOG:  connection authorized: user=www database=www
DEBUG:  postgres child[18697]: starting with (
DEBUG:  	postgres
DEBUG:  	-v196608
DEBUG:  	-y
DEBUG:  	www
DEBUG:  )
DEBUG:  InitPostgres
DEBUG:  StartTransaction
DEBUG:  name: unnamed; blockState:       DEFAULT; state: INPROGR, xid/subid/cid:
3125/1/0, nestlvl: 1, children: &lt;&gt;
DEBUG:  CommitTransaction
DEBUG:  name: unnamed; blockState:       STARTED; state: INPROGR, xid/subid/cid:
3125/1/0, nestlvl: 1, children: &lt;&gt;
DEBUG:  StartTransactionCommand
DEBUG:  StartTransaction
DEBUG:  name: unnamed; blockState:       DEFAULT; state: INPROGR, xid/subid/cid:
3126/1/0, nestlvl: 1, children: &lt;&gt;
LOG:  statement: SELECT *, TO_CHAR(expiration, &apos;YYYYMMDD&apos;) AS expiration FROM
hebergement.site WHERE id=&apos;Test&apos;;
DEBUG:  parse tree:
DETAIL:  {QUERY :commandType 1 :querySource 0 :canSetTag true :utilityStmt &lt;&gt;
	:resultRelation 0 :into &lt;&gt; :intoOptions &lt;&gt; :intoOnCommit 0 :intoTableSpaceName ...

According to PostgreSQL log, it seems the connection hasn&apos;t a &quot;working&quot; status
(expired ?), and this time, apache is doing several attempts, all failing and
finally create a new connection and do the query, successfully this time.

Best regards,

Laurent
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>107280</commentid>
    <comment_count>3</comment_count>
    <who name="Phil Endecott">spam_from_apache_bugzilla</who>
    <bug_when>2007-08-27 04:25:16 +0000</bug_when>
    <thetext>Hi Laurent,

I fixed my 2.2.4 dbd authn problems by using the mod_dbd.c from trunk.  See this
message:

http://article.gmane.org/gmane.comp.apache.devel/31168

Regards, Phil.
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>108332</commentid>
    <comment_count>4</comment_count>
    <who name="destroyedlolo">laurent.faillie</who>
    <bug_when>2007-09-18 06:37:30 +0000</bug_when>
    <thetext>Sorry for my silence (I was in paternity leave ;-D).

I compiled this patch but I&apos;m not able anymore to restart 2.2.4 (nothing related
to this patch, httpd crash at startup on my system depending on my configuration
setting).

Anyway, I&apos;ve installed 2.2.6 and the problem is still here. Can I test this
patch w/ 2.2.6 ?

Bye

Laurent
</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>47693</bug_id>
          
          <creation_ts>2009-08-13 05:23:12 +0000</creation_ts>
          <short_desc>GET request has race condition w.r.t. replacement of file being served</short_desc>
          <delta_ts>2009-09-29 01:38:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>REOPENED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>alex</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>poirier</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>129679</commentid>
    <comment_count>0</comment_count>
    <who name="">alex</who>
    <bug_when>2009-08-13 05:23:12 +0000</bug_when>
    <thetext>When a GET request is received by Apache, it first opens the file to determine the length, then closes it, then reopens it to serve the file.

An interesting use case is to replace a file (using an atomic rename) and have Apache give consistent results: always return either the old file or the new file.

However, the current implementation will give inconsistent results when the length of the file changes between the first and second time Apache opens the files.

If the new file is longer, Apache returns the content of the new file truncated to the length of the first file. If the new file is shorter, Apache returns an error response.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>129687</commentid>
    <comment_count>1</comment_count>
    <who name="Dan Poirier">poirier</who>
    <bug_when>2009-08-14 04:34:41 +0000</bug_when>
    <thetext>That&apos;s all true, but are there are any feasible ways to fix the behavior?  For that matter, what is the right behavior if a file changes in the middle of a request?

The server could ensure consistency by making a complete copy of every file before beginning to serve it, but that&apos;s not reasonable for any significant load.  There might be some operating systems where the server could get an exclusive lock on the file before beginning to serve it, but not on most OSes.

Practically speaking, the solution is not to change files under a running server.  Or serve the content from a database or other source with true atomic changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>130737</commentid>
    <comment_count>2</comment_count>
    <who name="">alex</who>
    <bug_when>2009-09-29 01:38:29 +0000</bug_when>
    <thetext>Perhaps it won&apos;t be feasible in terms of internal state management inside the server, but the solution would be to use the following sequence:

open the file, get it&apos;s length, read the file, close the file

instead of:

open the file, get it&apos;s length, close the file, open the file, read the file, close the file.

Note that the interference with file that I&apos;m talking about is not an arbitrary modification to the file, but only the case where the file is replaced by another file. This is a typical filesystem operation for doing a &quot;clean&quot; / &quot;atomic&quot; modification to a file: write a new copy of the file content to a temporary file, then replace the target file by the temporary file.

Reopening to get feedback on the feasibility of the proposed solution...</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>50999</bug_id>
          
          <creation_ts>2011-03-30 15:26:25 +0000</creation_ts>
          <short_desc>it seems the configure wrong detect my apr-util version,i&apos;ve already installing apr-util 1.3.10</short_desc>
          <delta_ts>2015-02-17 16:16:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>REOPENED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="petrus">petrus</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>oliver.graute</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>145420</commentid>
    <comment_count>0</comment_count>
    <who name="petrus">petrus</who>
    <bug_when>2011-03-30 15:26:25 +0000</bug_when>
    <thetext>eems the configure wrong detect my apr-util version,i&apos;ve already installing apr-util 1.3.10,but the configure files said i need apr-util version 1.3.0 or later

checking for chosen layout... Apache
checking for working mkdir -p... yes
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking target system type... i686-pc-linux-gnu

Configuring Apache Portable Runtime library ...

checking for APR... yes
  setting CC to &quot;gcc&quot;
  setting CPP to &quot;gcc -E&quot;
  setting CFLAGS to &quot; -g -O2 -pthread&quot;
  setting CPPFLAGS to &quot; -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE&quot;
  setting LDFLAGS to &quot; &quot;

Configuring Apache Portable Runtime Utility library...

checking for APR-util... yes
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for gcc option to accept ISO C99... -std=gnu99
checking for pcre-config... /usr/local/bin/pcre-config
configure: Using external PCRE library from /usr/local/bin/pcre-config
  setting PCRE_INCLUDES to &quot;-I/usr/local/include&quot;
  setting PCRE_LIBS to &quot;-L/usr/local/lib -lpcre&quot;
  setting HTTPD_LDFLAGS to &quot;$(PCRE_LIBS)&quot;

Configuring Apache httpd ...

  setting INCLUDES to &quot;-I.&quot;
  adding &quot;-I$(top_srcdir)/os/$(OS_DIR)&quot; to INCLUDES
  adding &quot;-I$(top_srcdir)/include&quot; to INCLUDES
  adding &quot;-I/usr/local/apr-httpd//include/apr-1&quot; to INCLUDES
  adding &quot;-I/usr/local/apr-util-httpd//include/apr-1&quot; to INCLUDES
  adding &quot;-I/usr/local/include&quot; to INCLUDES

Applying OS-specific hints for httpd ...

  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to &quot;1&quot;
  forcing AP_NONBLOCK_WHEN_MULTI_LISTEN to &quot;1&quot;
checking for rm... /bin/rm
checking for pkg-config... /usr/bin/pkg-config
checking for rsync... /usr/bin/rsync
checking for gawk... gawk
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for lynx... lynx
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking for library containing strerror... none required
checking for APR version 1.3.0 or later... yes
checking for APR-util version 1.3.0 or later... no
configure: error: APR-util version 1.3.0 or later is required</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>145428</commentid>
    <comment_count>1</comment_count>
    <who name="Nick Kew">nick</who>
    <bug_when>2011-03-30 21:45:54 +0000</bug_when>
    <thetext>Insufficient information for a bug report: you haven&apos;t told us your configure line or your APR installation path.  If it&apos;s not detected by default then you have to use --with-apr-util.

Please use the user support list for help with build and configuration issues.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>145455</commentid>
    <comment_count>2</comment_count>
    <who name="petrus">petrus</who>
    <bug_when>2011-04-01 07:10:04 +0000</bug_when>
    <thetext>(In reply to comment #1)
&gt; Insufficient information for a bug report: you haven&apos;t told us your configure
&gt; line or your APR installation path.  If it&apos;s not detected by default then you
&gt; have to use --with-apr-util.
&gt; 
&gt; Please use the user support list for help with build and configuration issues.

i&apos;m sorry i forget to include this :
&quot;./configure --prefix=/usr/local/apache --with-apr=/usr/local/apr-httpd/ --with-apr-util=/usr/local/apr-util-httpd/&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165562</commentid>
    <comment_count>3</comment_count>
    <who name="">noedadon85</who>
    <bug_when>2013-03-01 09:21:24 +0000</bug_when>
    <thetext>I suggest to the apache team that BEFORE making something public you have to test it. The installation process is full of bugs and this one : 

configure: error: APR version 1.3.0 or later is required

Is still not resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165565</commentid>
    <comment_count>4</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-03-01 11:59:18 +0000</bug_when>
    <thetext>Still no details.  Apache builds on Linux for most people.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>181108</commentid>
    <comment_count>5</comment_count>
    <who name="Oliver Graute">oliver.graute</who>
    <bug_when>2015-02-17 11:17:01 +0000</bug_when>
    <thetext>I see the same issue here on my build.  apr-1.5.1 and apr-utils-1.5.4 are installed. But nevertheless the configure script can&apos;t find it and abort with 

checking for APR version 1.3.0 or later... no
configure: error: APR version 1.3.0 or later is required
 

My assumption is that something is not included the right way or some path is wrong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>181112</commentid>
    <comment_count>6</comment_count>
    <who name="Oliver Graute">oliver.graute</who>
    <bug_when>2015-02-17 14:17:57 +0000</bug_when>
    <thetext>the dirty workaround for me was the following:


cd /usr/include
sudo ln -sf apr-1.0/ apr-1

after that it found the right apr version</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>54699</bug_id>
          
          <creation_ts>2013-03-15 02:16:48 +0000</creation_ts>
          <short_desc>[feature request] cli webaccess tester</short_desc>
          <delta_ts>2013-03-16 11:32:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.5-HEAD</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>REOPENED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>spamik</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>165849</commentid>
    <comment_count>0</comment_count>
    <who name="">spamik</who>
    <bug_when>2013-03-15 02:16:48 +0000</bug_when>
    <thetext>[feature request] cli webaccess tester

It would be very usefull if cli (shell) tool would exist that would tell if a directory/file is accessible on the webserver (by specified IP for example). I&apos;m developing anti-mallware software and it is critical for it to tell if a directory (and file in it) is web-accessible or not - if it is blocked by either something in httpd.conf or in htaccess (like deny from all) (htaccess are recursive). In other words if there is url (configured at webserver) that allows for direct access to a file or directory (its index.(php|htm)).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165850</commentid>
    <comment_count>1</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-03-15 02:42:08 +0000</bug_when>
    <thetext>Sounds like your just describing a command line HTTP client, which there are plenty of.  I don&apos;t see room for much in this area in our webserver project.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165870</commentid>
    <comment_count>2</comment_count>
    <who name="">spamik</who>
    <bug_when>2013-03-15 21:14:44 +0000</bug_when>
    <thetext>It is not possible to accuratly determine via http if file is actualy blocked by apache configuration because:
file (like php script) can return 404, 401 for &quot;normal request&quot; while returning other data for specified GET argument (and it is actualy ussed by mallware all the time those days - to mask its presence)

also it is not optimal to do any such check via http</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165871</commentid>
    <comment_count>3</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-03-15 21:49:52 +0000</bug_when>
    <thetext>Sorry, but such a feature (a command line tools that knows not just httpd configuration but somehow knows when PHP will decide to return a 401 or 404) is simply not what our project is about.  If you find some novel way to implement this, reopen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165877</commentid>
    <comment_count>4</comment_count>
    <who name="">spamik</who>
    <bug_when>2013-03-16 02:06:16 +0000</bug_when>
    <thetext>only apache httpd can efeciently say if file/directory is blocked by its configuration or not and http response is not a way to deremine it. Duplicating apache configuration parser into other program is pointless.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165878</commentid>
    <comment_count>5</comment_count>
    <who name="">spamik</who>
    <bug_when>2013-03-16 06:33:23 +0000</bug_when>
    <thetext>example scenario: You scanner your partition with antivirus software and found that /home/user/public_html/abc/public/images/cache/0/a/2/5/49586.php was malicious code

You don&apos;t know domain or url to it. How how do you suppose you could tell if that file is actualy accessible via any domain served by your apache? Your httpd.conf is very fancy and has a lot of data in it. Worse, user has multiple .htaccess files with rewrite rules, deny rules and authorization rules. Finaly actual php file returns 401 code to apache if run by webserver to mask its presence (unless passed aprorpiate $_GET argument). Answer is YOU CANT know if file is world accessible! It is completly impossible to analize automaticly those configuration, htaccess, rewrites!!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165880</commentid>
    <comment_count>6</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-03-16 11:32:27 +0000</bug_when>
    <thetext>Doesn&apos;t sound useful in practice to me, but since you insist on reverting my state changes, I&apos;m not going to bother with any more feedback.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>57526</bug_id>
          
          <creation_ts>2015-02-03 07:32:53 +0000</creation_ts>
          <short_desc>Apache 2.2.29_openssl-1.0.1k_x86_64 Error creating semaphore - No space left on device (28</short_desc>
          <delta_ts>2015-04-08 11:13:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.29</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>REOPENED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Atul Sharma">atsharma9</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>atsharma9</cc>
          
          <votes>1</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>180713</commentid>
    <comment_count>0</comment_count>
    <who name="Atul Sharma">atsharma9</who>
    <bug_when>2015-02-03 07:32:53 +0000</bug_when>
    <thetext>Hello,

Environment Details:

Apache: apache-2.2.29_openssl-1.0.1k_x86_64
Linux: Linux 2.6.18-400.1.1.el5 #1 SMP Sun Dec 14 06:01:17 EST 2014 x86_64 x86_64 x86_64 GNU/Linux
Proxy servers: 34 instances (httpd)
Virtual Proxy: 68 instances

Problem:

We have recently updated apache from apache-2.2.27_openssl-1.0.1g_x86_64 to apache-2.2.29_openssl-1.0.1k_x86_64 in PROD server (details above). We have stated receiving the semaphore issues.

[26/Jan/2015:18:53:28] [Info] [CA WebAgent IPC] [3033] [CSmSem::getSem] Attempted to attach to non-existent semaphore with key 0xc8b9bf3c
[26/Jan/2015:18:53:28] [Error] [CA WebAgent IPC] [3033] [CSmSem::getSem] Error creating semaphore using key 0xc8b9bf3c - No space left on device (28)


The same was done to QA servers also, but no errors found(varies because of load)

Current Configuration:
#kernel.sem=&lt;SEMMSL&gt; &lt;SEMMNS&gt; &lt;SEMOPM&gt; &lt;SEMMNI&gt;
kernel.sem=512 524288 100 1024 
# Controls the maximum shared segment size, in bytes
kernel.shmmax = 68719476736
# Controls the maximum number of shared memory segments, in pages
kernel.shmall = 4294967296


Question:

1. Does apache-2.2.29 have more memory requirement than apache-2.2.27?
2. Could you please help us in checking the thread-safety for below modules used in our environement:
libmod_sm22.so
mod_actions.so
mod_alias.so
mod_asis.so
mod_authz_host.so
mod_autoindex.so
mod_deflate.so
mod_dir.so
mod_filter.so
mod_headers.so
mod_include.so
mod_negotiation.so
mod_proxy_balancer.so
mod_rewrite.so
mod_setenvif.so
mod_status.so
mod_logio.so
3. Do you consider updating the kernel semaphore on sysctl.conf based on the values shown above?

Thanks in advance.

Best Regards,
Atul Sharma</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>180714</commentid>
    <comment_count>1</comment_count>
    <who name="Yann Ylavic">ylavic.dev</who>
    <bug_when>2015-02-03 10:13:54 +0000</bug_when>
    <thetext>(In reply to Atul Sharma from comment #0)
&gt; 
&gt; [26/Jan/2015:18:53:28] [Info] [CA WebAgent IPC] [3033] [CSmSem::getSem]
&gt; Attempted to attach to non-existent semaphore with key 0xc8b9bf3c
&gt; [26/Jan/2015:18:53:28] [Error] [CA WebAgent IPC] [3033] [CSmSem::getSem]
&gt; Error creating semaphore using key 0xc8b9bf3c - No space left on device (28)

This is a SiteMinder&apos;s module error.

&gt; 1. Does apache-2.2.29 have more memory requirement than apache-2.2.27?

No it does not.

&gt; 2. Could you please help us in checking the thread-safety for below modules
&gt; used in our environement:
&gt; libmod_sm22.so

We can&apos;t talk about this module which is not maintained by the ASF nor supported in this bugzilla.

&gt; mod_actions.so
&gt; mod_alias.so
&gt; mod_asis.so
&gt; mod_authz_host.so
&gt; mod_autoindex.so
&gt; mod_deflate.so
&gt; mod_dir.so
&gt; mod_filter.so
&gt; mod_headers.so
&gt; mod_include.so
&gt; mod_negotiation.so
&gt; mod_proxy_balancer.so
&gt; mod_rewrite.so
&gt; mod_setenvif.so
&gt; mod_status.so
&gt; mod_logio.so

This ones are thread-safe (when used with a threaded MPM).

&gt; 3. Do you consider updating the kernel semaphore on sysctl.conf based on the
&gt; values shown above?

The values look good for your httpd&apos;s use, but it also depends on other software using SysV IPC on the system.

The issue is probably more about semaphores which are not cleaned when httpd stops (or is it killed? crashes? libmod_sm22 cleanup?), and hence previous ones stay on the system until no more is available.

I&apos;m rejecting this report since it&apos;s not an httpd issue, please contact SiteMinder&apos;s support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>182273</commentid>
    <comment_count>2</comment_count>
    <who name="Atul Sharma">atsharma9</who>
    <bug_when>2015-04-08 10:55:22 +0000</bug_when>
    <thetext>To resolve the same issue increased the amount of semaphores avalible by editing /etc/sysctl.conf and adding the below line, also comment the old setting
/etc/sysctl.conf:
#kernel.sem=512 524288 100 1024  &lt;--Old value
kernel.sem = 512 1048576 100 2048

----
 Even this limit is getting crossed now and I suspect some issue of memory leak or somehow apache is leaving many stale connections.

Could you please help us in determining the problem.

Best Regards,
Atul Sharma</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>182274</commentid>
    <comment_count>3</comment_count>
    <who name="Atul Sharma">atsharma9</who>
    <bug_when>2015-04-08 10:57:07 +0000</bug_when>
    <thetext>lsof on 2 different servers varies a lot:

4901 vs 43818</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>182275</commentid>
    <comment_count>4</comment_count>
    <who name="Atul Sharma">atsharma9</who>
    <bug_when>2015-04-08 11:13:41 +0000</bug_when>
    <thetext>Even when the lsof values are same the semaphores doesn&apos;t gets cleared:

lsof values:

4781 vs 4529


------ Semaphore Status --------
used arrays = 498
allocated semaphores = 500

vs 

------ Semaphore Status --------
used arrays = 1169
allocated semaphores = 1171


vice-versa values.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>12033</bug_id>
          
          <creation_ts>2002-08-26 10:25:14 +0000</creation_ts>
          <short_desc>Graceful restart immediately result in [warn] long lost child came home!</short_desc>
          <delta_ts>2015-10-01 11:22:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.10</version>
          <rep_platform>PC</rep_platform>
          <op_sys>FreeBSD</op_sys>
          <bug_status>REOPENED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sander Holthaus">info</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>7raivis</cc>
    
    <cc>akshay.ballarpure</cc>
    
    <cc>apache_bugzilla</cc>
    
    <cc>n.akhnin</cc>
    
    <cc>pgollucci</cc>
    
    <cc>poeml</cc>
    
    <cc>taffy-tyler6464</cc>
    
    <cc>takashi.asfbugzilla</cc>
          
          <votes>3</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>21730</commentid>
    <comment_count>0</comment_count>
    <who name="Sander Holthaus">info</who>
    <bug_when>2002-08-26 10:25:15 +0000</bug_when>
    <thetext>A gracefull restart results in the following message:

[Fri Aug 23 10:30:21 2002] [notice] Graceful restart requested, doing restart
[Fri Aug 23 10:30:25 2002] [info] mod_unique_id: using ip addr 127.0.0.1
[Fri Aug 23 10:30:26 2002] [notice] Digest: generating secret for digest authent
ication ...
[Fri Aug 23 10:30:26 2002] [notice] Digest: done
[Fri Aug 23 10:30:26 2002] [notice] Apache/2.0.40 (Unix) configured -- resuming
normal operations
[Fri Aug 23 10:30:26 2002] [info] Server built: Aug 16 2002 01:39:38
[Fri Aug 23 10:30:26 2002] [warn] long lost child came home! (pid 62461)
[Fri Aug 23 10:30:26 2002] [warn] long lost child came home! (pid 62460)
[Fri Aug 23 10:30:26 2002] [warn] long lost child came home! (pid 62459)
[Fri Aug 23 10:30:26 2002] [warn] long lost child came home! (pid 62458)
[Fri Aug 23 10:30:26 2002] [warn] long lost child came home! (pid 62457)
[Fri Aug 23 10:30:26 2002] [warn] long lost child came home! (pid 62456)

Server is FreeBSD 4.6 with Apache 2.0.40. A similiar problem was present in 
previous versions, however they seemed to be related to the use of cronolog. 
Currently, the logfilerotation tool which comes with Apache is used.

Server is a basic low activity server with several virtual hosts.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22253</commentid>
    <comment_count>1</comment_count>
    <who name="Josef Zellner">josef.zellner</who>
    <bug_when>2002-09-04 12:29:44 +0000</bug_when>
    <thetext>someone told something like that:

apache uses PIDs for each of its childs... and it occurs, that apache uses PIDs 
more than one time...
and if this occurs, apache write: long lost child came home!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23246</commentid>
    <comment_count>2</comment_count>
    <who name="Andreas Hasenack">panlinux</who>
    <bug_when>2002-09-23 14:14:22 +0000</bug_when>
    <thetext>Could be related, here is what I see with linux (apache-2.0.41-dev): [Mon Sep 23 11:03:35 2002] [notice] Apache/2.0.41-dev (Unix) PHP/4.2.3 DAV/2 configured -- resuming normal operations [Mon Sep 23 11:07:05 2002] [error] [client 127.0.0.1] File does not exist: /srv/www/default/html/server-status [Mon Sep 23 11:07:21 2002] [notice] Graceful restart requested, doing restart [Mon Sep 23 11:07:54 2002] [notice] seg fault or similar nasty error detected in the parent process  </thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23261</commentid>
    <comment_count>3</comment_count>
    <who name="Andreas Hasenack">panlinux</who>
    <bug_when>2002-09-23 18:27:20 +0000</bug_when>
    <thetext>Sorry, konqueror is not bugzilla-friendly, reformating my latest post:

[Mon Sep 23 11:03:35 2002] [notice] Apache/2.0.41-dev (Unix) PHP/4.2.3 DAV/2
configured -- resuming normal operations
[Mon Sep 23 11:07:05 2002] [error] [client 127.0.0.1] File does not exist:
/srv/www/default/html/server-status
[Mon Sep 23 11:07:21 2002] [notice] Graceful restart requested, doing restart
[Mon Sep 23 11:07:54 2002] [notice] seg fault or similar nasty error detected in
the parent process</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23362</commentid>
    <comment_count>4</comment_count>
    <who name="Andreas Hasenack">panlinux</who>
    <bug_when>2002-09-25 14:27:42 +0000</bug_when>
    <thetext>I&apos;m trying to download 2.0.42 to test if this persists, but for some reason I&apos;m
unable to reach httpd.apache.org. Will try again later.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23378</commentid>
    <comment_count>5</comment_count>
    <who name="Andreas Hasenack">panlinux</who>
    <bug_when>2002-09-25 17:46:05 +0000</bug_when>
    <thetext>Tried 2.0.42, and it still happens, but ONLY if the php module (currently 4.2.3)
is loaded. Without the PHP module, apachectl graceful works just fine. Bummer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23381</commentid>
    <comment_count>6</comment_count>
    <who name="Sander Holthaus">info</who>
    <bug_when>2002-09-25 18:12:13 +0000</bug_when>
    <thetext>This bug has nothing to do with PHP. It&apos;s just a &quot;regular&quot; (with_experimental) 
install. Did not try 2.0.42 yet.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23390</commentid>
    <comment_count>7</comment_count>
    <who name="Andreas Hasenack">panlinux</who>
    <bug_when>2002-09-25 19:20:26 +0000</bug_when>
    <thetext>Well, for me apachectl graceful only works if php is not loaded OR if php from
today&apos;s CVS is used. So, for me, it&apos;s a PHP issue that is fixed in CVS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>30425</commentid>
    <comment_count>8</comment_count>
    <who name="André Malo">nd</who>
    <bug_when>2003-01-31 15:55:21 +0000</bug_when>
    <thetext>seems to be no(t| longer) an httpd problem. Fine! ;-)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>30974</commentid>
    <comment_count>9</comment_count>
    <who name="Sander Holthaus">info</who>
    <bug_when>2003-02-10 00:26:14 +0000</bug_when>
    <thetext>[Mon Feb 10 01:20:54 2003] [notice] Graceful restart requested, doing restart
[Mon Feb 10 01:20:57 2003] [info] mod_unique_id: using ip addr 127.0.0.1
[Mon Feb 10 01:20:58 2003] [notice] Digest: generating secret for digest authent
[Mon Feb 10 01:20:58 2003] [notice] Digest: done
[Mon Feb 10 01:20:58 2003] [notice] Apache/2.0.43 configured -- resuming normal
[Mon Feb 10 01:20:58 2003] [info] Server built: Oct  7 2002 23:56:44
[Mon Feb 10 01:20:58 2003] [warn] long lost child came home! (pid 4173)
[Mon Feb 10 01:20:58 2003] [warn] long lost child came home! (pid 4172)
[Mon Feb 10 01:20:58 2003] [warn] long lost child came home! (pid 4171)
[Mon Feb 10 01:20:58 2003] [warn] long lost child came home! (pid 4170)
[Mon Feb 10 01:20:58 2003] [warn] long lost child came home! (pid 4169)
[Mon Feb 10 01:20:58 2003] [warn] long lost child came home! (pid 4168)
[Mon Feb 10 01:20:58 2003] [warn] long lost child came home! (pid 4167)

No PHP, no experimental modules loaded. OS: FreeBSD 4.7-stable</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>31004</commentid>
    <comment_count>10</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2003-02-10 14:10:08 +0000</bug_when>
    <thetext>Sander,

Do you have any piped log programs or perhaps mod_rewrite external processes,
or any child processes created by httpd (other than those serving http
requests)?  I have a hunch (perhaps a bad one :( ) that when some such
processes go away during restart some accounting is messed up and the MPM
can issue such a log message.

Thanks!
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>31005</commentid>
    <comment_count>11</comment_count>
    <who name="Sander Holthaus">info</who>
    <bug_when>2003-02-10 14:27:23 +0000</bug_when>
    <thetext>The only child processes created by the httpd are the piped logs. No external 
rewrite_engine processes or other child processes.

Relevant entry from my vhosts.conf:
   CustomLog &quot;|/usr/local/sbin/rotatelogs /usr/local/www/domain.nl/logs/access_%
Y%m%d.log 86400&quot; combined

I checked with ps aux, and it are the piped logs that cause the problem. (the 
PID&apos;s belong to them).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>49066</commentid>
    <comment_count>12</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2003-12-13 21:30:33 +0000</bug_when>
    <thetext>still present in 2.0-HEAD, 2.1-HEAD, etc.

MPMs handle other children differently for graceful restart vs. hard restart,
resulting in these confusing log messages.

ap_reclaim_child_processes() is called for apachectl stop and apachectl restart,
but not apachectl graceful.

apr_proc_other_child_refresh_all(APR_OC_REASON_RESTART) is called from
ap_reclaim_child_processes() but nowhere else.  That is the code that kills
the piped loggers from the server generation that is currently shutting down.
This cleaner way of cleaning them up isn&apos;t done for graceful restart.  For
graceful restart, the loggers get whacked by the plog pool going away.

There are a couple of ways to fix this.  One way is for the MPM to call
apr_proc_other_child_refresh_all() for both types of restarts.  I believe that
another way is to change piped log maintenance function to terminate the piped
logger when it gets the UNREGISTER call.  That is nice because whenever the pool
goes POOF the piped logger will terminate cleanly, irrespective of what the MPM
does (not tested :) ).  This assumes that during pool cleanup, the UNREGISTER
call will be made before the apr_proc_t-based process termination occurs.
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>107942</commentid>
    <comment_count>13</comment_count>
    <who name="Peter Poeml">peter</who>
    <bug_when>2007-09-10 01:12:38 +0000</bug_when>
    <thetext>The problem is still present in 2.2.4.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>124161</commentid>
    <comment_count>14</comment_count>
    <who name="Philp M. Gollucci">pgollucci</who>
    <bug_when>2009-01-18 16:19:16 +0000</bug_when>
    <thetext>CC myself on FreeBSD related bugs</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>172868</commentid>
    <comment_count>15</comment_count>
    <who name="Binyamin">7raivis</who>
    <bug_when>2014-02-02 20:19:18 +0000</bug_when>
    <thetext>[Sat Nov 30 19:20:28 2013] [notice] Apache/2.2.24 (Unix)   configured -- resuming normal operations
[Mon Dec 02 18:04:04 2013] [notice] Graceful restart requested, doing restart
[Mon Dec 02 18:04:05 2013] [notice] Apache/2.2.24 (Unix)   configured -- resuming normal operations
[Mon Dec 02 18:04:05 2013] [warn] long lost child came home! (pid 1937)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>179593</commentid>
    <comment_count>16</comment_count>
    <who name="Mateen">mateen.ahmed07</who>
    <bug_when>2014-12-07 04:52:14 +0000</bug_when>
    <thetext> [mpm_prefork:warn] [pid 19070] AH00167: long lost child came home!(pid 19074)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>179594</commentid>
    <comment_count>17</comment_count>
    <who name="Mateen">mateen.ahmed07</who>
    <bug_when>2014-12-07 04:54:23 +0000</bug_when>
    <thetext>[Sun Dec 07 03:21:01.970843 2014] [mpm_prefork:notice] [pid 3380] AH00171: Graceful restart requested, doing restart
[Sun Dec 07 03:21:03.008332 2014] [mpm_prefork:notice] [pid 3380] AH00163: Apache/2.4.10 (Unix) OpenSSL/1.0.1e-fips configured -- resuming normal operations
[Sun Dec 07 03:21:03.008344 2014] [core:notice] [pid 3380] AH00094: Command line: &apos;/usr/sbin/httpd&apos;
[Sun Dec 07 03:21:03.008378 2014] [mpm_prefork:warn] [pid 3380] AH00167: long lost child came home! (pid 3384)

every sunday i gets susch messages</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>184757</commentid>
    <comment_count>18</comment_count>
    <who name="webbd">danny.webb</who>
    <bug_when>2015-08-26 10:00:55 +0000</bug_when>
    <thetext>This error still occurs in version 2.4.6:

[Wed Aug 26 10:41:45.668897 2015] [auth_digest:notice] [pid 4416] AH01757: generating secret for digest authentication ...
[Wed Aug 26 10:41:45.670339 2015] [lbmethod_heartbeat:notice] [pid 4416] AH02282: No slotmem from mod_heartmonitor
[Wed Aug 26 10:41:45.709307 2015] [jk:warn] [pid 4416] No JkShmFile defined in httpd.conf. Using default /etc/httpd/logs/jk-runtime-status
[Wed Aug 26 10:41:45.714202 2015] [mpm_prefork:notice] [pid 4416] AH00163: Apache/2.4.6 (CentOS) mod_jk/1.2.41 configured -- resuming normal operations
[Wed Aug 26 10:41:45.714214 2015] [core:notice] [pid 4416] AH00094: Command line: &apos;/usr/sbin/httpd -D FOREGROUND&apos;
[Wed Aug 26 10:41:45.714269 2015] [mpm_prefork:warn] [pid 4416] AH00167: long lost child came home! (pid 5230)
[Wed Aug 26 10:41:45.714283 2015] [mpm_prefork:warn] [pid 4416] AH00167: long lost child came home! (pid 5231)
[Wed Aug 26 10:41:45.714309 2015] [mpm_prefork:warn] [pid 4416] AH00167: long lost child came home! (pid 5232)


all the pids correspond with stream loggers we run to our elk stack:

0     0  5230  4416  20   0  49832  2652 poll_s S    ?          0:00  \_ /usr/bin/nc -u elk.host.local 12202
0     0  5230  4416  20   0      0     0 exit   Z    ?          0:00  \_ [nc] &lt;defunct&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>185574</commentid>
    <comment_count>19</comment_count>
    <who name="Nikita Akhnin">n.akhnin</who>
    <bug_when>2015-10-01 11:21:49 +0000</bug_when>
    <thetext>Still occurs in 2.4.10 and 2.4.12 (Solaris 10 SPARC)
Using piped logs to rotate them throug rotatelogs:

[adm@test log]$ ps -fu httpd
     UID   PID  PPID   C    STIME TTY         TIME CMD
   httpd  1857  2139   0   Aug 14 ?           6:39 /pub/site/httpd/sbin/httpd -k start
   httpd  8763  2139   0 17:16:58 ?           0:00 /pub/site/httpd/sbin/rotatelogs -L log/transfer.log -l log/transfer.l
   httpd  8762  2139   0 17:16:58 ?           0:00 /pub/site/httpd/sbin/rotatelogs -L log/access.log -l log/access.log.%Y-%m-%d 86
   httpd  8756  2139   0 17:16:58 ?           0:00 /pub/site/httpd/sbin/rotatelogs -L log/error.log -l log/error.log.%Y-
   httpd  5150  2139   0   Jul 28 ?           9:19 /pub/site/httpd/sbin/httpd -k start
   httpd 19310  2139   0   Aug 07 ?           8:21 /pub/site/httpd/sbin/httpd -k start
   httpd  2801  2139   0   Jul 14 ?           8:19 /pub/site/httpd/sbin/httpd -k start
   httpd  6118  2139   0   Jul 29 ?           9:26 /pub/site/httpd/sbin/httpd -k start
   httpd 19359  2139   0   Aug 07 ?           8:46 /pub/site/httpd/sbin/httpd -k start
   httpd 19136  2139   0   Jul 28 ?           9:10 /pub/site/httpd/sbin/httpd -k start
   httpd  8765  2139   0 17:16:59 ?           0:00 /pub/site/httpd/sbin/httpd -k start
   httpd  2749  2139   0   Jul 14 ?           8:08 /pub/site/httpd/sbin/httpd -k start
   httpd  8764  2139   0 17:16:58 ?           0:00 /pub/site/httpd/sbin/rotatelogs -L log/transfer.log -l log/transfer.l
   httpd  2139  1283   0   Jul 14 ?         109:37 /pub/site/httpd/sbin/httpd -k start
   httpd  2179  2139   0   Jul 14 ?           8:32 /pub/site/httpd/sbin/httpd -k start
   httpd  6131  2139   0   Jul 29 ?           9:43 /pub/site/httpd/sbin/httpd -k start
   httpd  8754  2139   0 17:16:58 ?           0:00 /pub/site/httpd/sbin/rotatelogs -L log/error.log -l log/error.log.%Y-%m-%d 8640
   httpd 19151  2139   0   Jul 28 ?           8:50 /pub/site/httpd/sbin/httpd -k start
   httpd  2154  2139   0   Jul 14 ?           8:55 /pub/site/httpd/sbin/httpd -k start
   httpd  1845  2139   0   Aug 14 ?           6:52 /pub/site/httpd/sbin/httpd -k start
   httpd  2176  2139   0   Jul 14 ?           8:40 /pub/site/httpd/sbin/httpd -k start
   httpd  2751  2139   0   Jul 14 ?           9:03 /pub/site/httpd/sbin/httpd -k start
[appadm@pine-test log]$ svcadm refresh httpd
[appadm@pine-test log]$ tail error.log
[Thu Oct 01 17:19:01.707625 2015] [mpm_worker:notice] [pid 2139:tid 1] AH00297: SIGUSR1 received.  Doing graceful restart
[Thu Oct 01 17:19:02.304683 2015] [socache_shmcb:info] [pid 2139:tid 1] AH00830: Shared memory socache initialised
[Thu Oct 01 17:19:02.306327 2015] [ssl:info] [pid 2139:tid 1] AH01887: Init: Initializing (virtual) servers for SSL
[Thu Oct 01 17:19:02.313674 2015] [ssl:info] [pid 2139:tid 1] AH01876: mod_ssl/2.4.12 compiled against Server: Apache/2.4.12, Library: OpenSSL/1.0.1i
[Thu Oct 01 17:19:02.332053 2015] [mpm_worker:notice] [pid 2139:tid 1] AH00292: Apache/2.4.12 (Unix) OpenSSL/1.0.1i configured -- resuming normal operations
[Thu Oct 01 17:19:02.332344 2015] [mpm_worker:info] [pid 2139:tid 1] AH00293: Server built: Jun  8 2015 17:07:18
[Thu Oct 01 17:19:02.332533 2015] [core:notice] [pid 2139:tid 1] AH00094: Command line: &apos;/pub/site/httpd/sbin/httpd&apos;
[Thu Oct 01 17:19:02.395953 2015] [mpm_worker:warn] [pid 2139:tid 1] AH00291: long lost child came home! (pid 8762)
[Thu Oct 01 17:19:02.396639 2015] [mpm_worker:warn] [pid 2139:tid 1] AH00291: long lost child came home! (pid 8763)
[Thu Oct 01 17:19:02.396867 2015] [mpm_worker:warn] [pid 2139:tid 1] AH00291: long lost child came home! (pid 8764)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>22686</bug_id>
          
          <creation_ts>2003-08-25 04:29:35 +0000</creation_ts>
          <short_desc>ab: apr_poll: The timeout specified has expired (70007)</short_desc>
          <delta_ts>2007-11-13 18:03:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>REOPENED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bojan Smojver">bojan</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>takashi.asfbugzilla</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>43226</commentid>
    <comment_count>0</comment_count>
    <who name="Bojan Smojver">bojan</who>
    <bug_when>2003-08-25 04:29:35 +0000</bug_when>
    <thetext>With Apache 2.0.47, when I try to use ab on Red Hat Linux 9, it comes up with
the above message. The revision of ab is 1.121.2.1.

This is the command I run and the stdout:
-----------------------------------------------
# strace ab -n 1 http://localhost/ 2&gt;strace.out
This is ApacheBench, Version 2.0.40-dev &lt;$Revision: 1.121.2.1 $&gt; apache-2.0
Copyright (c) 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Copyright (c) 1998-2002 The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient)...
-----------------------------------------------

I will also attach the strace output.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>43227</commentid>
    <comment_count>1</comment_count>
      <attachid>7933</attachid>
    <who name="Bojan Smojver">bojan</who>
    <bug_when>2003-08-25 04:30:26 +0000</bug_when>
    <thetext>Created attachment 7933
strace output from the run</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>43228</commentid>
    <comment_count>2</comment_count>
    <who name="Bojan Smojver">bojan</who>
    <bug_when>2003-08-25 04:34:08 +0000</bug_when>
    <thetext>Sorry, the Summary should read apr_poll, not ap_poll :-(</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>43260</commentid>
    <comment_count>3</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2003-08-25 18:47:19 +0000</bug_when>
    <thetext>

*** This bug has been marked as a duplicate of 21495 ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>43279</commentid>
    <comment_count>4</comment_count>
    <who name="Bojan Smojver">bojan</who>
    <bug_when>2003-08-25 22:15:48 +0000</bug_when>
    <thetext>Sorry fellows :-( I actually searched Bugzilla before I posted, but found
nothing. Shame on me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>101657</commentid>
    <comment_count>5</comment_count>
    <who name="Thibaud Roussillat">thibaud.roussillat</who>
    <bug_when>2007-04-13 06:49:48 +0000</bug_when>
    <thetext>Same error with Apache 2.2.4 on Red Hat AS 3.0. The error happens with the
following command and always near the 40000th request:

./ab -n 100000 -c 5 -p
/exec/applis/snuproxitaltel/current/sh/server-test-req-real.xml
http://localhost:3333/snuproxitaltel

more /etc/redhat-release : Red Hat Enterprise Linux AS release 3 (Taroon Update 6) 
uname -a : Linux opsnu1t1 2.4.21-37.ELsmp #1 SMP Wed Sep 7 13:28:55 EDT 2005
i686 i686 i386 GNU/Linux).

./ab -V : This is ApacheBench, Version 2.0.40-dev &lt;$Revision: 1.146 $&gt; apache-2.0
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Copyright 2006 The Apache Software Foundation, http://www.apache.org/

-------------------------

I never encounter the problem on an other Red Hat machine :
more /etc/redhat-release : Red Hat Enterprise Linux AS release 3 (Taroon Update 3)
uname -a : Linux dflp0ee9 2.4.21-20.0.1.ELsmp #1 SMP Wed Nov 24 20:34:01 EST
2004 i686 i686 i386 GNU/Linux</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>108944</commentid>
    <comment_count>6</comment_count>
    <who name="Bertrand Croq">bertrand.croq</who>
    <bug_when>2007-10-03 06:51:31 +0000</bug_when>
    <thetext>Same here, on Debian Etch, ApacheBench 2.0.40-dev &lt;$Revision: 1.146 $&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>110507</commentid>
    <comment_count>7</comment_count>
    <who name="Vance Lankhaar">vlankhaar</who>
    <bug_when>2007-11-13 15:46:45 +0000</bug_when>
    <thetext>I still see this time out using the latest (or at least very recent) ab / apr /
apu combination:

http revision: http://cvs.apache.org/snapshots/httpd/httpd_20071113171835.tar.gz 
apr revision: SVN r594698
apr-util revision: SVN r594698

When I try to benchmark a page that takes approximately 30 to 60 seconds to
load, I (almost always) get an apr_poll timeout after 30 seconds:

v@kuskanook:~/src/httpd_20071113171835/support$ time ./ab -r -t 120 &quot;$SLOWURL&quot;
This is ApacheBench, Version 2.3 &lt;$Revision: 573101 $&gt;
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient)
apr_poll: The timeout specified has expired (70007)

real    0m30.004s
user    0m0.000s
sys     0m0.001s
</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>7933</attachid>
            <date>2003-08-25 04:30:26 +0000</date>
            <delta_ts>2003-08-25 04:30:26 +0000</delta_ts>
            <desc>strace output from the run</desc>
            <filename>strace.out</filename>
            <type>text/plain</type>
            <size>17151</size>
            <attacher name="Bojan Smojver">bojan</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>55590</bug_id>
          
          <creation_ts>2013-09-24 15:24:26 +0000</creation_ts>
          <short_desc>second commit is failing if space is in file name or file path</short_desc>
          <delta_ts>2014-01-19 23:40:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.25</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P1</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="kesavan">kesavan.sengodan</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>170253</commentid>
    <comment_count>0</comment_count>
    <who name="kesavan">kesavan.sengodan</who>
    <bug_when>2013-09-24 15:24:26 +0000</bug_when>
    <thetext>The issue with Apache 2.2.25 is when you have ‘space’ in folder name / file name. The first commit of these files / folders (with space in the name) is successful. We are facing issue only when subsequent commit is happening. We are using Tortoise SVN as client.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>170255</commentid>
    <comment_count>1</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-09-24 15:51:52 +0000</bug_when>
    <thetext>Why do you think this is an issue in Apache vs. some plugin you&apos;ve added to handle subversion? You&apos;ll have to provide a lot more detail.

http://subversion.apache.org/reporting-issues.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>170257</commentid>
    <comment_count>2</comment_count>
    <who name="kesavan">kesavan.sengodan</who>
    <bug_when>2013-09-24 16:12:38 +0000</bug_when>
    <thetext>We are using Subversion (SVN 1.6.12-r955802) for this repo. This subversion and the modules (dav_svn_module &amp; authz_svn_module) provided by it, are working fine with previous Apache version 2.2.24.

Since the Apache version 2.2.24 has some security issues (multi-site secutity issue), we have moved to Apache version 2.2.25. But this updated version has the second commit issue.

We are almost blocked to use the Apache.

Kindly provide us some workaround and hotfix for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>172514</commentid>
    <comment_count>3</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2014-01-19 23:40:41 +0000</bug_when>
    <thetext>report back if 2.2.26 doesn&apos;t fix it, PR55397.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>55636</bug_id>
          
          <creation_ts>2013-10-07 09:13:04 +0000</creation_ts>
          <short_desc>long lost child came home - Apache is not responding</short_desc>
          <delta_ts>2013-10-07 11:01:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.22</version>
          <rep_platform>Sun</rep_platform>
          <op_sys>Solaris</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P1</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="aks">akshay.ballarpure</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>170462</commentid>
    <comment_count>0</comment_count>
    <who name="aks">akshay.ballarpure</who>
    <bug_when>2013-10-07 09:13:04 +0000</bug_when>
    <thetext>We are seeing HTTPs upload issue in Apache after seeing below the error message.

error.log snippet:
[Mon Jun 03 07:00:01 2013] [warn] long lost child came home! (pid 993)

access.log:

10.176.16.61 - - [03/Jun/2013:07:00:30 +0900] &quot;PUT /ne_data/PM//raw/keyStats_20130602_220000_10.176.16.61_273644.tar HTTP/1.1&quot; 500 371

please let us know the root cause for this issue?

Regards,
Akshay</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>170467</commentid>
    <comment_count>1</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-10-07 11:01:23 +0000</bug_when>
    <thetext>What handles the PUT?  What does the error log say? What are the other threads doing at the time (pstack)?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>60324</bug_id>
          
          <creation_ts>2016-10-31 21:23:50 +0000</creation_ts>
          <short_desc>Memory corruption when using REST URI</short_desc>
          <delta_ts>2016-10-31 23:00:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.6</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P1</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="asp">prabhuas</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>prabhuas</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>194745</commentid>
    <comment_count>0</comment_count>
    <who name="asp">prabhuas</who>
    <bug_when>2016-10-31 21:23:50 +0000</bug_when>
    <thetext>Hi,
I am developing REST support for our firmware using Apache 2.4.6 version. When I try to provide the REST URI, I am getting this segmentiaton fault. I decoded the core dump and shared the BT with apache trace8 logs. I could see this crash happened only when the input goes more than 40 chars with many forward slashes are given (&quot;/&quot;). If we just provide lesser number of URI resources, it does not crash. 

As request_rec is corrupted in ap_process_request_internal(), it tried to allocate big chunk of memory which leads to signal 6 abort. Can you please check and let me know if there is any potential issue in this version? I have also provided the logs for the working case where the request is transered to the dispatcher module.  



#5  0x0fee3d54 in apr_pstrmemdup (a=0x0, s=0xfffffff8 &lt;Address 0xfffffff8 out of bounds&gt;, n=269454880)
    at strings/apr_strings.c:106
#6  0x0f6735d8 in ?? () from ./oss/usr/apache/libexec/mod_alias.so
#7  0x0f673a6c in ?? () from ./oss/usr/apache/libexec/mod_alias.so
#8  0x1003680c in ap_run_translate_name (r=0x5) at request.c:77     --&gt; Check the request_rec value which is wrong. 
#9  0x100393b8 in ap_process_request_internal (r=0x100f8e78) at request.c:173  --&gt; Here request_rec (r) is correct. 

HTTPD conf:
AliasMatch /rest* /apache/webd


URI:
GET: http://10.38.18.77/rest/running/config/port/port-name/user_portnumber_12


Trace8 logs: 

[Mon Oct 31 14:44:49.831406 2016] [core:trace5] [pid 14201] protocol.c(616): [client 10.120.62.206:63119] Request received from client: GET /rest/running/config/port/port-name/user_portnumber_12 HTTP/1.1
[Mon Oct 31 14:44:49.831516 2016] [http:trace4] [pid 14201] http_request.c(300): [client 10.120.62.206:63119] Headers received from client:
[Mon Oct 31 14:44:49.831534 2016] [http:trace4] [pid 14201] http_request.c(303): [client 10.120.62.206:63119]   Host: 10.38.18.77
[Mon Oct 31 14:44:49.831547 2016] [http:trace4] [pid 14201] http_request.c(303): [client 10.120.62.206:63119]   Connection: keep-alive
[Mon Oct 31 14:44:49.831561 2016] [http:trace4] [pid 14201] http_request.c(303): [client 10.120.62.206:63119]   Authorization: Basic cm9vdDpwYXNzd29yZA==
[Mon Oct 31 14:44:49.831574 2016] [http:trace4] [pid 14201] http_request.c(303): [client 10.120.62.206:63119]   Cache-Control: no-cache
[Mon Oct 31 14:44:49.831588 2016] [http:trace4] [pid 14201] http_request.c(303): [client 10.120.62.206:63119]   User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36
[Mon Oct 31 14:44:49.831603 2016] [http:trace4] [pid 14201] http_request.c(303): [client 10.120.62.206:63119]   Postman-Token: 370db150-cfe1-4bc9-0c39-c0aced40cec0
[Mon Oct 31 14:44:49.831629 2016] [http:trace4] [pid 14201] http_request.c(303): [client 10.120.62.206:63119]   Accept: */*
[Mon Oct 31 14:44:49.831643 2016] [http:trace4] [pid 14201] http_request.c(303): [client 10.120.62.206:63119]   Accept-Encoding: gzip, deflate, sdch
[Mon Oct 31 14:44:49.831656 2016] [http:trace4] [pid 14201] http_request.c(303): [client 10.120.62.206:63119]   Accept-Language: en-US,en;q=0.8
[Mon Oct 31 14:44:49.831694 2016] [rewrite:trace2] [pid 14201] mod_rewrite.c(468): [client 10.120.62.206:63119] 10.120.62.206 - - [localhost/sid#100b2eb8][rid#1010aeb8/initial] init rewrite engine with requested uri /rest/running/config/port/port-name/user_portnumber_12
[Mon Oct 31 14:44:49.831717 2016] [rewrite:trace3] [pid 14201] mod_rewrite.c(468): [client 10.120.62.206:63119] 10.120.62.206 - - [localhost/sid#100b2eb8][rid#1010aeb8/initial] applying pattern &apos;.*&apos; to uri &apos;/rest/running/config/port/port-name/user_portnumber_12&apos;
[Mon Oct 31 14:44:49.831755 2016] [rewrite:trace4] [pid 14201] mod_rewrite.c(468): [client 10.120.62.206:63119] 10.120.62.206 - - [localhost/sid#100b2eb8][rid#1010aeb8/initial] RewriteCond: input=&apos;GET&apos; pattern=&apos;^TRACE&apos; =&gt; not-matched
[Mon Oct 31 14:44:49.831776 2016] [rewrite:trace1] [pid 14201] mod_rewrite.c(468): [client 10.120.62.206:63119] 10.120.62.206 - - [localhost/sid#100b2eb8][rid#1010aeb8/initial] pass through /rest/running/config/port/port-name/user_portnumber_12
[crit] Memory allocation failed, aborting process.
[Mon Oct 31 14:44:50.289368 2016] [core:notice] [pid 14198] AH00051: child pid 14201 exit signal Aborted (6), possible coredump in /tmp
[Mon Oct 31 14:44:50.289440 2016] [core:trace4] [pid 14198] mpm_common.c(526): mpm child 14201 (gen 0/slot 0) exited

Coredump:
=========

Core was generated by `/usr/apache/bin/httpd.0 -f /apache/httpd.conf.0&apos;.
Program terminated with signal 6, Aborted.
#0  0x0fce3d64 in *__GI_raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:67
67	../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
	in ../nptl/sysdeps/unix/sysv/linux/raise.c
(gdb) bt
#0  0x0fce3d64 in *__GI_raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:67
#1  0x0fce9260 in *__GI_abort () at abort.c:88
#2  0x100216b4 in ap_abort_on_oom () at util.c:2859
#3  0x1001f280 in abort_on_oom (retcode=0) at main.c:272
#4  0x0fef04fc in apr_palloc (pool=0x100f8e38, in_size=6534) at memory/unix/apr_pools.c:698
#5  0x0fee3d54 in apr_pstrmemdup (a=0x0, s=0xfffffff8 &lt;Address 0xfffffff8 out of bounds&gt;, n=269454880)
    at strings/apr_strings.c:106
#6  0x0f6735d8 in ?? () from ./oss/usr/apache/libexec/mod_alias.so
#7  0x0f673a6c in ?? () from ./oss/usr/apache/libexec/mod_alias.so
#8  0x1003680c in ap_run_translate_name (r=0x5) at request.c:77
#9  0x100393b8 in ap_process_request_internal (r=0x100f8e78) at request.c:173
#10 0x10057dac in ap_process_async_request (r=0x100f8e78) at http_request.c:315
#11 0x10057ff8 in ap_process_request (r=0x0) at http_request.c:363
#12 0x100541cc in ap_process_http_connection (c=0x100f22c8) at http_core.c:190
#13 0x1004af38 in ap_run_process_connection (c=0x100f22c8) at connection.c:41
#14 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#15 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#16 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#17 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#18 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#19 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#20 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#21 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
Previous frame inner to this frame (corrupt stack?)
(gdb) fr 9
#9  0x100393b8 in ap_process_request_internal (r=0x100f8e78) at request.c:173
173	request.c: No such file or directory.
	in request.c
(gdb) p *r
$7 = {pool = 0x100f8e38, connection = 0x100f22c8, server = 0x100b2eb8, next = 0x0, prev = 0x0, main = 0x0, 
  the_request = 0x100f9a80 &quot;GET /rest/running/config/port/port-name/user_portnumber_12 HTTP/1.1&quot;, assbackwards = 0, 
  proxyreq = 0, header_only = 0, proto_num = 1001, protocol = 0x100f9b78 &quot;HTTP/1.1&quot;, hostname = 0x100f9d78 &quot;10.38.18.77&quot;, 
  request_time = 1477914526727398, status_line = 0x0, status = 200, method_number = 0, method = 0x100f9ac8 &quot;GET&quot;, 
  allowed = 0, allowed_xmethods = 0x0, allowed_methods = 0x100f9028, sent_bodyct = 0, bytes_sent = 0, mtime = 0, 
  range = 0x0, clength = 0, chunked = 0, read_body = 0, read_chunked = 0, expecting_100 = 0, kept_body = 0x0, 
  body_table = 0x0, remaining = 0, read_length = 0, headers_in = 0x100f9058, headers_out = 0x100f94e8, 
  err_headers_out = 0x100f9690, subprocess_env = 0x100f92a0, notes = 0x100f97e8, content_type = 0x0, handler = 0x0, 
  content_encoding = 0x0, content_languages = 0x0, vlist_validator = 0x0, user = 0x0, ap_auth_type = 0x0, 
  unparsed_uri = 0x100f9b08 &quot;/rest/running/config/port/port-name/user_portnumber_12&quot;, 
  uri = 0x100f9b40 &quot;/rest/running/config/port/port-name/user_portnumber_12&quot;, 
  filename = 0x100f9e08 &quot;/rest/running/config/port/port-name/user_portnumber_12&quot;, canonical_filename = 0x0, 
  path_info = 0x0, args = 0x0, used_path_info = 2, eos_sent = 0, per_dir_config = 0x100b4020, request_config = 0x100f9940, 
  log = 0x100b2ec8, log_id = 0x100f9f40 &quot;EBPHD8pfvOY&quot;, htaccess = 0x0, output_filters = 0x100f9a00, 
  input_filters = 0x100f9d88, proto_output_filters = 0x100f9a00, proto_input_filters = 0x100f9d88, no_cache = 0, 
  no_local_copy = 0, invoke_mtx = 0x100f9da0, parsed_uri = {scheme = 0x0, hostinfo = 0x0, user = 0x0, password = 0x0, 
    hostname = 0x0, port_str = 0x0, path = 0x100f9b40 &quot;/rest/running/config/port/port-name/user_portnumber_12&quot;, 
    query = 0x0, fragment = 0x0, hostent = 0x0, port = 0, is_initialized = 1, dns_looked_up = 0, dns_resolved = 0}, 
  finfo = {pool = 0x0, valid = 0, protection = 0, filetype = APR_NOFILE, user = 0, group = 0, inode = 0, device = 0, 
    nlink = 0, size = 0, csize = 0, atime = 0, mtime = 0, ctime = 0, fname = 0x0, name = 0x0, filehand = 0x0}, 
  useragent_addr = 0x100f2210, useragent_ip = 0x100f2530 &quot;10.120.62.206&quot;}
(gdb) thread apply all bt

Thread 1 (process 6534):
#0  0x0fce3d64 in *__GI_raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:67
#1  0x0fce9260 in *__GI_abort () at abort.c:88
#2  0x100216b4 in ap_abort_on_oom () at util.c:2859
#3  0x1001f280 in abort_on_oom (retcode=0) at main.c:272
#4  0x0fef04fc in apr_palloc (pool=0x100f8e38, in_size=6534) at memory/unix/apr_pools.c:698
#5  0x0fee3d54 in apr_pstrmemdup (a=0x0, s=0xfffffff8 &lt;Address 0xfffffff8 out of bounds&gt;, n=269454880)
    at strings/apr_strings.c:106
#6  0x0f6735d8 in ?? () from ./oss/usr/apache/libexec/mod_alias.so
#7  0x0f673a6c in ?? () from ./oss/usr/apache/libexec/mod_alias.so
#8  0x1003680c in ap_run_translate_name (r=0x5) at request.c:77
#9  0x100393b8 in ap_process_request_internal (r=0x100f8e78) at request.c:173
#10 0x10057dac in ap_process_async_request (r=0x100f8e78) at http_request.c:315
#11 0x10057ff8 in ap_process_request (r=0x0) at http_request.c:363
#12 0x100541cc in ap_process_http_connection (c=0x100f22c8) at http_core.c:190
#13 0x1004af38 in ap_run_process_connection (c=0x100f22c8) at connection.c:41
#14 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#15 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#16 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#17 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#18 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#19 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#20 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
#21 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
(gdb) thread apply all bt full

Thread 1 (process 6534):
#0  0x0fce3d64 in *__GI_raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:67
	r4 = 6534
	r7 = &lt;value optimized out&gt;
	r12 = &lt;value optimized out&gt;
	r5 = 6
	r8 = &lt;value optimized out&gt;
	r10 = &lt;value optimized out&gt;
	r0 = 250
	r3 = &lt;value optimized out&gt;
	r6 = &lt;value optimized out&gt;
	r9 = &lt;value optimized out&gt;
	r11 = &lt;value optimized out&gt;
	sc_ret = &lt;value optimized out&gt;
	pid = 0
	selftid = 6534
	res = &lt;value optimized out&gt;
#1  0x0fce9260 in *__GI_abort () at abort.c:88
	self = (void *) 0x6
	act = {__sigaction_handler = {sa_handler = 0x1008498c &lt;ap_server_conf&gt;, 
    sa_sigaction = 0x1008498c &lt;ap_server_conf&gt;}, sa_mask = {__val = {1067480216, 258425212, 258425144, 1067479872, 
      1067479672, 4096, 269454968, 268969564, 268547144, 0, 269454880, 402788340, 402790016, 1067479488, 402710460, 
      264978960, 1067479672, 54, 269458240, 269454904, 269418592, 4294967288, 269454880, 268848312, 51, 1067479552, 
      402736308, 537011266, 16, 51, 268572288, 537011268}}, sa_flags = 51, sa_restorer = 0xfd7e0fc &lt;__write_nocancel+8&gt;}
	sigs = {__val = {32, 0 &lt;repeats 31 times&gt;}}
#2  0x100216b4 in ap_abort_on_oom () at util.c:2859
	written = 0
	count = 51
	buf = 0x10064cb8 &quot;[crit] Memory allocation failed, aborting process.\n&quot;
#3  0x1001f280 in abort_on_oom (retcode=0) at main.c:272
No locals.
#4  0x0fef04fc in apr_palloc (pool=0x100f8e38, in_size=6534) at memory/unix/apr_pools.c:698
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
	active = (apr_memnode_t *) 0x100f8e20
	node = (apr_memnode_t *) 0x100f8e20
	mem = &lt;value optimized out&gt;
	size = 4294967288
	free_index = &lt;value optimized out&gt;
#5  0x0fee3d54 in apr_pstrmemdup (a=0x0, s=0xfffffff8 &lt;Address 0xfffffff8 out of bounds&gt;, n=269454880)
    at strings/apr_strings.c:106
	res = 0x100f8e20 &quot;\020\017\216 \020\017\216 &quot;
#6  0x0f6735d8 in ?? () from ./oss/usr/apache/libexec/mod_alias.so
No symbol table info available.
#7  0x0f673a6c in ?? () from ./oss/usr/apache/libexec/mod_alias.so
No symbol table info available.
#8  0x1003680c in ap_run_translate_name (r=0x5) at request.c:77
	n = 258524596
	rv = &lt;value optimized out&gt;
#9  0x100393b8 in ap_process_request_internal (r=0x100f8e78) at request.c:173
	file_req = 0
	access_status = 0
	d = (core_dir_config *) 0x100b4438
#10 0x10057dac in ap_process_async_request (r=0x100f8e78) at http_request.c:315
	c = (conn_rec *) 0x3fa07340
	access_status = &lt;value optimized out&gt;
#11 0x10057ff8 in ap_process_request (r=0x0) at http_request.c:363
	bb = &lt;value optimized out&gt;
	b = &lt;value optimized out&gt;
	c = (conn_rec *) 0x100f22c8
	rv = &lt;value optimized out&gt;
#12 0x100541cc in ap_process_http_connection (c=0x100f22c8) at http_core.c:190
No locals.
#13 0x1004af38 in ap_run_process_connection (c=0x100f22c8) at connection.c:41
	n = 1
	rv = &lt;value optimized out&gt;
#14 0x1005d39c in child_main (child_num_arg=&lt;value optimized out&gt;) at prefork.c:704
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
	numdesc = 402710460
	pdesc = (const apr_pollfd_t *) 0xfcb8b80
	current_conn = (conn_rec *) 0x100f22c8
	csd = (void *) 0x100f2130
	thd = (apr_thread_t *) 0x100f0128
	osthd = Cannot access memory at address 0x199a
(gdb) 





Working case: 
============

URI: GET: http://10.38.18.77/rest/running/config/port/port/user





[Mon Oct 31 15:16:45.851022 2016] [core:trace5] [pid 14246] protocol.c(616): [client 10.120.62.206:64648] Request received from client: GET /rest/running/config/port/port/user HTTP/1.1
[Mon Oct 31 15:16:45.851136 2016] [http:trace4] [pid 14246] http_request.c(300): [client 10.120.62.206:64648] Headers received from client:
[Mon Oct 31 15:16:45.851154 2016] [http:trace4] [pid 14246] http_request.c(303): [client 10.120.62.206:64648]   Host: 10.38.18.77
[Mon Oct 31 15:16:45.851167 2016] [http:trace4] [pid 14246] http_request.c(303): [client 10.120.62.206:64648]   Connection: keep-alive
[Mon Oct 31 15:16:45.851181 2016] [http:trace4] [pid 14246] http_request.c(303): [client 10.120.62.206:64648]   Authorization: Basic cm9vdDpwYXNzd29yZA==
[Mon Oct 31 15:16:45.851194 2016] [http:trace4] [pid 14246] http_request.c(303): [client 10.120.62.206:64648]   Cache-Control: no-cache
[Mon Oct 31 15:16:45.851208 2016] [http:trace4] [pid 14246] http_request.c(303): [client 10.120.62.206:64648]   User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36
[Mon Oct 31 15:16:45.851223 2016] [http:trace4] [pid 14246] http_request.c(303): [client 10.120.62.206:64648]   Postman-Token: 2746b1cb-9e3f-2d59-b468-638de397f10b
[Mon Oct 31 15:16:45.851237 2016] [http:trace4] [pid 14246] http_request.c(303): [client 10.120.62.206:64648]   Accept: */*
[Mon Oct 31 15:16:45.851250 2016] [http:trace4] [pid 14246] http_request.c(303): [client 10.120.62.206:64648]   Accept-Encoding: gzip, deflate, sdch
[Mon Oct 31 15:16:45.851263 2016] [http:trace4] [pid 14246] http_request.c(303): [client 10.120.62.206:64648]   Accept-Language: en-US,en;q=0.8
[Mon Oct 31 15:16:45.851303 2016] [rewrite:trace2] [pid 14246] mod_rewrite.c(468): [client 10.120.62.206:64648] 10.120.62.206 - - [localhost/sid#100b2eb8][rid#1010cec0/initial] init rewrite engine with requested uri /rest/running/config/port/port/user
[Mon Oct 31 15:16:45.851325 2016] [rewrite:trace3] [pid 14246] mod_rewrite.c(468): [client 10.120.62.206:64648] 10.120.62.206 - - [localhost/sid#100b2eb8][rid#1010cec0/initial] applying pattern &apos;.*&apos; to uri &apos;/rest/running/config/port/port/user&apos;
[Mon Oct 31 15:16:45.851364 2016] [rewrite:trace4] [pid 14246] mod_rewrite.c(468): [client 10.120.62.206:64648] 10.120.62.206 - - [localhost/sid#100b2eb8][rid#1010cec0/initial] RewriteCond: input=&apos;GET&apos; pattern=&apos;^TRACE&apos; =&gt; not-matched
[Mon Oct 31 15:16:45.851385 2016] [rewrite:trace1] [pid 14246] mod_rewrite.c(468): [client 10.120.62.206:64648] 10.120.62.206 - - [localhost/sid#100b2eb8][rid#1010cec0/initial] pass through /rest/running/config/port/port/user
[Mon Oct 31 15:16:45.851490 2016] [authz_core:debug] [pid 14246] mod_authz_core.c(799): [client 10.120.62.206:64648] AH01626: authorization result of Require all granted: granted
[Mon Oct 31 15:16:45.851509 2016] [authz_core:debug] [pid 14246] mod_authz_core.c(799): [client 10.120.62.206:64648] AH01626: authorization result of &lt;RequireAny&gt;: granted
[Mon Oct 31 15:16:45.851522 2016] [core:trace3] [pid 14246] request.c(236): [client 10.120.62.206:64648] request authorized without authentication by access_checker_ex hook: /rest/running/config/port/port/user
sw0: Oct 31 15:16:45in webd.c, line 807
    Dispather while-uri:/rest/running/config/port/port/user</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>194746</commentid>
    <comment_count>1</comment_count>
    <who name="asp">prabhuas</who>
    <bug_when>2016-10-31 21:26:18 +0000</bug_when>
    <thetext>Hi,
Please let me if there is any work around on it? 

Thanks
ASP</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>194747</commentid>
    <comment_count>2</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2016-10-31 21:33:06 +0000</bug_when>
    <thetext>Does it fail when you remove your module? Can you run under valgrind or MALLOC_CHECK_=2 and see if it crashes/warns earlier?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>194748</commentid>
    <comment_count>3</comment_count>
    <who name="asp">prabhuas</who>
    <bug_when>2016-10-31 22:56:21 +0000</bug_when>
    <thetext>Yes Eric, it happens even after I removed my module from the AliasMatch. I tried to set the MALLOC_CHECK_=2 for apache server and the same crash is shown. I will try to get the valgrind logs asap.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>194749</commentid>
    <comment_count>4</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2016-10-31 23:00:25 +0000</bug_when>
    <thetext>(In reply to asp from comment #3)
&gt; Yes Eric, it happens even after I removed my module from the AliasMatch. I
&gt; tried to set the MALLOC_CHECK_=2 for apache server and the same crash is
&gt; shown. I will try to get the valgrind logs asap.

There was a fix in 2.4.10:


  *) mod_alias: Stop setting CONTEXT_PREFIX and CONTEXT_DOCUMENT environment
     variables as a result of AliasMatch. [Eric Covener]


In this same neighborhood. Your AliasMatch seems to be similar to the ones that were breaking things -- no capture and substitution at all. I don&apos;t know if redhat backported never backported this fix, or if you just don&apos;t have their maintenance -- but we can&apos;t take a report about problems in &quot;2.4.6&quot; here at the ASF.  We&apos;re on 2.4.23.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>42368</bug_id>
          
          <creation_ts>2007-05-09 08:22:17 +0000</creation_ts>
          <short_desc>httpd is crashing if conf/extra/httpd-manual.conf in enabled in its configuration</short_desc>
          <delta_ts>2008-02-11 05:13:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.4</version>
          <rep_platform>HP</rep_platform>
          <op_sys>HP-UX</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="destroyedlolo">laurent.faillie</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>103003</commentid>
    <comment_count>0</comment_count>
    <who name="destroyedlolo">laurent.faillie</who>
    <bug_when>2007-05-09 08:22:17 +0000</bug_when>
    <thetext>Hello,

As said in bug #42261 ...

I successfully configure Apache 2.2.4 on my HP-712 box under a well patched
HP-UX 11.11
Unfortunately, if conf/extra/httpd-manual.conf is enabled in httpd.conf, httpd
silently won&apos;t start or crash.

I did some test, and it seems this problem raise only when the AliasMatch line
is enabled.

Best regards,

Laurent</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>113623</commentid>
    <comment_count>1</comment_count>
    <who name="Joe Orton">jorton</who>
    <bug_when>2008-02-11 05:13:30 +0000</bug_when>
    <thetext>Is this reproducible with 2.2.8?  Can you get a stack backtrace from a crash?
</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>42471</bug_id>
          
          <creation_ts>2007-05-21 09:03:32 +0000</creation_ts>
          <short_desc>clients with IE7 take 3megs per page load. httpd.exe hangs.</short_desc>
          <delta_ts>2008-06-05 13:24:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.0</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="venturello">fossilk</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>103421</commentid>
    <comment_count>0</comment_count>
    <who name="venturello">fossilk</who>
    <bug_when>2007-05-21 09:03:32 +0000</bug_when>
    <thetext>clients with IE7 take 3megs+ (on the server) per page load. 
while Firefox/Opera take a few K on each page load.
with only a few loads the server&apos;s memory is full, httpd services crashes and a
new httpd is created but old service takes memory until I click &quot;close&quot; on the
crash report.
It occured with apache 2.2.0 and I upgraded to 2.2.3 same issue
I use SSL, same problem without it.
latest versions on all browsers too.

machine: winxpPRO  sp2 1G ram.
with apache i also run:
MySQL version 5.0.18  
Openssl version 0.9.8a  
PHP version 5.1.2  

thank you,

venturello</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>103436</commentid>
    <comment_count>1</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2007-05-21 13:30:57 +0000</bug_when>
    <thetext>*** Bug 42472 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>103437</commentid>
    <comment_count>2</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2007-05-21 13:33:54 +0000</bug_when>
    <thetext>As httpd as such is browser agnostic it smells a lot like a memory leak in your
PHP script / PHP when processing requests from IE7. Does this problem also occur
if you remove PHP from your configuration?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>103442</commentid>
    <comment_count>3</comment_count>
    <who name="venturello">fossilk</who>
    <bug_when>2007-05-21 14:06:18 +0000</bug_when>
    <thetext>Thank you for your response.
I created some plain HTML pages (Save As HTML of how the php app is displayed 
on firefox) and opened on IE7. Same issue.
But, I want to take a look at the memory leak possibility. Do you know of any 
material/documentation regarding this matter?

thank you very much!

Venturello

(In reply to comment #2)
&gt; As httpd as such is browser agnostic it smells a lot like a memory leak in 
your
&gt; PHP script / PHP when processing requests from IE7. Does this problem also 
occur
&gt; if you remove PHP from your configuration?

</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>103445</commentid>
    <comment_count>4</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2007-05-21 14:37:07 +0000</bug_when>
    <thetext>(In reply to comment #3)
&gt; Thank you for your response.
&gt; I created some plain HTML pages (Save As HTML of how the php app is displayed 
&gt; on firefox) and opened on IE7. Same issue.

Hm, really strange. Have you removed all the php stuff from your httpd
configuration for this test?

&gt; But, I want to take a look at the memory leak possibility. Do you know of any 
&gt; material/documentation regarding this matter?

Not apart from the usual memory profiling suspects which might make this very
hard. I am not a PHP expert. Have you checked their bugzilla / mailing lists for
any PHP specific tools to find such leaks?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>117405</commentid>
    <comment_count>5</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2008-06-05 13:24:28 +0000</bug_when>
    <thetext>Pending more information about your configuration, etc.  Presuming that this
is the side effect of a loaded third party module, will close the report
shortly if there&apos;s no additional information provided.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>44363</bug_id>
          
          <creation_ts>2008-02-05 20:33:38 +0000</creation_ts>
          <short_desc>Slow file transfers</short_desc>
          <delta_ts>2011-08-07 00:15:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.8</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows Server 2003</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc>http://beta.inthecrack.com</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Carter">apache</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>113460</commentid>
    <comment_count>0</comment_count>
    <who name="Carter">apache</who>
    <bug_when>2008-02-05 20:33:38 +0000</bug_when>
    <thetext>Moving out site onto a new Windows 2003 server, same Apache config, static 
file downloads are limited to 350-600Kb/sec.  The new server is on a gigE 
connection.  The previous server gave us 2MB/sec download.  Both are similar 
hardware - Dell 2950/1950 with 4GB RAM and dual quad-core xeon.  Both on same 
OS.

Install of IIS maxes out bandwidth of the visitor&apos;s connection - I&apos;ve seen 
2.5MB/sec.

FTP maxes out connection, even when testing on port 80.

Since IIS &amp; FileZilla FTP both max out the connection and Apache is 1/6 the 
speed, I&apos;m assumming there is an incompatiblity somewhere.  I reinstalled both 
2.2.8 and 2.2.6 without SSL, vanilla and wiped out the httpd.conf - but no 
better.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>113489</commentid>
    <comment_count>1</comment_count>
    <who name="Joshua Slive">slive</who>
    <bug_when>2008-02-06 10:54:23 +0000</bug_when>
    <thetext>This is a question that should be tried first on a user-support forum like the
users@httpd.apache.org mailing list before filing a bug report.

(Before you post to the users list, try the standard win32 trick:
EnableSendfile off
EnableMMAP off
Win32DiableAcceptEx
)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>113490</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Trawick">trawick</who>
    <bug_when>2008-02-06 11:19:33 +0000</bug_when>
    <thetext>(In reply to comment #1)
&gt; This is a question that should be tried first on a user-support forum like the
&gt; users@httpd.apache.org mailing list before filing a bug report.
&gt; 
&gt; (Before you post to the users list, try the standard win32 trick:

another thing to try 

SendBufferSize 10000000

(number is probably overkill, but sufficient for testing the theory; I saw a
complaint recently that Apache on Windows was using much smaller TCP windows
than IIS; I don&apos;t think &quot;ReceiveBufferSize 10000000&quot; would help here)
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>113497</commentid>
    <comment_count>3</comment_count>
    <who name="Carter">apache</who>
    <bug_when>2008-02-06 13:21:39 +0000</bug_when>
    <thetext>I tried all of the tricks suggested with no significant success.  I did notice 
that EnableSendfile off did double my download speeds to 700Kb/sec, but 
unfortunately, the other options didn&apos;t make a difference.  I had great hope 
for the ReceiveBufferSize, but it seems that my Window Size is sufficent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>113503</commentid>
    <comment_count>4</comment_count>
    <who name="Carter">apache</who>
    <bug_when>2008-02-06 21:53:19 +0000</bug_when>
    <thetext>I&apos;ve noticed that file download sent via PHP &quot;streaming&quot; using the PEAR 
HTTP_Download package are sending at full speed.  Just static content is 
slowed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>113507</commentid>
    <comment_count>5</comment_count>
    <who name="William A. Rowe Jr.">wrowe</who>
    <bug_when>2008-02-07 00:08:42 +0000</bug_when>
    <thetext>Just to verify...

You did confirm that EnableSendfile Off speeds things up?  Does EnableMMAP Off
further change the performance for better or worse?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>113524</commentid>
    <comment_count>6</comment_count>
    <who name="Carter">apache</who>
    <bug_when>2008-02-07 06:23:40 +0000</bug_when>
    <thetext>EnableSendfile Off speeds up static file transfers from about 350Kb/sec to 
750Kb/sec.  No other setting helps.  
PHP streaming transfers max out the visitor&apos;s connection speed - for me it is 
about 2MB/sec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>113525</commentid>
    <comment_count>7</comment_count>
    <who name="Carter">apache</who>
    <bug_when>2008-02-07 06:24:34 +0000</bug_when>
    <thetext>(In reply to comment #6)
EnableMMAP Off had no noticable effect.

</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>144001</commentid>
    <comment_count>8</comment_count>
    <who name="Dominik Friedrichs">df</who>
    <bug_when>2011-02-05 17:42:48 +0000</bug_when>
    <thetext>If all these dont work:

EnableSendfile off
EnableMMAP off
Win32DiableAcceptEx
SendBufferSize ...

Then this is one last thing to try (it did the trick for me on W2k3 R2):
Set in your Windows registry

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Afd\Parameters

DefaultSendWindow
DefaultReceiveWindow

To something like 65535. You&apos;ll probably have to create the DWORD values. Reboot afterwards and that should do the trick.

It appears that Apache fails to set the buffer size (without printing warnings) or its setting is ignored by Windows for some reason.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>148450</commentid>
    <comment_count>9</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2011-08-07 00:15:25 +0000</bug_when>
    <thetext>Please let us know if the global send buffer size was different then the directive.  I&apos;ve observed this myself.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>44622</bug_id>
          
          <creation_ts>2008-03-17 18:12:10 +0000</creation_ts>
          <short_desc>POST fails to SSL vhost with proxy to HTTP backend</short_desc>
          <delta_ts>2008-03-18 00:59:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.8</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nick Hengeveld">nickh</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>114694</commentid>
    <comment_count>0</comment_count>
    <who name="Nick Hengeveld">nickh</who>
    <bug_when>2008-03-17 18:12:10 +0000</bug_when>
    <thetext>I have an Apache server that uses mod_rewrite to proxy incoming requests to one of several backend HTTP servers based on incoming request headers.  Most requests work correctly but one particular multipart/form-data POST always fails if the vhost accepting the request is using SSL.  One of the requests that works fine is another multipart/form-data POST formatted in a very similar way.

I have reproduced the error using Apache 2.2.3 from CentOS 5.1 (RPM version httpd-2.2.3-11.el5.centos) and with a fresh RPM build from the current 2.2.8 source.

The server configuration contains the following (some server and log paths changed):

Listen 30100
&lt;VirtualHost _default_:30100&gt;
    ServerName server.reactrix.com
    ErrorLog /path/to/logs/apache-error_log
    CustomLog /path/to/logs/apache-access_log reactrix
 
    SSLEngine on
    SSLVerifyClient require
    SSLVerifyDepth 10
    SSLCertificateFile /path/to/ssl/server.crt
    SSLCertificateKeyFile /path/to/ssl/server.key
    SSLCACertificatePath /path/to/ssl/
 
    RewriteEngine on
    RewriteOptions inherit

    &lt;Directory /path/to/git/&gt;
        Options -indexes
        order allow,deny
        allow from all
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;

Listen 8100
&lt;VirtualHost _default_:8100&gt;
    ServerName server.reactrix.com
    ErrorLog /path/to/logs/apache-error_log
    CustomLog /path/to/logs/apache-access_log reactrix

    RewriteEngine on
    RewriteOptions inherit

    &lt;Directory /path/to/git/&gt;
        Options -indexes
        order allow,deny
        allow from all
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;

The request I am trying to send (some headers removed) is:

POST http://server.reactrix.com/path/to/upload
Host: server.reactrix.com
Content-Length: 465
Content-Type: multipart/form-data; boundary=xYzZY

--xYzZY
Content-Disposition: form-data; name=&quot;upload[handle]&quot;

handle
--xYzZY
Content-Disposition: form-data; name=&quot;upload[display_id]&quot;

1
--xYzZY
Content-Disposition: form-data; name=&quot;upload[controller_id]&quot;

1
--xYzZY
Content-Disposition: form-data; name=&quot;upload[file]&quot;; filename=&quot;/tmp/file.png&quot;
Content-Type: application/gzip

ë
¼Cçåâb``àõôp  b``²ïp ¾×ÝT°§cHÅ­·
   ¾úçòò/` 4¤3¬a`ìOõX  âzºú¹¬sJh\³ûu
--xYzZY--

When I send the above request to the SSL listener on port 30100, I get the following response (some headers removed):

HTTP/1.1 404 Not Found
Connection: close
Date: Tue, 18 Mar 2008 00:21:42 GMT
Via: 1.1 127.0.0.1:30100
Content-Length: 0
Content-Type: text/plain
Client-Date: Tue, 18 Mar 2008 00:21:15 GMT
Client-Response-Num: 1

When I send the same request to the listener on port 8100, I get the following response (some headers removed):

HTTP/1.1 200 OK
Cache-Control: no-cache
Connection: close
Date: Tue, 18 Mar 2008 00:24:59 GMT
Via: 1.1 127.0.0.1:8100
Server: Mongrel 1.1.2
Content-Length: 16
Content-Type: text/html
Client-Date: Tue, 18 Mar 2008 00:24:32 GMT
Client-Response-Num: 1
Set-Cookie: _session_id=3368cec4d8f4f2c3f7f8e1ecc63dc86a; path=/
Status: 200 OK

Upload succeeded</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>114696</commentid>
    <comment_count>1</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2008-03-18 00:59:54 +0000</bug_when>
    <thetext>1. Please set the loglevel to debug and post the snippets of the error_log here (from both virtual hosts, plus the global one).
2. Have you tried if it works when you remove the authentication via client certificates in the SSL virtual host?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>46785</bug_id>
          
          <creation_ts>2009-03-02 03:20:45 +0000</creation_ts>
          <short_desc>Child process increases to 100% (CPU)</short_desc>
          <delta_ts>2009-03-20 10:18:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.3</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Carlos Marinho">migasgw</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>125243</commentid>
    <comment_count>0</comment_count>
    <who name="Carlos Marinho">migasgw</who>
    <bug_when>2009-03-02 03:20:45 +0000</bug_when>
    <thetext>Using Apache 2.2.3 acting as a proxy, renamed here as wap2d, i&apos;m getting some process at 100% of CPU.

Some times it crashes at apr_brigade_cleanup () and others at apr_bucket_destroy_noop () (see gdb backtrace bellow).

Other times i get a segmentation fault but the core dump file says the same.

I hope that someone can help.

Here is the gdb backtrace:

Reading symbols from /usr/lib/httpd/modules/ptin_proxy_wap2_profiles.so...done.
Loaded symbols for /etc/httpd/modules/ptin_proxy_wap2_profiles.so
Reading symbols from /usr/lib/httpd/modules/ptin_proxy_wap2_http.so...done.
Loaded symbols for /etc/httpd/modules/ptin_proxy_wap2_http.so
Reading symbols from /usr/lib/httpd/modules/mod_proxy_connect.so...done.
Loaded symbols for /etc/httpd/modules/mod_proxy_connect.so
Reading symbols from /usr/lib/httpd/modules/mod_charset_lite.so...done.
Loaded symbols for /etc/httpd/modules/mod_charset_lite.so
Reading symbols from /usr/lib/httpd/modules/mod_substitute.so...done.
Loaded symbols for /etc/httpd/modules/mod_substitute.so
Reading symbols from /lib/libnss_dns.so.2...done.
Loaded symbols for /lib/libnss_dns.so.2
0x00fe8140 in apr_bucket_destroy_noop ()
   from /usr/lib/libaprutil-1.so.0
(gdb) where
#0  0x00fe8140 in apr_bucket_destroy_noop () from /usr/lib/libaprutil-1.so.0
#1  0x00fe84ef in apr_brigade_cleanup () from /usr/lib/libaprutil-1.so.0
#2  0x00fe852d in apr_brigade_cleanup () from /usr/lib/libaprutil-1.so.0
#3  0x0033cc7d in apr_pool_cleanup_run () from /usr/lib/libapr-1.so.0
#4  0x0033d5c7 in apr_pool_clear () from /usr/lib/libapr-1.so.0
#5  0x00736714 in ap_graceful_stop_signalled () from /usr/sbin/wap2d
#6  0x00736bf1 in ap_graceful_stop_signalled () from /usr/sbin/wap2d
#7  0x00736cca in ap_graceful_stop_signalled () from /usr/sbin/wap2d
#8  0x0073782b in ap_mpm_run () from /usr/sbin/wap2d
#9  0x0070e127 in main () from /usr/sbin/wap2d
(gdb) up
#1  0x00fe84ef in apr_brigade_cleanup () from /usr/lib/libaprutil-1.so.0
(gdb) up
#2  0x00fe852d in apr_brigade_cleanup () from /usr/lib/libaprutil-1.so.0
(gdb) up
#3  0x0033cc7d in apr_pool_cleanup_run () from /usr/lib/libapr-1.so.0
(gdb) up
#4  0x0033d5c7 in apr_pool_clear () from /usr/lib/libapr-1.so.0
(gdb) up
#5  0x00736714 in ap_graceful_stop_signalled () from /usr/sbin/wap2d
(gdb) up
#6  0x00736bf1 in ap_graceful_stop_signalled () from /usr/sbin/wap2d
(gdb) up
#7  0x00736cca in ap_graceful_stop_signalled () from /usr/sbin/wap2d
(gdb) up
#8  0x0073782b in ap_mpm_run () from /usr/sbin/wap2d
(gdb) up
#9  0x0070e127 in main () from /usr/sbin/wap2d
(gdb) up




Here is my config:

wap2d -M
Loaded Modules:
 core_module (static)
 mpm_prefork_module (static)
 http_module (static)
 so_module (static)
 auth_basic_module (shared)
 auth_digest_module (shared)
 authn_file_module (shared)
 authn_alias_module (shared)
 authn_anon_module (shared)
 authn_dbm_module (shared)
 authn_default_module (shared)
 authz_host_module (shared)
 authz_user_module (shared)
 authz_owner_module (shared)
 authz_groupfile_module (shared)
 authz_dbm_module (shared)
 authz_default_module (shared)
 ldap_module (shared)
 authnz_ldap_module (shared)
 include_module (shared)
 log_config_module (shared)
 logio_module (shared)
 env_module (shared)
 ext_filter_module (shared)
 mime_magic_module (shared)
 expires_module (shared)
 deflate_module (shared)
 headers_module (shared)
 usertrack_module (shared)
 setenvif_module (shared)
 mime_module (shared)
 dav_module (shared)
 status_module (shared)
 autoindex_module (shared)
 info_module (shared)
 dav_fs_module (shared)
 vhost_alias_module (shared)
 negotiation_module (shared)
 dir_module (shared)
 actions_module (shared)
 speling_module (shared)
 userdir_module (shared)
 alias_module (shared)
 rewrite_module (shared)
 proxy_module (shared)
 proxy_balancer_module (shared)
 proxy_ftp_module (shared)
 proxy_http_module (shared)
 proxy_connect_module (shared)
 cache_module (shared)
 suexec_module (shared)
 disk_cache_module (shared)
 file_cache_module (shared)
 mem_cache_module (shared)
 cgi_module (shared)
 version_module (shared)
 proxy_ajp_module (shared)
 ssl_module (shared)

Regards,
Carlos Marinho</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>125661</commentid>
    <comment_count>1</comment_count>
    <who name="Dan Poirier">poirier</who>
    <bug_when>2009-03-20 10:18:05 +0000</bug_when>
    <thetext>I suggest moving to the current release (2.2.11 at the moment).  If you still have problems, try commenting out all the modules you&apos;re not using.  If that doesn&apos;t help, you&apos;ll probably have to provide your exact configuration and detailed instructions for recreating the problem for someone to be able to help. 

All I can tell from the stack trace is that something probably corrupted memory at some time in the past, and apache tripped over it when it tried to clean up during a normal shutdown.  So you might be able to catch the problem by building APR with malloc and pool debugging enabled.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>47562</bug_id>
          
          <creation_ts>2009-07-23 03:07:29 +0000</creation_ts>
          <short_desc>Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1</short_desc>
          <delta_ts>2009-07-23 11:57:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.3</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows Server 2003</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Lubo Vasilev">lubovasilev</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>129066</commentid>
    <comment_count>0</comment_count>
    <who name="Lubo Vasilev">lubovasilev</who>
    <bug_when>2009-07-23 03:07:29 +0000</bug_when>
    <thetext>Hi,
We using Apache 2.2.3 and Perl 5.8.8.
Sometimes our Apache crashed with folowing error:
Can you help me to resolve a prodlem

[Thu Jul 23 11:08:25 2009] [notice] Parent: child process exited with status 3221225477 -- Restarting.
[Thu Jul 23 11:08:34 2009] [notice] Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1 Perl/v5.8.8 configured -- resuming normal operations
[Thu Jul 23 11:08:34 2009] [notice] Server built: Jul 27 2006 16:49:49
[Thu Jul 23 11:08:34 2009] [notice] Parent: Created child process 5388
[Thu Jul 23 11:08:46 2009] [notice] Child 5388: Child process is running
[Thu Jul 23 11:08:46 2009] [notice] Child 5388: Acquired the start mutex.
[Thu Jul 23 11:08:46 2009] [notice] Child 5388: Starting 250 worker threads.
[Thu Jul 23 11:08:46 2009] [notice] Child 5388: Starting thread to listen on port 80.
[Thu Jul 23 11:08:57 2009] [notice] Parent: child process exited with status 3221225477 -- Restarting.
[Thu Jul 23 11:09:05 2009] [notice] Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1 Perl/v5.8.8 configured -- resuming normal operations
[Thu Jul 23 11:09:05 2009] [notice] Server built: Jul 27 2006 16:49:49
[Thu Jul 23 11:09:05 2009] [notice] Parent: Created child process 2156
[Thu Jul 23 11:09:16 2009] [notice] Child 2156: Child process is running
[Thu Jul 23 11:09:16 2009] [notice] Child 2156: Acquired the start mutex.
[Thu Jul 23 11:09:16 2009] [notice] Child 2156: Starting 250 worker threads.
[Thu Jul 23 11:09:16 2009] [notice] Child 2156: Starting thread to listen on port 80.
[Thu Jul 23 11:09:19 2009] [notice] Parent: child process exited with status 3221225477 -- Restarting.
[Thu Jul 23 11:09:24 2009] [notice] Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1 Perl/v5.8.8 configured -- resuming normal operations</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>129090</commentid>
    <comment_count>1</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2009-07-23 11:57:44 +0000</bug_when>
    <thetext>2.2.3 is a very old version please update to the latest version and check if the problem still occurs. If yes please come back with a stack trace.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>48440</bug_id>
          
          <creation_ts>2009-12-23 08:49:11 +0000</creation_ts>
          <short_desc>Segmentation Fault</short_desc>
          <delta_ts>2009-12-28 08:14:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.14</version>
          <rep_platform>Sun</rep_platform>
          <op_sys>Solaris</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="aurabhi">aurabhi</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>133091</commentid>
    <comment_count>0</comment_count>
    <who name="aurabhi">aurabhi</who>
    <bug_when>2009-12-23 08:49:11 +0000</bug_when>
    <thetext>I have a apache 2.2.14 running Solaris 5.10
Apache is built using SunStudio 12 Update 1. 
On this setup I have a custom module and wlproxy(mod_wl_22.so)
When I request pages which are delivered via wlproxy(mod_wl_22.so) I see segmentation faults. The requests are server properly but at the end of every request I see the following error

[Wed Dec 23 21:08:52 2009] [notice] child pid 11624 exit signal Segmentation fault (11)

Following is what I see when I opened the core in dbx 

bash-3.00# dbx httpd /tmp/apache2-gdb-dump/core
For information about new features see `help changes&apos;
To remove this message, put `dbxenv suppress_startup_message 7.7&apos; in your .dbxrc
Reading httpd
core file header read successfully
Reading ld.so.1
Reading libm.so.2
Reading libaprutil-1.so.0.3.9
Reading libexpat.so.0.1.0
Reading libapr-1.so.0.3.9
Reading libuuid.so.1
Reading libsendfile.so.1
Reading librt.so.1
Reading libsocket.so.1
Reading libnsl.so.1
Reading libpthread.so.1
Reading libc.so.1
Reading libaio.so.1
Reading libmd.so.1
Reading libc_psr.so.1
Reading libCrun.so.1
Reading mod_alias.so
Reading mod_wl_22.so
Reading mod_cwmp.so
t@1 (l@1) program terminated by signal SEGV (Segmentation Fault)
0xff0465c8: __pollsys+0x0008:   blu      _cerror        ! 0xfefa34c0
(dbx) where
current thread: t@1
=&gt;[1] __pollsys(0x4, 0x0, 0xffbf9820, 0x0, 0xffbf9820, 0x0), at 0xff0465c8
  [2] _pollsys(0xffbf97b8, 0x0, 0xffbf9820, 0x0, 0x0, 0x0), at 0xff03965c
  [3] _pselect(0xffbf97b8, 0xff0723d0, 0xff0723d0, 0x0, 0xffbf9820, 0x0), at 0xfefe6b10
  [4] _select(0x0, 0x0, 0x0, 0x0, 0xffbf9888, 0xf4240), at 0xfefe6e88
  [5] apr_sleep(0x0, 0xf4240, 0x1, 0x1, 0x0, 0x40000), at 0xff224fe0
  [6] ap_wait_or_timeout(0x11000, 0xffffffff, 0xffbf9a30, 0xa93e8, 0x7, 0xffbf99b4), at 0x4a9e8
  [7] server_main_loop(0x9e5cc, 0x3f, 0x0, 0x9d324, 0x1f, 0x20), at 0x6ba6c
  [8] ap_mpm_run(0x20, 0x9ea40, 0x9d320, 0x0, 0x20, 0x60), at 0x6c840
  [9] main(0x9bb98, 0x9cc00, 0x7c608, 0x9ce1c, 0x9cc00, 0x7c504), at 0x299dc

Help me out please.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>133094</commentid>
    <comment_count>1</comment_count>
    <who name="Nick Kew">nick</who>
    <bug_when>2009-12-23 09:27:16 +0000</bug_when>
    <thetext>Could this be Bug 48030?

Your dbx information is unhelpful: it just shows the parent process.  If it&apos;s not the same as PR 48030, you should try to diagnose the role of your third-party module.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>133105</commentid>
    <comment_count>2</comment_count>
    <who name="aurabhi">aurabhi</who>
    <bug_when>2009-12-23 18:59:21 +0000</bug_when>
    <thetext>Is there a way to get a dump from the child which exits due to the SEGV or a
way to force apache to dump core for every SEGV?

Any help would be really gr8. I am totally new to this field. 
Thank you!


(In reply to comment #1)
&gt; Could this be Bug 48030?
&gt; 
&gt; Your dbx information is unhelpful: it just shows the parent process.  If it&apos;s
&gt; not the same as PR 48030, you should try to diagnose the role of your
&gt; third-party module.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>133106</commentid>
    <comment_count>3</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2009-12-24 06:25:15 +0000</bug_when>
    <thetext>http://httpd.apache.org/docs/2.2/mod/mpm_common.html#coredumpdirectory
http://httpd.apache.org/dev/debugging.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>133143</commentid>
    <comment_count>4</comment_count>
    <who name="aurabhi">aurabhi</who>
    <bug_when>2009-12-28 02:51:30 +0000</bug_when>
    <thetext>I could get the stack using dbx of a particular thread which crashes. I see that apr_file_read throws the SEGV. 

The problem is the content from the file are read and request gets processed. I get response back on my client but I see this SEGV error always. At times I see that request times out. 

I tried using std file io instead of apr_file io. In which case I see an error in __fseek(); 


(dbx) cont
t@65 (l@65) signal SEGV (no mapping at the fault address) in apr_file_read at 0xff212fcc
0xff212fcc: apr_file_read+0x0020:       ld       [%i0 + 32], %g3
(dbx) where
current thread: t@65
=&gt;[1] apr_file_read(0xffffffff, 0x1c7c38, 0xfad7bb0c, 0x0, 0xbc6, 0x0), at 0xff212fcc
  [2] apr_file_read_full(0xffffffff, 0x1c7c38, 0xbc6, 0xfad7bb88, 0xfad7bb0c, 0x0), at 0xff211be4
  [3] my_input_filter(0x1ba8b0, 0x1bbc98, 0xbc7, 0x0, 0x1c7c38, 0x0), at 0xfeee46bc
  [4] ap_discard_request_body(0x1b2cf0, 0x4, 0x0, 0xc, 0x0, 0x0), at 0x60334
  [5] ap_finalize_request_protocol(0x1b2cf0, 0x1b2cf0, 0xfeee5ab4, 0x14, 0x1258e0, 0x1b2cf0), at 0x32e3c
  [6] my_handler(0xfffffffe, 0x4, 0x0, 0xc, 0x0, 0x0), at 0xfeee3a38
  [7] ap_run_handler(0x1b6050, 0x7, 0x126470, 0x9dc80, 0x12649c, 0x1), at 0x40dc4
  [8] ap_invoke_handler(0x1b6050, 0x0, 0x126544, 0x0, 0x1258e0, 0x0), at 0x413dc
  [9] ap_process_request(0x1b6050, 0x4, 0x0, 0x9cc00, 0x0, 0x1b6050), at 0x5d898
  [10] ap_process_http_connection(0x1ac2d8, 0x1b6050, 0xafde0, 0x9cd98, 0x80000000, 0x9cc00), at 0x5a418
  [11] ap_process_connection(0x1ac2d8, 0x1ac028, 0x1268b8, 0x0, 0x9e4a0, 0x9e400), at 0x490bc
  [12] worker_thread(0x129958, 0x3be, 0x1afff8, 0x1ac2d8, 0x9d340, 0x3e), at 0x6aad0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>133149</commentid>
    <comment_count>5</comment_count>
    <who name="Ruediger Pluem">rpluem</who>
    <bug_when>2009-12-28 06:50:51 +0000</bug_when>
    <thetext>(In reply to comment #4)
&gt; I could get the stack using dbx of a particular thread which crashes. I see
&gt; that apr_file_read throws the SEGV. 
&gt; 
&gt; The problem is the content from the file are read and request gets processed. I
&gt; get response back on my client but I see this SEGV error always. At times I see
&gt; that request times out. 
&gt; 
&gt; I tried using std file io instead of apr_file io. In which case I see an error
&gt; in __fseek(); 
&gt; 
&gt; 
&gt; (dbx) cont
&gt; t@65 (l@65) signal SEGV (no mapping at the fault address) in apr_file_read at
&gt; 0xff212fcc
&gt; 0xff212fcc: apr_file_read+0x0020:       ld       [%i0 + 32], %g3
&gt; (dbx) where
&gt; current thread: t@65
&gt; =&gt;[1] apr_file_read(0xffffffff, 0x1c7c38, 0xfad7bb0c, 0x0, 0xbc6, 0x0), at
&gt; 0xff212fcc
&gt;   [2] apr_file_read_full(0xffffffff, 0x1c7c38, 0xbc6, 0xfad7bb88, 0xfad7bb0c,
&gt; 0x0), at 0xff211be4
&gt;   [3] my_input_filter(0x1ba8b0, 0x1bbc98, 0xbc7, 0x0, 0x1c7c38, 0x0), at
&gt; 0xfeee46bc

This looks like a bug in my_input_filter in a way that it calls apr_file_read_full with invalid parameters. my_input_filter is no code from httpd. Please remove this filter and let us know if the segmentation fault goes away. If not please provide a stack trace without my_input_filter.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>133151</commentid>
    <comment_count>6</comment_count>
    <who name="aurabhi">aurabhi</who>
    <bug_when>2009-12-28 08:14:54 +0000</bug_when>
    <thetext>(In reply to comment #5)
&gt; (In reply to comment #4)
&gt; &gt; I could get the stack using dbx of a particular thread which crashes. I see
&gt; &gt; that apr_file_read throws the SEGV. 
&gt; &gt; 
&gt; &gt; The problem is the content from the file are read and request gets processed. I
&gt; &gt; get response back on my client but I see this SEGV error always. At times I see
&gt; &gt; that request times out. 
&gt; &gt; 
&gt; &gt; I tried using std file io instead of apr_file io. In which case I see an error
&gt; &gt; in __fseek(); 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; (dbx) cont
&gt; &gt; t@65 (l@65) signal SEGV (no mapping at the fault address) in apr_file_read at
&gt; &gt; 0xff212fcc
&gt; &gt; 0xff212fcc: apr_file_read+0x0020:       ld       [%i0 + 32], %g3
&gt; &gt; (dbx) where
&gt; &gt; current thread: t@65
&gt; &gt; =&gt;[1] apr_file_read(0xffffffff, 0x1c7c38, 0xfad7bb0c, 0x0, 0xbc6, 0x0), at
&gt; &gt; 0xff212fcc
&gt; &gt;   [2] apr_file_read_full(0xffffffff, 0x1c7c38, 0xbc6, 0xfad7bb88, 0xfad7bb0c,
&gt; &gt; 0x0), at 0xff211be4
&gt; &gt;   [3] my_input_filter(0x1ba8b0, 0x1bbc98, 0xbc7, 0x0, 0x1c7c38, 0x0), at
&gt; &gt; 0xfeee46bc
&gt; 
&gt; This looks like a bug in my_input_filter in a way that it calls
&gt; apr_file_read_full with invalid parameters. my_input_filter is no code from
&gt; httpd. Please remove this filter and let us know if the segmentation fault goes
&gt; away. If not please provide a stack trace without my_input_filter.

my_input_filter is a filter that I have added which modifies the BB. I can not take this filter away as this my application requires this to talk to a weblogic apache plugin. 

If the seg fault was where I do apr_file_read_full then request flow should fail at that point but whats happening is the requests complete and the response is sent back to the client. I can see all the debug messages that I have included in the debug log. I have handlers for each of the phases including the log_transaction phase and I see all the handlers being invoked and processed successfully. 

Has this got something to do with https://issues.apache.org/bugzilla/show_bug.cgi?id=48029?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>51552</bug_id>
          
          <creation_ts>2011-07-25 17:42:44 +0000</creation_ts>
          <short_desc>Apache is not starting (2.2.15)</short_desc>
          <delta_ts>2011-07-25 21:00:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.15</version>
          <rep_platform>Other</rep_platform>
          <op_sys>AIX</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Naveen">naverama</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>148134</commentid>
    <comment_count>0</comment_count>
    <who name="Naveen">naverama</who>
    <bug_when>2011-07-25 17:42:44 +0000</bug_when>
    <thetext># apachectl start
Could not load program /opt/pware/bin/httpd:
rtld: 0712-001 Symbol apr_hash_do was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol apr_file_datasync was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol apr_file_sync was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol apr_file_link was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol apr_global_mutex_name was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol apr_global_mutex_lockfile was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol apr_socket_atreadeof was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol apr_pollcb_create_ex was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol apr_pollset_method_name was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol apr_poll_method_defname was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol apr_pollset_wakeup was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol apr_pollset_create_ex was referenced
      from module httpd(), but a runtime definition
            of the symbol was not found.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>148135</commentid>
    <comment_count>1</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2011-07-25 17:48:53 +0000</bug_when>
    <thetext>How did you configure APR and httpd? What version of APR?  Is the same version of APR found at runtime [via bin/envvars or other shared lib environment variable?]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>148138</commentid>
    <comment_count>2</comment_count>
    <who name="Naveen">naverama</who>
    <bug_when>2011-07-25 17:52:08 +0000</bug_when>
    <thetext>APR version

 pware53.apr-util.rte       1.3.9.0  COMMITTED  Apache Portable Runtime
  pware53.apr.rte           1.3.12.0  COMMITTED  Apache Portable Runtime 1.3.12


I have downloaded the httpd-2.2.15 and then followed the process

 	$ ./configure 
     $ make
     $ make install
     $ PREFIX/bin/apachectl start</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>148141</commentid>
    <comment_count>3</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2011-07-25 18:38:30 +0000</bug_when>
    <thetext>None of those symbols are a part of apr 1.3.x AFAICT, so you probably built against the bundled APR or some other one that had headers installed.  Loading at runtime the older release installed with installp then fails.

The bundled APR should have been built/installed alongside your httpd.  Does your bin/envvars -- is it there and identified with LIBPATH in bin/envvars?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>148143</commentid>
    <comment_count>4</comment_count>
    <who name="Naveen">naverama</who>
    <bug_when>2011-07-25 18:41:06 +0000</bug_when>
    <thetext>found apr source: srclib/apr
found apr-util source: srclib/apr-util
rebuilding srclib/apr/configure
buildconf: checking installation...
buildconf: python not found.
           You need python installed
           to build APR from SVN.
./buildconf failed for apr</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>148144</commentid>
    <comment_count>5</comment_count>
    <who name="Naveen">naverama</who>
    <bug_when>2011-07-25 18:52:20 +0000</bug_when>
    <thetext>PATH=/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/opt/pware/bin
TZ=PST8PDT
LANG=C
LOCPATH=/usr/lib/nls/loc
NLSPATH=/usr/lib/nls/msg/%L/%N:/usr/lib/nls/msg/%L/%N.cat
LC__FASTMSG=true</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>148149</commentid>
    <comment_count>6</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2011-07-25 21:00:40 +0000</bug_when>
    <thetext>bin/envvars is a file of environment variables sourced by apachectl.  What APR version does the LIBPATH in that file point to?  What APR did your httpd build build against (config.log or stdout messages)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>54919</bug_id>
          
          <creation_ts>2013-05-02 08:49:13 +0000</creation_ts>
          <short_desc>*** glibc detected *** /usr/sbin/httpd: double free or corruption (!prev): 0x00002b797adf8bc0 ***</short_desc>
          <delta_ts>2013-05-05 18:24:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.23</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Manas Ranjan Panda">manas.panda</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>166996</commentid>
    <comment_count>0</comment_count>
    <who name="Manas Ranjan Panda">manas.panda</who>
    <bug_when>2013-05-02 08:49:13 +0000</bug_when>
    <thetext>*** glibc detected *** /usr/sbin/httpd: double free or corruption (!prev): 0x00002b797adf8bc0 ***
======= Backtrace: =========
/lib64/libc.so.6[0x2b792f6ff1df]
/lib64/libc.so.6(cfree+0x4b)[0x2b792f6ff63b]
/usr/lib64/libapr-1.so.0(apr_allocator_destroy+0x1b)[0x2b792f05c7fb]
/usr/sbin/httpd[0x2b792dbe051e]
/usr/sbin/httpd[0x2b792dbe054b]
/lib64/libpthread.so.0[0x2b792f27cbe0]
/lib64/libpthread.so.0(__nanosleep+0x41)[0x2b792f27c291]
/usr/lib64/php/modules/newrelic.so[0x2b793862632d]
/lib64/libpthread.so.0[0x2b792f27477d]
/lib64/libc.so.6(clone+0x6d)[0x2b792f761c1d]
======= Memory map: ========
41e9d000-41e9e000 ---p 41e9d000 00:00 0
41e9e000-4289e000 rw-p 41e9e000 00:00 0
2aaaaaaab000-2aaaaadab000 rw-p 2aaaaaaab000 00:00 0
2aaaaadad000-2aaaab3ad000 rw-p 2aaaaadad000 00:00 0
2aaaab3b4000-2aaaab7b4000 rw-p 2aaaab3b4000 00:00 0
2aaaab7b4000-2aaaab7bb000 r--s 00000000 68:05 22216960                   /usr/lib64/gconv/gconv-modules.cache
2aaaab7bb000-2aaaac4bb000 rw-p 2aaaab7bb000 00:00 0
2aaaac4bb000-2aaaac4bc000 r-xp 00000000 68:05 22216900                   /usr/lib64/gconv/ISO8859-1.so
2aaaac4bc000-2aaaac6bc000 ---p 00001000 68:05 22216900                   /usr/lib64/gconv/ISO8859-1.so
2aaaac6bc000-2aaaac6be000 rw-p 00001000 68:05 22216900                   /usr/lib64/gconv/ISO8859-1.so
2aaaac6be000-2aaaae580000 rw-p 2aaaac6be000 00:00 0
2aaaae5c1000-2aaaaede6000 rw-p 2aaaae5c1000 00:00 0
2aaaaf0c7000-2aaaafd4b000 rw-p 2aaaaf0c7000 00:00 0
2aaab0000000-2aaab3fef000 rw-p 2aaab0000000 00:00 0
2aaab3fef000-2aaab4000000 ---p 2aaab3fef000 00:00 0
2aaab4018000-2aaab401c000 r-xp 00000000 68:03 19234838                   /lib64/libnss_dns-2.5.so
2aaab401c000-2aaab421b000 ---p 00004000 68:03 19234838                   /lib64/libnss_dns-2.5.so
2aaab421b000-2aaab421c000 r--p 00003000 68:03 19234838                   /lib64/libnss_dns-2.5.so
2aaab421c000-2aaab421d000 rw-p 00004000 68:03 19234838                   /lib64/libnss_dns-2.5.so
2aaab421d000-2aaaba3e1000 rw-p 2aaab421d000 00:00 0
2aaaba3f9000-2aaaba406000 r-xp 00000000 68:03 19235133                   /lib64/libgcc_s-4.1.2-20080825.so.1
2aaaba406000-2aaaba606000 ---p 0000d000 68:03 19235133                   /lib64/libgcc_s-4.1.2-20080825.so.1
2aaaba606000-2aaaba607000 rw-p 0000d000 68:03 19235133                   /lib64/libgcc_s-4.1.2-20080825.so.1
2b792dba3000-2b792dbf3000 r-xp 00000000 68:05 11993117                   /usr/sbin/httpd
2b792dc34000-2b792dc83000 rw-p 2b792dc34000 00:00 0
2b792dc83000-2b792dd01000 rw-s 00000000 00:09 421887230                  /dev/zero (deleted)
2b792dd01000-2b792dd05000 rw-s 00000000 00:09 421887232                  /dev/zero (deleted)
2b792ddf3000-2b792ddf7000 rw-p 00050000 68:05 11993117                   /usr/sbin/httpd
2b792ddf7000-2b792ddfa000 rw-p 2b792ddf7000 00:00 0
2b792ddfa000-2b792de16000 r-xp 00000000 68:03 19234993                   /lib64/ld-2.5.so
2b792de16000-2b792de18000 rw-p 2b792de16000 00:00 0
2b792e016000-2b792e017000 r--p 0001c000 68:03 19234993                   /lib64/ld-2.5.so
2b792e017000-2b792e018000 rw-p 0001d000 68:03 19234993                   /lib64/ld-2.5.so
2b792e018000-2b792e09a000 r-xp 00000000 68:03 19235132                   /lib64/libm-2.5.so
2b792e09a000-2b792e299000 ---p 00082000 68:03 19235132                   /lib64/libm-2.5.so
2b792e299000-2b792e29a000 r--p 00081000 68:03 19235132                   /lib64/libm-2.5.so
2b792e29a000-2b792e29b000 rw-p 00082000 68:03 19235132                   /lib64/libm-2.5.so
2b792e29b000-2b792e2b9000 r-xp 00000000 68:03 19235009                   /lib64/libpcre.so.0.0.1
2b792e2b9000-2b792e4b9000 ---p 0001e000 68:03 19235009                   /lib64/libpcre.so.0.0.1
2b792e4b9000-2b792e4ba000 rw-p 0001e000 68:03 19235009                   /lib64/libpcre.so.0.0.1
2b792e4ba000-2b792e4cf000 r-xp 00000000 68:03 19235117                   /lib64/libselinux.so.1
2b792e4cf000-2b792e6cf000 ---p 00015000 68:03 19235117                   /lib64/libselinux.so.1
2b792e6cf000-2b792e6d1000 rw-p 00015000 68:03 19235117                   /lib64/libselinux.so.1
2b792e6d1000-2b792e6d3000 rw-p 2b792e6d1000 00:00 0
2b792e6d3000-2b792e6f4000 r-xp 00000000 68:05 22217021                   /usr/lib64/libaprutil-1.so.0.4.1
2b792e6f4000-2b792e8f3000 ---p 00021000 68:05 22217021                   /usr/lib64/libaprutil-1.so.0.4.1
2b792e8f3000-2b792e8f5000 rw-p 00020000 68:05 22217021                   /usr/lib64/libaprutil-1.so.0.4.1
2b792e8f5000-2b792e9e6000 r-xp 00000000 68:03 19234877                   /lib64/libdb-4.3.so
2b792e9e6000-2b792ebe6000 ---p 000f1000 68:03 19234877                   /lib64/libdb-4.3.so
2b792ebe6000-2b792ebeb000 rw-p 000f1000 68:03 19234877                   /lib64/libdb-4.3.so
2b792ebeb000-2b792ebf4000 r-xp 00000000 68:03 19235136                   /lib64/libcrypt-2.5.so
2b792ebf4000-2b792edf3000 ---p 00009000 68:03 19235136                   /lib64/libcrypt-2.5.so
2b792edf3000-2b792edf4000 r--p 00008000 68:03 19235136                   /lib64/libcrypt-2.5.so
2b792edf4000-2b792edf5000 rw-p 00009000 68:03 19235136                   /lib64/libcrypt-2.5.so
2b792edf5000-2b792ee24000 rw-p 2b792edf5000 00:00 0
2b792ee24000-2b792ee45000 r-xp 00000000 68:03 19235146                   /lib64/libexpat.so.0.5.0
2b792ee45000-2b792f044000 ---p 00021000 68:03 19235146                   /lib64/libexpat.so.0.5.0
2b792f044000-2b792f047000 rw-p 00020000 68:03 19235146                   /lib64/libexpat.so.0.5.0
2b792f047000-2b792f06d000 r-xp 00000000 68:05 22217047                   /usr/lib64/libapr-1.so.0.2.7
2b792f06d000-2b792f26d000 ---p 00026000 68:05 22217047                   /usr/lib64/libapr-1.so.0.2.7
2b792f26d000-2b792f26e000 rw-p 00026000 68:05 22217047                   /usr/lib64/libapr-1.so.0.2.7
2b792f26e000-2b792f284000 r-xp 00000000 68:03 19235053                   /lib64/libpthread-2.5.so
2b792f284000-2b792f483000 ---p 00016000 68:03 19235053                   /lib64/libpthread-2.5.so
2b792f483000-2b792f484000 r--p 00015000 68:03 19235053                   /lib64/libpthread-2.5.so
2b792f484000-2b792f485000 rw-p 00016000 68:03 19235053                   /lib64/libpthread-2.5.so
2b792f485000-2b792f48a000 rw-p 2b792f485000 00:00 0
2b792f48a000-2b792f48c000 r-xp 00000000 68:03 19235073                   /lib64/libdl-2.5.so
2b792f48c000-2b792f68c000 ---p 00002000 68:03 19235073                   /lib64/libdl-2.5.so
2b792f68c000-2b792f68d000 r--p 00002000 68:03 19235073                   /lib64/libdl-2.5.so
2b792f68d000-2b792f68e000 rw-p 00003000 68:03 19235073                   /lib64/libdl-2.5.so
2b792f68e000-2b792f7dc000 r-xp 00000000 68:03 19235030                   /lib64/libc-2.5.so
2b792f7dc000-2b792f9db000 ---p 0014e000 68:03 19235030                   /lib64/libc-2.5.so
2b792f9db000-2b792f9df000 r--p 0014d000 68:03 19235030                   /lib64/libc-2.5.so
2b792f9df000-2b792f9e0000 rw-p 00151000 68:03 19235030                   /lib64/libc-2.5.so
2b792f9e0000-2b792f9e5000 rw-p 2b792f9e0000 00:00 0
2b792f9e5000-2b792fa1e000 r-xp 00000000 68:03 19235100                   /lib64/libsepol.so.1
2b792fa1e000-2b792fc1e000 ---p 00039000 68:03 19235100                   /lib64/libsepol.so.1
2b792fc1e000-2b792fc1f000 rw-p 00039000 68:03 19235100                   /lib64/libsepol.so.1
2b792fc1f000-2b792fc20000 rw-p 2b792fc1f000 00:00 0
2b792fc20000-2b792fc24000 r-xp 00000000 68:03 19235147                   /lib64/libuuid.so.1.2
2b792fc24000-2b792fe23000 ---p 00004000 68:03 19235147                   /lib64/libuuid.so.1.2
2b792fe23000-2b792fe24000 rw-p 00003000 68:03 19235147                   /lib64/libuuid.so.1.2
2b792fe24000-2b792fe26000 rw-p 2b792fe24000 00:00 0
2b792fe26000-2b792fe28000 r-xp 00000000 68:05 22348892                   /usr/lib64/httpd/modules/mod_authz_host.so
2b792fe28000-2b7930027000 ---p 00002000 68:05 22348892                   /usr/lib64/httpd/modules/mod_authz_host.so
2b7930027000-2b7930029000 rw-p 00001000 68:05 22348892                   /usr/lib64/httpd/modules/mod_authz_host.so
2b7930029000-2b793002e000 r-xp 00000000 68:05 22348918                   /usr/lib64/httpd/modules/mod_log_config.so
2b793002e000-2b793022d000 ---p 00005000 68:05 22348918                   /usr/lib64/httpd/modules/mod_log_config.so
2b793022d000-2b793022f000 rw-p 00004000 68:05 22348918                   /usr/lib64/httpd/modules/mod_log_config.so
2b793022f000-2b7930231000 r-xp 00000000 68:05 22348908                   /usr/lib64/httpd/modules/mod_expires.so
2b7930231000-2b7930430000 ---p 00002000 68:05 22348908                   /usr/lib64/httpd/modules/mod_expires.so
2b7930430000-2b7930432000 rw-p 00001000 68:05 22348908                   /usr/lib64/httpd/modules/mod_expires.so
2b7930432000-2b7930437000 r-xp 00000000 68:05 22348903                   /usr/lib64/httpd/modules/mod_deflate.so
2b7930437000-2b7930636000 ---p 00005000 68:05 22348903                   /usr/lib64/httpd/modules/mod_deflate.so
2b7930636000-2b7930638000 rw-p 00004000 68:05 22348903                   /usr/lib64/httpd/modules/mod_deflate.so
2b7930650000-2b7930664000 r-xp 00000000 68:03 19235078                   /lib64/libz.so.1.2.3
2b7930664000-2b7930863000 ---p 00014000 68:03 19235078                   /lib64/libz.so.1.2.3
2b7930863000-2b7930864000 rw-p 00013000 68:03 19235078                   /lib64/libz.so.1.2.3
2b7930864000-2b7930866000 r-xp 00000000 68:05 22349367                   /usr/lib64/httpd/modules/mod_setenvif.so
2b7930866000-2b7930a66000 ---p 00002000 68:05 22349367                   /usr/lib64/httpd/modules/mod_setenvif.so
2b7930a66000-2b7930a68000 rw-p 00002000 68:05 22349367                   /usr/lib64/httpd/modules/mod_setenvif.so
2b7930a68000-2b7930a6c000 r-xp 00000000 68:05 22348922                   /usr/lib64/httpd/modules/mod_mime.so
2b7930a6c000-2b7930c6b000 ---p 00004000 68:05 22348922                   /usr/lib64/httpd/modules/mod_mime.so
2b7930c6b000-2b7930c6d000 rw-p 00003000 68:05 22348922                   /usr/lib64/httpd/modules/mod_mime.so
2b7930c6d000-2b7930c71000 r-xp 00000000 68:05 22349103                   /usr/lib64/httpd/modules/mod_status.so
2b7930c71000-2b7930e70000 ---p 00004000 68:05 22349103                   /usr/lib64/httpd/modules/mod_status.so
2b7930e70000-2b7930e72000 rw-p 00003000 68:05 22349103                   /usr/lib64/httpd/modules/mod_status.so
2b7930e72000-2b7930e74000 r-xp 00000000 68:05 22349361                   /usr/lib64/httpd/modules/mod_dir.so
2b7930e74000-2b7931073000 ---p 00002000 68:05 22349361                   /usr/lib64/httpd/modules/mod_dir.so
2b7931073000-2b7931075000 rw-p 00001000 68:05 22349361                   /usr/lib64/httpd/modules/mod_dir.so
2b7931075000-2b7931078000 r-xp 00000000 68:05 22349056                   /usr/lib64/httpd/modules/mod_alias.so
2b7931078000-2b7931277000 ---p 00003000 68:05 22349056                   /usr/lib64/httpd/modules/mod_alias.so
2b7931277000-2b7931279000 rw-p 00002000 68:05 22349056                   /usr/lib64/httpd/modules/mod_alias.so
2b7931279000-2b7931287000 r-xp 00000000 68:05 22348932                   /usr/lib64/httpd/modules/mod_rewrite.so
2b7931287000-2b7931486000 ---p 0000e000 68:05 22348932                   /usr/lib64/httpd/modules/mod_rewrite.so
2b7931486000-2b7931488000 rw-p 0000d000 68:05 22348932                   /usr/lib64/httpd/modules/mod_rewrite.so
2b7931488000-2b793148d000 r-xp 00000000 68:05 22348898                   /usr/lib64/httpd/modules/mod_cgi.so
2b793148d000-2b793168d000 ---p 00005000 68:05 22348898                   /usr/lib64/httpd/modules/mod_cgi.so
2b793168d000-2b793168f000 rw-p 00005000 68:05 22348898                   /usr/lib64/httpd/modules/mod_cgi.so
2b793168f000-2b79319de000 r-xp 00000000 68:05 24936449                   /usr/lib64/httpd/modules/libphp5.so
2b79319de000-2b7931bdd000 ---p 0034f000 68:05 24936449                   /usr/lib64/httpd/modules/libphp5.so
2b7931bdd000-2b7931c33000 rw-p 0034e000 68:05 24936449                   /usr/lib64/httpd/modules/libphp5.so
2b7931c33000-2b7931c4d000 rw-p 2b7931c33000 00:00 0
2b7931c65000-2b7931c9d000 r-xp 00000000 68:05 22217410                   /usr/lib64/libgmp.so.3.3.3
2b7931c9d000-2b7931e9d000 ---p 00038000 68:05 22217410                   /usr/lib64/libgmp.so.3.3.3
2b7931e9d000-2b7931e9e000 rw-p 00038000 68:05 22217410                   /usr/lib64/libgmp.so.3.3.3
2b7931e9e000-2b7931ead000 r-xp 00000000 68:05 22217556                   /usr/lib64/libbz2.so.1.0.3
2b7931ead000-2b79320ac000 ---p 0000f000 68:05 22217556                   /usr/lib64/libbz2.so.1.0.3
2b79320ac000-2b79320ae000 rw-p 0000e000 68:05 22217556                   /usr/lib64/libbz2.so.1.0.3
2b79320ae000-2b79320b5000 r-xp 00000000 68:03 19234893                   /lib64/librt-2.5.so
2b79320b5000-2b79322b5000 ---p 00007000 68:03 19234893                   /lib64/librt-2.5.so
2b79322b5000-2b79322b6000 r--p 00007000 68:03 19234893                   /lib64/librt-2.5.so
2b79322b6000-2b79322b7000 rw-p 00008000 68:03 19234893                   /lib64/librt-2.5.so
2b79322b7000-2b79322cc000 r-xp 00000000 68:03 19235072                   /lib64/libnsl-2.5.so
2b79322cc000-2b79324cb000 ---p 00015000 68:03 19235072                   /lib64/libnsl-2.5.so
2b79324cb000-2b79324cc000 r--p 00014000 68:03 19235072                   /lib64/libnsl-2.5.so
2b79324cc000-2b79324cd000 rw-p 00015000 68:03 19235072                   /lib64/libnsl-2.5.so
2b79324cd000-2b79324cf000 rw-p 2b79324cd000 00:00 0
2b79324cf000-2b7932602000 r-xp 00000000 68:05 22217429                   /usr/lib64/libxml2.so.2.6.26
2b7932602000-2b7932802000 ---p 00133000 68:05 22217429                   /usr/lib64/libxml2.so.2.6.26
2b7932802000-2b793280b000 rw-p 00133000 68:05 22217429                   /usr/lib64/libxml2.so.2.6.26
2b793280b000-2b793280c000 rw-p 2b793280b000 00:00 0
2b793280c000-2b7932838000 r-xp 00000000 68:05 22217539                   /usr/lib64/libgssapi_krb5.so.2.2
2b7932838000-2b7932a38000 ---p 0002c000 68:05 22217539                   /usr/lib64/libgssapi_krb5.so.2.2
2b7932a38000-2b7932a3a000 rw-p 0002c000 68:05 22217539                   /usr/lib64/libgssapi_krb5.so.2.2
2b7932a3a000-2b7932acb000 r-xp 00000000 68:05 22217535                   /usr/lib64/libkrb5.so.3.3
2b7932acb000-2b7932ccb000 ---p 00091000 68:05 22217535                   /usr/lib64/libkrb5.so.3.3
2b7932ccb000-2b7932ccf000 rw-p 00091000 68:05 22217535                   /usr/lib64/libkrb5.so.3.3
2b7932ccf000-2b7932cf3000 r-xp 00000000 68:05 22217534                   /usr/lib64/libk5crypto.so.3.1
2b7932cf3000-2b7932ef2000 ---p 00024000 68:05 22217534                   /usr/lib64/libk5crypto.so.3.1
2b7932ef2000-2b7932ef4000 rw-p 00023000 68:05 22217534                   /usr/lib64/libk5crypto.so.3.1
2b7932ef4000-2b7932ef6000 r-xp 00000000 68:03 19235129                   /lib64/libcom_err.so.2.1
2b7932ef6000-2b79330f5000 ---p 00002000 68:03 19235129                   /lib64/libcom_err.so.2.1
2b79330f5000-2b79330f6000 rw-p 00001000 68:03 19235129                   /lib64/libcom_err.so.2.1
2b79330f6000-2b793313c000 r-xp 00000000 68:03 19235131                   /lib64/libssl.so.0.9.8e
2b793313c000-2b793333c000 ---p 00046000 68:03 19235131                   /lib64/libssl.so.0.9.8e
2b793333c000-2b7933342000 rw-p 00046000 68:03 19235131                   /lib64/libssl.so.0.9.8e
2b7933342000-2b793346f000 r-xp 00000000 68:03 19235130                   /lib64/libcrypto.so.0.9.8e
2b793346f000-2b793366e000 ---p 0012d000 68:03 19235130                   /lib64/libcrypto.so.0.9.8e
2b793366e000-2b793368f000 rw-p 0012c000 68:03 19235130                   /lib64/libcrypto.so.0.9.8e
2b793368f000-2b7933693000 rw-p 2b793368f000 00:00 0
2b7933693000-2b793369b000 r-xp 00000000 68:05 22217513                   /usr/lib64/libkrb5support.so.0.1
2b793369b000-2b793389a000 ---p 00008000 68:05 22217513                   /usr/lib64/libkrb5support.so.0.1
2b793389a000-2b793389b000 rw-p 00007000 68:05 22217513                   /usr/lib64/libkrb5support.so.0.1
2b793389b000-2b793389d000 r-xp 00000000 68:03 19235085                   /lib64/libkeyutils-1.2.so
2b793389d000-2b7933a9c000 ---p 00002000 68:03 19235085                   /lib64/libkeyutils-1.2.so
2b7933a9c000-2b7933a9d000 rw-p 00001000 68:03 19235085                   /lib64/libkeyutils-1.2.so
2b7933a9d000-2b7933aae000 r-xp 00000000 68:03 19235092                   /lib64/libresolv-2.5.so
2b7933aae000-2b7933cae000 ---p 00011000 68:03 19235092                   /lib64/libresolv-2.5.so
2b7933cae000-2b7933caf000 r--p 00011000 68:03 19235092                   /lib64/libresolv-2.5.so
2b7933caf000-2b7933cb0000 rw-p 00012000 68:03 19235092                   /lib64/libresolv-2.5.so
2b7933cb0000-2b7933cb2000 rw-p 2b7933cb0000 00:00 0
2b7933cb2000-2b7933cda000 r-xp 00000000 68:05 22349033                   /usr/lib64/httpd/modules/mod_ssl.so
2b7933cda000-2b7933eda000 ---p 00028000 68:05 22349033                   /usr/lib64/httpd/modules/mod_ssl.so
2b7933eda000-2b7933edc000 rw-p 00028000 68:05 22349033                   /usr/lib64/httpd/modules/mod_ssl.so
2b7933edc000-2b7933ede000 rw-p 2b7933edc000 00:00 0
2b7933ef6000-2b7933efa000 r-xp 00000000 68:05 22217032                   /usr/lib64/libdistcache.so.1.0.1
2b7933efa000-2b79340f9000 ---p 00004000 68:05 22217032                   /usr/lib64/libdistcache.so.1.0.1
2b79340f9000-2b79340fa000 rw-p 00003000 68:05 22217032                   /usr/lib64/libdistcache.so.1.0.1
2b79340fa000-2b7934102000 r-xp 00000000 68:05 22217001                   /usr/lib64/libnal.so.1.0.1
2b7934102000-2b7934302000 ---p 00008000 68:05 22217001                   /usr/lib64/libnal.so.1.0.1
2b7934302000-2b7934303000 rw-p 00008000 68:05 22217001                   /usr/lib64/libnal.so.1.0.1
2b7934303000-2b793430d000 r-xp 00000000 68:03 19234840                   /lib64/libnss_files-2.5.so
2b793430d000-2b793450c000 ---p 0000a000 68:03 19234840                   /lib64/libnss_files-2.5.so
2b793450c000-2b793450d000 r--p 00009000 68:03 19234840                   /lib64/libnss_files-2.5.so
2b793450d000-2b793450e000 rw-p 0000a000 68:03 19234840                   /lib64/libnss_files-2.5.so
2b793450e000-2b793452e000 r-xp 00000000 68:05 22250041                   /usr/lib64/php/modules/apc.so
2b793452e000-2b793472e000 ---p 00020000 68:05 22250041                   /usr/lib64/php/modules/apc.so
2b793472e000-2b7934731000 rw-p 00020000 68:05 22250041                   /usr/lib64/php/modules/apc.so
2b7934731000-2b793473a000 rw-p 2b7934731000 00:00 0
2b793473a000-2b7934749000 r-xp 00000000 68:05 5373955                    /usr/lib64/php/modules/curl.so
2b7934749000-2b7934948000 ---p 0000f000 68:05 5373955                    /usr/lib64/php/modules/curl.so
2b7934948000-2b793494a000 rw-p 0000e000 68:05 5373955                    /usr/lib64/php/modules/curl.so
2b7934962000-2b793499d000 r-xp 00000000 68:05 22218438                   /usr/lib64/libcurl.so.3.0.0
2b793499d000-2b7934b9d000 ---p 0003b000 68:05 22218438                   /usr/lib64/libcurl.so.3.0.0
2b7934b9d000-2b7934b9f000 rw-p 0003b000 68:05 22218438                   /usr/lib64/libcurl.so.3.0.0
2b7934b9f000-2b7934bd0000 r-xp 00000000 68:05 22218303                   /usr/lib64/libidn.so.11.5.19
2b7934bd0000-2b7934dcf000 ---p 00031000 68:05 22218303                   /usr/lib64/libidn.so.11.5.19
2b7934dcf000-2b7934dd0000 rw-p 00030000 68:05 22218303                   /usr/lib64/libidn.so.11.5.19
2b7934dd0000-2b7934df4000 r-xp 00000000 68:05 22250035                   /usr/lib64/php/modules/dom.so
2b7934df4000-2b7934ff3000 ---p 00024000 68:05 22250035                   /usr/lib64/php/modules/dom.so
2b7934ff3000-2b7934ff9000 rw-p 00023000 68:05 22250035                   /usr/lib64/php/modules/dom.so
2b7934ff9000-2b793523b000 r-xp 00000000 68:05 5373956                    /usr/lib64/php/modules/fileinfo.so
2b793523b000-2b793543a000 ---p 00242000 68:05 5373956                    /usr/lib64/php/modules/fileinfo.so
2b793543a000-2b793543b000 rw-p 00241000 68:05 5373956                    /usr/lib64/php/modules/fileinfo.so
2b793543b000-2b793543c000 rw-p 2b793543b000 00:00 0
2b793543c000-2b7935484000 r-xp 00000000 68:05 22250040                   /usr/lib64/php/modules/gd.so
2b7935484000-2b7935684000 ---p 00048000 68:05 22250040                   /usr/lib64/php/modules/gd.so
2b7935684000-2b793568a000 rw-p 00048000 68:05 22250040                   /usr/lib64/php/modules/gd.so
2b793568a000-2b793568e000 rw-p 2b793568a000 00:00 0
2b79356a6000-2b7935725000 r-xp 00000000 68:05 22217925                   /usr/lib64/libfreetype.so.6.3.10
2b7935725000-2b7935925000 ---p 0007f000 68:05 22217925                   /usr/lib64/libfreetype.so.6.3.10
2b7935925000-2b793592a000 rw-p 0007f000 68:05 22217925                   /usr/lib64/libfreetype.so.6.3.10
2b793592a000-2b7935a2f000 r-xp 00000000 68:05 22217374                   /usr/lib64/libX11.so.6.2.0
2b7935a2f000-2b7935c2f000 ---p 00105000 68:05 22217374                   /usr/lib64/libX11.so.6.2.0
2b7935c2f000-2b7935c36000 rw-p 00105000 68:05 22217374                   /usr/lib64/libX11.so.6.2.0
2b7935c36000-2b7935c46000 r-xp 00000000 68:05 22218371                   /usr/lib64/libXpm.so.4.11.0
2b7935c46000-2b7935e46000 ---p 00010000 68:05 22218371                   /usr/lib64/libXpm.so.4.11.0
2b7935e46000-2b7935e47000 rw-p 00010000 68:05 22218371                   /usr/lib64/libXpm.so.4.11.0
2b7935e47000-2b7935e6a000 r-xp 00000000 68:05 22217970                   /usr/lib64/libpng12.so.0.10.0
2b7935e6a000-2b793606a000 ---p 00023000 68:05 22217970                   /usr/lib64/libpng12.so.0.10.0
2b793606a000-2b793606b000 rw-p 00023000 68:05 22217970                   /usr/lib64/libpng12.so.0.10.0
2b793606b000-2b793608c000 r-xp 00000000 68:05 22217066                   /usr/lib64/libjpeg.so.62.0.0
2b793608c000-2b793628b000 ---p 00021000 68:05 22217066                   /usr/lib64/libjpeg.so.62.0.0
2b793628b000-2b793628c000 rw-p 00020000 68:05 22217066                   /usr/lib64/libjpeg.so.62.0.0
2b793628c000-2b793628e000 r-xp 00000000 68:05 22216967                   /usr/lib64/libXau.so.6.0.0
2b793628e000-2b793648d000 ---p 00002000 68:05 22216967                   /usr/lib64/libXau.so.6.0.0
2b793648d000-2b793648e000 rw-p 00001000 68:05 22216967                   /usr/lib64/libXau.so.6.0.0
2b793648e000-2b7936493000 r-xp 00000000 68:05 22217352                   /usr/lib64/libXdmcp.so.6.0.0
2b7936493000-2b7936692000 ---p 00005000 68:05 22217352                   /usr/lib64/libXdmcp.so.6.0.0
2b7936692000-2b7936693000 rw-p 00004000 68:05 22217352                   /usr/lib64/libXdmcp.so.6.0.0
2b7936693000-2b79366a8000 r-xp 00000000 68:05 5373962                    /usr/lib64/php/modules/imap.so
2b79366a8000-2b79368a7000 ---p 00015000 68:05 5373962                    /usr/lib64/php/modules/imap.so
2b79368a7000-2b79368ab000 rw-p 00014000 68:05 5373962                    /usr/lib64/php/modules/imap.so
2b79368c3000-2b7936991000 r-xp 00000000 68:05 22217417                   /usr/lib64/libc-client.so.1
2b7936991000-2b7936b90000 ---p 000ce000 68:05 22217417                   /usr/lib64/libc-client.so.1
2b7936b90000-2b7936b96000 rw-p 000cd000 68:05 22217417                   /usr/lib64/libc-client.so.1
2b7936b96000-2b7936b97000 rw-p 2b7936b96000 00:00 0
2b7936b97000-2b7936ba2000 r-xp 00000000 68:03 19235139                   /lib64/libpam.so.0.81.5
2b7936ba2000-2b7936da1000 ---p 0000b000 68:03 19235139                   /lib64/libpam.so.0.81.5
2b7936da1000-2b7936da2000 rw-p 0000a000 68:03 19235139                   /lib64/libpam.so.0.81.5
2b7936da2000-2b7936db9000 r-xp 00000000 68:03 19235138                   /lib64/libaudit.so.0.0.0
2b7936db9000-2b7936fb8000 ---p 00017000 68:03 19235138                   /lib64/libaudit.so.0.0.0
2b7936fb8000-2b7936fba000 rw-p 00016000 68:03 19235138                   /lib64/libaudit.so.0.0.0
2b7936fba000-2b7936fc2000 r-xp 00000000 68:05 5373957                    /usr/lib64/php/modules/json.so
2b7936fc2000-2b79371c1000 ---p 00008000 68:05 5373957                    /usr/lib64/php/modules/json.so
2b79371c1000-2b79371c2000 rw-p 00007000 68:05 5373957                    /usr/lib64/php/modules/json.so
2b79371c2000-2b79373c3000 r-xp 00000000 68:05 22250032                   /usr/lib64/php/modules/mbstring.so
2b79373c3000-2b79375c2000 ---p 00201000 68:05 22250032                   /usr/lib64/php/modules/mbstring.so
2b79375c2000-2b79375ce000 rw-p 00200000 68:05 22250032                   /usr/lib64/php/modules/mbstring.so
2b79375ce000-2b79375d7000 r-xp 00000000 68:05 22250034                   /usr/lib64/php/modules/mcrypt.so
2b79375d7000-2b79377d6000 ---p 00009000 68:05 22250034                   /usr/lib64/php/modules/mcrypt.so
2b79377d6000-2b79377d8000 rw-p 00008000 68:05 22250034                   /usr/lib64/php/modules/mcrypt.so
2b79377f0000-2b7937819000 r-xp 00000000 68:05 22218526                   /usr/lib64/libmcrypt.so.4.4.8
2b7937819000-2b7937a18000 ---p 00029000 68:05 22218526                   /usr/lib64/libmcrypt.so.4.4.8
2b7937a18000-2b7937a1b000 rw-p 00028000 68:05 22218526                   /usr/lib64/libmcrypt.so.4.4.8
2b7937a1b000-2b7937a21000 rw-p 2b7937a1b000 00:00 0
2b7937a21000-2b7937a27000 r-xp 00000000 68:05 22217414                   /usr/lib64/libltdl.so.3.1.4
2b7937a27000-2b7937c27000 ---p 00006000 68:05 22217414                   /usr/lib64/libltdl.so.3.1.4
2b7937c27000-2b7937c28000 rw-p 00006000 68:05 22217414                   /usr/lib64/libltdl.so.3.1.4
2b7937c28000-2b7937c3e000 r-xp 00000000 68:05 22249882                   /usr/lib64/php/modules/memcache.so
2b7937c3e000-2b7937e3d000 ---p 00016000 68:05 22249882                   /usr/lib64/php/modules/memcache.so
2b7937e3d000-2b7937e3f000 rw-p 00015000 68:05 22249882                   /usr/lib64/php/modules/memcache.so
2b7937e3f000-2b7937e4a000 r-xp 00000000 68:05 22249670                   /usr/lib64/php/modules/mysql.so
2b7937e4a000-2b793804a000 ---p 0000b000 68:05 22249670                   /usr/lib64/php/modules/mysql.so
2b793804a000-2b793804c000 rw-p 0000b000 68:05 22249670                   /usr/lib64/php/modules/mysql.so
2b7938064000-2b793818e000 r-xp 00000000 68:05 22315195                   /usr/lib64/mysql/libmysqlclient.so.15.0.0
2b793818e000-2b793838e000 ---p 0012a000 68:05 22315195                   /usr/lib64/mysql/libmysqlclient.so.15.0.0
2b793838e000-2b79383d5000 rw-p 0012a000 68:05 22315195                   /usr/lib64/mysql/libmysqlclient.so.15.0.0
2b79383d5000-2b79383d6000 rw-p 2b79383d5000 00:00 0
2b79383d6000-2b79383f1000 r-xp 00000000 68:05 22249886                   /usr/lib64/php/modules/mysqli.so
2b79383f1000-2b79385f1000 ---p 0001b000 68:05 22249886                   /usr/lib64/php/modules/mysqli.so
2b79385f1000-2b79385f6000 rw-p 0001b000 68:05 22249886                   /usr/lib64/php/modules/mysqli.so
2b79385f6000-2b79385f7000 rw-p 2b79385f6000 00:00 0
2b79385f7000-2b793865d000 r-xp 00000000 68:05 22349046                   /usr/lib64/newrelic-php5/agent/x64/newrelic-20090626.so
2b793865d000-2b793885d000 ---p 00066000 68:05 22349046                   /usr/lib64/newrelic-php5/agent/x64/newrelic-20090626.so
2b793885d000-2b7938864000 rw-p 00066000 68:05 22349046                   /usr/lib64/newrelic-php5/agent/x64/newrelic-20090626.so
2b7938864000-2b793886e000 rw-p 2b7938864000 00:00 0
2b7939d5c000-2b7939f55000 rw-p 2b7939d5c000 00:00 0                      [heap]
2b793ac47000-2b793ad47000 rw-p 2b793ac47000 00:00 0
2b793ad47000-2b797ad47000 rw-s 00000000 68:07 98315                      /tmp/apc.gX866Q (deleted)
2b797ad47000-2b797ae48000 rw-p 2b797ad47000 00:00 0
7fffbfa12000-7fffbfb39000 rw-p 7fffffed7000 00:00 0                      [stack]
7fffbfb51000-7fffbfb54000 r-xp 7fffbfb51000 00:00 0                      [vdso]
ffffffffff600000-ffffffffffe00000 ---p 00000000 00:00 0                  [vsyscall]
[Thu May 02 12:59:48 2013] [notice] caught SIGTERM, shutting down


[root@spwsnm49 httpd]# httpd -V
Server version: Apache/2.2.23 (Unix)
Server built:   Sep 26 2012 00:00:07
Server&apos;s Module Magic Number: 20051115:31
Server loaded:  APR 1.2.7, APR-Util 1.4.1
Compiled using: APR 1.4.6, APR-Util 1.4.1
Architecture:   64-bit
Server MPM:     Prefork
  threaded:     no
    forked:     yes (variable process count)
Server compiled with....
 -D APACHE_MPM_DIR=&quot;server/mpm/prefork&quot;
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT=&quot;/etc/httpd&quot;
 -D SUEXEC_BIN=&quot;/usr/sbin/suexec&quot;
 -D DEFAULT_PIDLOG=&quot;logs/httpd.pid&quot;
 -D DEFAULT_SCOREBOARD=&quot;logs/apache_runtime_status&quot;
 -D DEFAULT_LOCKFILE=&quot;logs/accept.lock&quot;
 -D DEFAULT_ERRORLOG=&quot;logs/error_log&quot;
 -D AP_TYPES_CONFIG_FILE=&quot;conf/mime.types&quot;
 -D SERVER_CONFIG_FILE=&quot;conf/httpd.conf&quot;
[root@spwsnm49 httpd]#</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>167044</commentid>
    <comment_count>1</comment_count>
    <who name="Stefan Fritsch">sf</who>
    <bug_when>2013-05-05 18:24:22 +0000</bug_when>
    <thetext>To get any idea what is happening here, you would need to enable core dumps and create a full backtrace with gdb. But the appearance of /usr/lib64/php/modules/newrelic.so in the trace makes me suspect that there is a php extension that is not thread safe.


&gt; Server loaded:  APR 1.2.7, APR-Util 1.4.1
&gt; Compiled using: APR 1.4.6, APR-Util 1.4.1

You may also want to try running httpd with at least apr 1.4.x if you compiled with 1.4.6. Or re-compile with 1.2.7.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>54934</bug_id>
          
          <creation_ts>2013-05-07 14:28:07 +0000</creation_ts>
          <short_desc>Apache is crashing intermittently with a message &quot;Parent: child process exited with status 3221225477 -- Restarting&quot; and also with Parent: child process exited with status 255 -- Restarting. Apache is running on windows.We are neither using php nor mysql.</short_desc>
          <delta_ts>2014-01-20 00:12:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.22</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="seer">banu_gopal1</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>akshay.ballarpure</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>167077</commentid>
    <comment_count>0</comment_count>
    <who name="seer">banu_gopal1</who>
    <bug_when>2013-05-07 14:28:07 +0000</bug_when>
    <thetext>Apache is crashing intermittently with a message &quot;Parent: child process exited with status 3221225477 -- Restarting&quot; and sometimes with this message &quot;Parent: child process exited with status 255 -- Restarting.&quot; Apache is running on windows.We are neither using php nor mysql. We have a communique dispatcher configured that would dispatch the requests to Adobe communique server. I would appreciate it if you would let us know when apache would throw this kind of exception. Any pointers regarding this issue would be greatly appreciated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>168524</commentid>
    <comment_count>1</comment_count>
    <who name="Jorge F. Hernandez">jfha73</who>
    <bug_when>2013-07-11 20:53:37 +0000</bug_when>
    <thetext>I am getting the same error with httpd 2.4.4 x64 with php 5.5 and mysql 5.6, I never got it on httpd 2.2.22 with php 5.4 and mysql 5.5

All my error log says is:

[Thu Jul 11 16:46:21.080564 2013] [mpm_winnt:notice] [pid 1928:tid 552] AH00428: Parent: child process 7628 exited with status 255 -- Restarting.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>172520</commentid>
    <comment_count>2</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2014-01-20 00:12:48 +0000</bug_when>
    <thetext>You&apos;ll have to configure the OS to capture dumps for crashes, and do a basic analysis with windbg.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>55022</bug_id>
          
          <creation_ts>2013-05-28 08:35:52 +0000</creation_ts>
          <short_desc>child pid 3123 exit signal Bus error (10) - Apache not responding</short_desc>
          <delta_ts>2013-05-28 10:16:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.2.22</version>
          <rep_platform>Sun</rep_platform>
          <op_sys>Solaris</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="aks">akshay.ballarpure</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>167443</commentid>
    <comment_count>0</comment_count>
    <who name="aks">akshay.ballarpure</who>
    <bug_when>2013-05-28 08:35:52 +0000</bug_when>
    <thetext>Hello,
Apache is stuck on Solaris 10 OS.
We are seeing below error in Apache error_log file 


Mon May 27 17:47:49 2013] [warn] FastCGI: server &quot;/usr/apache2_cgems/cgi-bin-putusers/put.fcgi&quot; started (pid 23185)
[Mon May 27 17:47:50 2013] [warn] FastCGI: server &quot;/usr/apache2_cgems/cgi-bin-putusers/put.fcgi&quot; started (pid 23205)
[Mon May 27 17:47:51 2013] [warn] FastCGI: server &quot;/usr/apache2_cgems/cgi-bin-putusers/put.fcgi&quot; started (pid 23208)
[Mon May 27 18:23:04 2013] [error] [client 10.18.240.208] Invalid method in request \x16\x03
[Mon May 27 19:43:28 2013] [notice] child pid 3123 exit signal Bus error (10)
[Mon May 27 19:43:28 2013] [notice] child pid 2475 exit signal Bus error (10)

Could you please let us know the root cause of this issue.

Thanks,
Akshay.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>167452</commentid>
    <comment_count>1</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-05-28 10:16:34 +0000</bug_when>
    <thetext>You&apos;ll have to configure your system to capture coredumps, recreate, and send in pstack output against the core.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>55034</bug_id>
          
          <creation_ts>2013-05-31 10:00:29 +0000</creation_ts>
          <short_desc>Apache 2.4.4 won&apos;t open more that 32k VH file handlers</short_desc>
          <delta_ts>2013-05-31 11:44:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>FreeBSD</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>admin</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          <cc>admin</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>167529</commentid>
    <comment_count>0</comment_count>
    <who name="">admin</who>
    <bug_when>2013-05-31 10:00:29 +0000</bug_when>
    <thetext>If you had few thousands Virtualhosts each few log files etc. - apache won&apos;t start if the amount of file handlers exceed around 32k.

We are not hitting the system limits.

# limits -U apache
Resource limits for class default:
  cputime          infinity secs
  filesize         infinity kB
  datasize         infinity kB
  stacksize        infinity kB
  coredumpsize     infinity kB
  memoryuse        infinity kB
  memorylocked     infinity kB
  maxprocesses     infinity
  openfiles        infinity
  sbsize           infinity bytes
  vmemoryuse       infinity kB
 #


# limit
cputime      unlimited
filesize     unlimited
datasize     33554432 kbytes
stacksize    524288 kbytes
coredumpsize unlimited
memoryuse    unlimited
vmemoryuse   unlimited
descriptors  131072
memorylocked unlimited
maxproc      65536
sbsize       unlimited</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>167532</commentid>
    <comment_count>1</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-05-31 10:21:43 +0000</bug_when>
    <thetext>truss of startup failure?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>167533</commentid>
    <comment_count>2</comment_count>
    <who name="">admin</who>
    <bug_when>2013-05-31 10:28:46 +0000</bug_when>
    <thetext>&gt; truss of startup failure?

What do you mean exactly?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>167534</commentid>
    <comment_count>3</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2013-05-31 11:44:06 +0000</bug_when>
    <thetext>You&apos;ll need to provide some kind of trace to show your OS is not simply returning an error after 32k file descriptors are used.  Some type of truss/strace/ should be able to show the failing call (you might also have an error in your terminal or base configs error log)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>58248</bug_id>
          
          <creation_ts>2015-08-17 06:28:03 +0000</creation_ts>
          <short_desc>Error 404 in use some characters of utf8 in url</short_desc>
          <delta_ts>2016-05-16 14:56:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.4.16</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>kazemi.yahya</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>184588</commentid>
    <comment_count>0</comment_count>
    <who name="">kazemi.yahya</who>
    <bug_when>2015-08-17 06:28:03 +0000</bug_when>
    <thetext>Hi everybody
I installed new xammp with apache 2.4.16.
After working some days, i found out that the URL with character of &quot;مم&quot; redirected to 404 error.

look at please link 
http://razavitv.aqr.ir/index/معصومه 
or 
http://razavitv.aqr.ir/index/امام

You can test this on your local apache server.

Thanks in advanced.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>190989</commentid>
    <comment_count>1</comment_count>
    <who name="Eric Covener">covener</who>
    <bug_when>2016-05-16 14:56:19 +0000</bug_when>
    <thetext>Why wouldn&apos;t it? What&apos;s logged and what exists in the filesystem?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>37196</bug_id>
          
          <creation_ts>2005-10-21 14:20:55 +0000</creation_ts>
          <short_desc>Wrong &quot;Parent directory&quot; link</short_desc>
          <delta_ts>2012-05-01 05:55:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Apache httpd-2</product>
          <component>All</component>
          <version>2.0-HEAD</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEEDINFO</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="marcomurk">marcomurk</reporter>
          <assigned_to name="Apache HTTPD Bugs Mailing List">bugs</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>81515</commentid>
    <comment_count>0</comment_count>
    <who name="marcomurk">marcomurk</who>
    <bug_when>2005-10-21 14:20:55 +0000</bug_when>
    <thetext>When a http request for an existing directory in the web root is sent to apache
with 2 slash at the beginning and at the end of directory&apos;s name, if directory
listing is enabled, the &quot;parent directory&quot; link will be wrong and could redirect
to other sites.
Example:
http://www.it.kernel.org//debian//
If you click on the &quot;parent directory&quot; link you&apos;ll be redirected to http://debian/.
Some browsers correct http://debian/ in http://www.debian.org/ and instead of
seeing the parent directory (the main page of www.it.kernel.org), you&apos;re now
seeing another site&apos;s page (http://www.debian.org/).
I hope this will be useful for you.
I&apos;m sorry for my English and my inexperience.
Marcomurk</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>81516</commentid>
    <comment_count>1</comment_count>
    <who name="André Malo">nd</who>
    <bug_when>2005-10-21 14:25:54 +0000</bug_when>
    <thetext>Uhm. That looks more like a misconfigured Alias (e.g.
http://www.it.kernel.org/debian results in 404). A &quot;perfect&quot; alias should be

Alias /debian /path/to/debian

without any trailing slashes. Then you get proper trailing slash redirects and
that. I suspect, that you have

Alias /debian/ /path/to/debian

or something like that. Can you check that?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>81548</commentid>
    <comment_count>2</comment_count>
    <who name="marcomurk">marcomurk</who>
    <bug_when>2005-10-21 22:08:04 +0000</bug_when>
    <thetext>Thanks for your quick reply.
I checked what you suggested me but I didn&apos;t find the trailing slash in my alias
instructions.
Hovewer I noticed there&apos;s the same problem in all the apache servers with
directory listing of the web root enabled (even lots of apache downloads
mirrors), and even in servers don&apos;t result 404 when the trailing slash is not used.
Here&apos;re some examples:
http://mirror.nohup.it/apache doesn&apos;t result 404.
http://mirror.nohup.it//apache// --&gt; parent dir link --&gt; http://apache/ --&gt;
browser&apos;s correction (mozilla firefox&apos;s one) --&gt; www.apache.org
http://apache.mirror99.com//perl// --&gt;parent dir link--&gt; http://perl/ --&gt;
browser&apos;s correction --&gt; www.perl.com
http://apache.mirrors.versehost.com//cocoon//--&gt;parent dir link--&gt;
http://cocoon/ --&gt; browser&apos;s correction --&gt; www.cocoon.com
http://apache.secsup.org//dist// --&gt;parent dir link--&gt; http://dist/--&gt; browser&apos;s
correction --&gt; www.linux.org/dist

Marcomurk</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>158693</commentid>
    <comment_count>3</comment_count>
    <who name="Daniel Gruno">humbedooh</who>
    <bug_when>2012-05-01 05:55:07 +0000</bug_when>
    <thetext>Poking at this old bug.

This isn&apos;t really an httpd error as much as it is a browser quirkiness. If you look at the source code for the HTML, you will see that the address isn&apos;t http://apache/ but instead //apache/, which is what you would expect the parent of //apache// to be. That [insert browser name here] translates that into adding a http scheme in front of it, well that can&apos;t really be helped much by httpd.

Having said that, the behavior, at least in 2.2 and 2.4 are that any excessive leading slashes are now removed when the parent URI is translated. I&apos;m not sure whether this also applies to 2.0, can someone confirm/deny this?</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>